{"version":3,"sources":["components/SolanaIcon.js","components/AddAccountDialog.js","components/DeleteMnemonicDialog.js","components/AddHarwareWalletDialog.js","components/ConnectionIcon.js","utils/connected-wallets.js","utils/page.js","components/AddCustomClusterDialog.js","components/NavigationFrame.js","pages/WalletPage.js","utils/transactions.ts","components/instructions/LabelValue.js","components/instructions/NewOrder.js","components/instructions/UnknownInstruction.js","components/instructions/StakeInstruction.js","components/instructions/SystemInstruction.js","components/instructions/DexInstruction.js","components/instructions/TokenInstruction.js","components/SignTransactionFormContent.js","components/SignFormContent.js","pages/PopupPage.js","utils/diffie-hellman/index.js","pages/OnboardingPage.js","components/ConnectionsList.js","pages/ConnectionsPage.js","App.js","serviceWorker.js","index.js","components/LoadingIndicator.js","utils/tokens/index.js","pages/WelcomePage.js","utils/clusters.js","utils/walletProvider/ledger-core.js","utils/utils.ts","utils/walletProvider/ledger.js","utils/wallet.js","utils/connection.tsx","components/ExportAccountDialog.js","components/CopyableDisplay.js","components/TokenInfoDialog.js","components/TokenIcon.js","components/FtxPay/FtxPayDialog.js","utils/config.js","utils/swap/api.js","components/AddTokenDialog.js","utils/swap/eth.js","utils/markets.ts","utils/name-service/index.ts","components/SendDialog.js","components/DepositDialog.js","utils/region.ts","components/EditAccountNameDialog.js","components/MergeAccountsDialog.js","components/styles/buttons.js","components/SwapButton.js","components/BalancesList.js","components/DomainsList.tsx","components/DialogForm.js","utils/fetch-loop.ts","utils/walletProvider/factory.js","utils/wallet-seed.js","utils/diffie-hellman/ed2curve.js","utils/tokens/instructions.js","utils/notifications.js","utils/walletProvider/localStorage.js","utils/tokens/data.js","utils/tokens/names.js"],"names":["SolanaIcon","SvgIcon","viewBox","d","AddAccountDialog","open","onAdd","onClose","useState","name","setName","isImport","setIsImport","importedPrivateKey","setPrivateKey","importedAccount","decodeAccount","undefined","isAddEnabled","DialogForm","onEnter","onSubmit","fullWidth","DialogTitle","DialogContent","style","paddingTop","display","flexDirection","TextField","label","variant","margin","value","onChange","e","target","trim","FormGroup","FormControlLabel","control","Switch","checked","type","DialogActions","Button","onClick","color","disabled","DeleteMnemonicDialog","seedCheck","setSeedCheck","useUnlockedMnemonicAndSeed","mnemKey","maxWidth","forgetWallet","DialogContentText","Box","align","my","Typography","multiline","rows","normalizeMnemonic","mnemonic","AddHardwareView","AddHardwareWalletDialog","view","setView","hardwareAccount","setHardwareAccount","AddHardwareWalletSplash","onContinue","LedgerAccounts","account","ConfirmHardwareWallet","onDone","onBack","didConfirm","setDidConfirm","useEffect","provider","confirmPublicKey","then","catch","err","console","error","fontWeight","publicKey","toString","DerivationPathMenuItem","Bip44Root","dPathMenuItem","setDPathMenuItem","enqueueSnackbar","useSnackbar","accounts","setAccounts","fetch","a","LedgerWalletProvider","derivationPath","toDerivationPath","init","push","k","log","statusCode","Card","elevation","padding","CircularProgress","marginLeft","marginRight","showRoot","pubKey","change","ConnectionIcon","height","width","fill","ConnectedWalletsContext","createContext","ConnectedWalletsProvider","children","connectedWallets","setConnectedWallets","updateConnectionAmount","chrome","storage","local","get","result","listener","changes","onChanged","addListener","removeListener","Provider","useConnectedWallets","useContext","PageContext","PageProvider","page","setPage","usePage","AddCustomClusterDialog","apiUrl","setApiUrl","useStyles","makeStyles","theme","content","flexGrow","paddingBottom","spacing","breakpoints","up","ext","paddingLeft","paddingRight","title","button","menuItemIcon","minWidth","badge","backgroundColor","palette","success","main","text","NavigationFrame","classes","isExtensionWidth","useIsExtensionWidth","Grid","container","justify","m","NavigationButtons","className","Footer","isExtensionPopup","elements","isExtension","ConnectionsButton","WalletSelector","NetworkSelector","WalletButton","ExpandButton","Tooltip","IconButton","window","extension","getURL","OpenInNew","Hidden","smUp","MonetizationOn","xsDown","connectionAmount","Object","keys","length","Badge","badgeContent","useConnectionConfig","endpoint","setEndpoint","cluster","useMemo","clusterForEndpoint","anchorEl","setAnchorEl","addCustomNetworkOpen","setCustomNetworkOpen","addCustomCluster","arrow","Menu","anchorOrigin","vertical","horizontal","getContentAnchorEl","getClusters","map","MenuItem","selected","ListItemIcon","fontSize","customClusterExists","useWalletSelector","derivedAccounts","hardwareWalletAccount","setHardwareWalletAccount","setWalletSelector","addAccount","addAccountOpen","setAddAccountOpen","addHardwareWalletDialogOpen","setAddHardwareWalletDialogOpen","deleteMnemonicOpen","setDeleteMnemonicOpen","exportMnemonicOpen","setExportMnemonicOpen","ledger","walletIndex","importedPubkey","AccountListItem","Divider","useFooterStyles","footer","justifyContent","component","rel","href","startIcon","selector","isSelected","address","toBase58","down","balancesContainer","marginBottom","WalletPage","Container","fixed","item","xs","BalancesList","RAYDIUM_STAKE_PROGRAM_ID","PublicKey","RAYDIUM_LP_PROGRAM_ID","MANGO_PROGRAM_ID","MANGO_PROGRAM_ID_V2","marketCache","marketCacheConnection","decodeMessage","connection","wallet","message","transactionMessage","Message","from","instructions","accountKeys","i","transactionInstruction","toInstruction","instruction","rawData","data","index","programIdIndex","decoded","bs58","decode","programId","getAccountByIndex","equals","SystemProgram","handleSystemInstruction","StakeProgram","handleStakeInstruction","TOKEN_PROGRAM_ID","handleTokenInstruction","MARKETS","some","market","decodedInstruction","decodeInstruction","handleDexInstruction","decodeStakeInstruction","handleRayStakeInstruction","decodeLpInstruction","handleRayLpInstruction","decodeMangoInstruction","handleMangoInstruction","accountMetas","isWritable","isAccountWritable","JSON","stringify","marketInfo","find","findIndex","accountKey","marketAddress","programIdAddress","strAddress","now","Date","getTime","ts","Market","load","settleFundsData","getSettleFundsData","newOrderData","getNewOrderData","getNewOrderV3Data","systemInstruction","accountIndex","pubkey","SystemInstruction","decodeInstructionType","decodeCreateAccount","decodeCreateWithSeed","decodeAllocate","decodeAllocateWithSeed","decodeAssign","decodeAssignWithSeed","decodeTransfer","decodeNonceAdvance","decodeNonceWithdraw","decodeNonceInitialize","decodeNonceAuthorize","fromPubkey","stakeInstruction","StakeInstruction","decodeAuthorizeWithSeed","decodeAuthorize","decodeDeactivate","decodeDelegate","lockup","decodeInitialize","unixTimestamp","epoch","custodian","default","authorizedStaker","authorized","staker","authorizedWithdrawer","withdrawer","decodeSplit","decodeWithdraw","tokenInstruction","decodeTokenInstruction","params","openOrdersPubkey","NEW_ORDER_OPEN_ORDERS_INDEX","ownerPubkey","NEW_ORDER_OWNER_INDEX","NEW_ORDER_V3_OPEN_ORDERS_INDEX","NEW_ORDER_V3_OWNER_INDEX","basePubkey","SETTLE_FUNDS_BASE_WALLET_INDEX","quotePubkey","SETTLE_FUNDS_QUOTE_WALLET_INDEX","LabelValue","link","gutterBottom","Link","Neworder","onOpenAddress","v3","useWallet","marketLabel","deprecated","_decoded","ownAddress","side","limitPrice","orderType","maxQuantity","maxBaseQuantity","charAt","toUpperCase","slice","priceLotsToNumber","baseSizeLotsToNumber","UnknownInstruction","accountMeta","wordBreak","TYPE_LABELS","stakeAuthorizeWithSeed","stakeAuthorize","stakeDeactivate","stakeDelegate","stakeInitialize","stakeSplit","stakeWithdraw","DATA_LABELS","stakePubkey","authorizedPubkey","votePubkey","authorizedSeed","noncePubkey","authorityBase","authoritySeed","authorityOwner","newAuthorizedPubkey","stakeAuthorizationType","transform","custodianPubkey","splitStakePubkey","lamports","entries","key","dataLabel","systemCreate","systemCreateWithSeed","systemTransfer","toPubkey","accountPubkey","seed","newAccountPubkey","amount","cancelOrder","newOrder","settleFunds","matchOrders","orderId","limit","DexInstruction","useWalletPublicKeys","publicKeys","getAddressValue","isOwned","ownedKey","initializeMint","initializeAccount","transfer","approve","revoke","mintTo","closeAccount","authorityType","currentAuthority","decimals","delegate","destination","mint","mintAuthority","newAuthority","owner","source","TokenInstruction","tokenMint","TOKEN_MINTS","token","isOwner","isSafeInstruction","txInstructions","unsafe","states","CREATED","OWNED","CLOSED_TO_OWNED_DESTINATION","accountStates","ownedAccountPubkey","forEach","includes","sourcePubkey","destinationPubkey","values","state","SignTransactionFormContent","origin","messages","onApprove","autoApprove","buttonRef","explorerUrlSuffix","useSolanaExplorerUrlSuffix","useConnection","parsing","setParsing","setTxInstructions","isMultiTx","Promise","all","validator","safe","focus","currentButtonRef","current","scrollIntoView","behavior","setTimeout","getContent","CardContent","alignItems","idx","encode","txIdx","ixs","marginTop","txListItem","SignFormContent","messageDisplay","messageTxt","buffer","TextDecoder","Array","prototype","call","x","join","Error","renderAction","AUTHORIZED_METHODS","getInitialRequests","urlParams","URLSearchParams","location","hash","request","parse","method","dataObj","Uint8Array","PopupPage","opener","selectedWallet","selectedWalletAddress","setWallet","connectedAccount","setConnectedAccount","hasConnectedAccount","requests","setRequests","setAutoApprove","postMessage","useCallback","runtime","sendMessage","channel","jsonrpc","connectedWallet","unloadHandler","addEventListener","removeEventListener","messageHandler","id","popRequest","close","focusParent","mustConnect","ApproveConnectionForm","set","diffieHellman","sendSignature","sendAllSignatures","createSignature","signature","signatures","secretKey","ed2curve","convertKeyPair","generateDiffieHelllman","assert","ApproveSignatureForm","onReject","textAlign","transaction","approveButton","actions","snackbarRoot","background","paper","warningMessage","primary","warningIcon","warningTitle","warning","light","warningContainer","divider","concat","useLocalStorageState","dismissed","setDismissed","SnackbarContent","action","root","CardActions","useRef","ref","styles","welcomeCard","textContainer","borderRadius","lineHeight","textTransform","buttonSkip","buttonStack","stepper","OnboardingPage","useHasLockedMnemonicAndSeed","hasLockedMnemonicAndSeed","step","setStep","skip","setSkip","paragraph","WelcomePage","px","py","CardMedia","image","MobileStepper","steps","position","activeStep","pb","p","ConnectionsList","Paper","AppBar","Toolbar","List","disablePadding","ConnectionsListItem","itemDetails","buttonContainer","listItemIcon","ICON_SIZE","listItemImage","IMAGE_SIZE","setOpen","appleIconUrl","faviconUrl","iconUrl","setIconUrl","ListItem","src","onError","alt","flex","ListItemText","secondary","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","class","size","DoneAll","ConnectionsPage","App","prefersDarkMode","useMediaQuery","React","createMuiTheme","dark","contrastText","typography","fontFamily","h1","h2","h3","shape","overrides","MuiButton","tokens","h4","caption","MuiDialogContentText","MuiDialogTitle","MuiTextField","self","top","appElement","fallback","LoadingIndicator","PageContents","ThemeProvider","CssBaseline","maxSnack","autoHideDuration","localStorage","getItem","walletButton","cursor","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","delay","rest","visible","setVisible","useEffectAfterTimeout","getOwnedTokenAccounts","filters","getOwnedAccountsFilters","getProgramAccounts","resp","executable","accountInfo","signAndSendTransaction","signers","skipPreflight","getRecentBlockhash","recentBlockhash","blockhash","setSigners","s","partialSign","signTransaction","rawTransaction","serialize","sendRawTransaction","preflightCommitment","nativeTransfer","tx","Transaction","add","createAndInitializeTokenAccount","payer","mintPublicKey","newAccount","getMinimumBalanceForRentExemption","ACCOUNT_LAYOUT","span","space","createAccount","createAssociatedTokenAccount","splTokenMintAddress","createAssociatedTokenAccountIx","ix","feePayer","txSig","fundingAddress","walletAddress","findAssociatedTokenAddress","associatedTokenAddress","systemProgramId","isSigner","TokenInstructions","SYSVAR_RENT_PUBKEY","TransactionInstruction","ASSOCIATED_TOKEN_PROGRAM_ID","Buffer","tokenMintAddress","findProgramAddress","toBuffer","transferTokens","sourcePublicKey","destinationPublicKey","memo","overrideDestinationCheck","getAccountInfo","destinationAccountInfo","transferBetweenSplTokenAccounts","destinationAssociatedTokenAddress","createAndTransferToAccount","createTransferBetweenSplTokenAccountsInstruction","ownerPublicKey","transferChecked","memoInstruction","createAccountInstruction","newAddress","assertOwner","transferBetweenAccountsTxn","closeTokenAccount","welcomeFirst","lineHieght","welcomeSecond","restore","setRestore","RestoreWalletForm","goBack","LoginForm","WelcomeForm","createWallet","setCreateWallet","restoreWallet","setRestoreWallet","CreateWalletMessagges","mb","CreateWalletForm","mnemonicAndSeed","setMnemonicAndSeed","generateMnemonicAndSeed","savedWords","setSavedWords","callAsync","useCallAsync","ChoosePasswordForm","password","storeMnemonicAndSeed","DERIVATION_PATH","bip44Change","progressMessage","successMessage","SeedWordsForm","goForward","confirmed","setConfirmed","downloaded","setDownloaded","showDialog","setShowDialog","onFocus","currentTarget","select","mt","url","URL","createObjectURL","Blob","createElement","setAttribute","body","appendChild","click","downloadMnemonic","setPassword","passwordConfirm","setPasswordConfirm","autoComplete","stayLoggedIn","setStayLoggedIn","submit","loadMnemonicAndSeed","onKeyDown","code","preventDefault","stopPropagation","rawMnemonic","setRawMnemonic","setSeed","next","setNext","isNextBtnEnabled","validateMnemonic","displayInvalidMnemonic","DerivedAccounts","mnemonicToSeed","Bip44Change","_","getAccountFromSeed","AccountsSelector","showDeprecated","Bip44","Deprecated","acc","expandable","bip44","bip44Root","CLUSTERS","MAINNET_URL","clusterSlug","MAINNET_BACKUP_URL","clusterApiUrl","customClusterConfigKey","stringifiedConfig","setItem","config","require","MAX_PAYLOAD","LEDGER_CLA","solana_send","transport","p1","payload","p2","payload_offset","buf","send","reply","_harden","n","solana_derivation_path","useAccount","useChange","derivation_path","alloc","offset","writeUInt8","writeUInt32BE","solana_ledger_get_pubkey","solana_ledger_sign_transaction","msg_bytes","serializeMessage","solana_ledger_sign_bytes","num_paths","getPublicKey","path","from_derivation_path","from_pubkey_bytes","from_pubkey_string","solana_ledger_confirm_public_key","sleep","ms","resolve","defaultState","storedState","setState","setLocalStorageState","newState","removeItem","effect","handle","clearTimeout","useListener","emitter","eventName","forceUpdate","on","useRefEqual","areEqual","prevRef","abbreviateAddress","base58","confirmTransaction","startTime","protocol","privateKey","Keypair","fromSecretKey","TRANSPORT","args","TransportWebHid","create","solanaDerivationPath","onDisconnect","listAddresses","walletCount","this","sig_bytes","addSignature","DEFAULT_WALLET_SELECTOR","Wallet","getTokenAccountInfo","setInitialAccountInfo","parsed","parseTokenAccountData","sort","account1","account2","localeCompare","createTokenAccount","tokenAddress","Account","tokenAccountCost","transferToken","transferSol","WalletProviderFactory","getProvider","instance","WalletContext","WalletProvider","walletSeedChanged","importsEncryptionKey","privateKeyImports","setPrivateKeyImports","walletSelector","_hardwareWalletAccount","setWalletCount","nonce","ciphertext","nacl","secretbox","getWalletNames","walletNames","setWalletNames","seedBuffer","importedAccounts","randomBytes","nonceLength","plaintext","newPrivateKeyImports","setAccountName","newName","useAsyncData","tokenAccountInfo","loaded","oldKeys","newKeys","every","useWalletTokenAccounts","refreshWalletPublicKeys","refreshCache","useWalletAddressForMint","walletAccounts","useBalanceInfo","useAccountInfo","accountInfoLoaded","mintInfo","mintInfoLoaded","useTokenInfo","symbol","logoUri","parseMintData","tokenName","tokenSymbol","tokenLogoUri","valid","ConnectionContext","ConnectionProvider","Connection","context","useIsProdNetwork","cacheKey","tuple","previousInfo","onAccountChange","info","setCache","removeAccountChangeListener","oldInfo","newInfo","refreshAccountInfo","clearCache","initializeOnly","getMultipleSolanaAccounts","anchor","rpc","getMultipleAccounts","ExportAccountDialog","isHidden","setIsHidden","keyOutput","ExportMnemonicDialog","CopyableDisplay","autoFocus","qrCode","helperText","textareaRef","inputRef","readOnly","textArea","spellCheck","execCommand","useQrCodeStyles","qrcodeContainer","Qrcode","showQrcode","setShowQrcode","Dialog","includeMargin","explorerLink","TokenIcon","props","hasError","setHasError","menuItem","tokenIcon","FtxPayDialog","popularTokens","usePopularTokens","selectedAccount","coin","setCoin","urlSuffix","FormControl","Select","filter","tokenInfo","urlSearchParams","append","SwapApiError","msg","status","swapApiRequest","ignoreUserErrors","headers","cache","handleSwapApiResponse","json","feeFormat","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","tabs","borderBottom","AddTokenDialog","updateTokenName","useUpdateTokenName","useSendTransaction","sendTransaction","sending","tab","setTab","mintAddress","setMintAddress","setTokenName","setTokenSymbol","erc20Address","setErc20Address","addToken","onSuccess","splMint","ticker","blockchain","startsWith","format","LAMPORTS_PER_SOL","Tabs","textColor","indicatorColor","Tab","TokenListItem","existingAccount","Fragment","alreadyExists","Web3","ethereum","Set","serumMarkets","split","PriceStore","marketName","reject","_rpcEndpoint","asks","bids","price","mid","priceStore","useRegion","useAsync","EditAccountNameDialog","oldName","onEdit","MergeAccountsDialog","isMerging","setIsMerging","mergeCheck","setMergeCheck","tokenInfos","useTokenInfos","mergeAccounts","retryCount","tokenAccounts","groupedTokenAccounts","ta","mints","mintGroup","assocTokAddr","getTokenInfo","mergeMint","refresh","toLowerCase","disableBackdropClick","mintAccountSet","assocTok","tokAddr","pop","associatedTokenAccount","tokenAccount","actionButtons","buttonText","SwapButton","SwapButtonDialog","SwapButtonPopover","dialogOpen","setDialogOpen","tokenList","TokenListContainer","NotifyingProvider","containerStyle","boxShadow","popupState","bindTrigger","Popover","bindPopover","transformOrigin","PaperProps","disableRestoreFocus","keepMounted","commitment","opts","txs","txSigs","balanceFormat","textOverflow","overflowX","opacity","input","transferContainer","overflowY","modal","useGrouping","SortAccounts","usdValues","associatedTokensCache","numberFormat","currency","fairsIsLoaded","pk","showAddTokenDialog","setShowAddTokenDialog","showEditAccountNameDialog","setShowEditAccountNameDialog","showMergeAccounts","setShowMergeAccounts","showFtxPayDialog","setShowFtxPayDialog","sortAccounts","setSortAccounts","setForceUpdate","region","allTokensLoaded","sortedPublicKeys","b","aVal","bVal","totalUsdValue","reduce","setUsdValuesCallback","usdValue","balanceListItemsMemo","BalanceListItem","setUsdValue","iconSize","AccountBalance","sx","bgcolor","mx","isRestricted","Memoized","border","disableShrink","viewDetails","balanceInfo","setPrice","getPrice","displayName","assign","Math","pow","toFixed","parseFloat","isCopied","setIsCopied","onCopy","hover","useTheme","fullScreen","pageLoadTime","globalCache","Map","errorCache","globalLoops","loops","has","FetchLoopInternal","fn","loop","stopped","delete","FetchLoopListener","refreshInterval","callback","timeoutId","listeners","errors","warn","notifyListeners","waitTime","min","timeSincePageLoad","visibilityState","hasFocus","random","previousRefreshInterval","asyncFn","useReducer","rerender","formatCacheKey","isArray","LocalStorageWalletProvider","bip39","generateMnemonic","getExtensionUnlockedMnemonic","EMPTY_MNEMONIC","unlockedMnemonicAndSeed","unlockedExpiration","Number","sessionStorage","stored","deriveImportsEncryptionKey","EventEmitter","getUnlockedMnemonicAndSeed","currentUnlockedMnemonic","setCurrentUnlockedMnemonic","unlockedMnemonic","loading","setUnlockedMnemonicAndSeed","emit","salt","kdf","iterations","digest","deriveEncryptionKey","encrypted","encodedEncrypted","encodedNonce","encodedSalt","decodedPlaintext","pbkdf2","keyLength","bip32","derivePath","clear","reload","f","gf","r","Float64Array","gf0","gf1","D","I","car25519","o","c","floor","sel25519","q","t","A","Z","M","j","S","pack25519","neq25519","xi","y","yi","vn","unpackneg","chk","num","den","den2","den4","den6","set25519","unpack25519","pow2523","par25519","convertPublicKey","z","inv25519","convertSecretKey","sk","lowlevel","crypto_hash","edKeyPair","module","exports","WRAPPED_SOL_MINT","MEMO_PROGRAM_ID","LAYOUT","BufferLayout","addVariant","instructionMaxSpan","max","registry","encodeTokenInstructionData","freezeAuthority","freezeAuthorityOption","PublicKeyLayout","property","OWNER_VALIDATION_PROGRAM_ID","OWNER_VALIDATION_LAYOUT","encodeOwnerValidationInstruction","closeSnackbar","setSending","signaturePromise","persist","ViewTransactionOnExplorerButton","promise","dPath","derivedSeed","deriveSeed","sign","keyPair","fromSeed","path44","path44Change","detached","MINT_LAYOUT","memcmp","offsetOf","bytes","dataSize","POPULAR_TOKENS","icon","TokenListContext","TokenRegistryProvider","setTokenInfos","TokenListProvider","tokenListContainer","filteredTokenListContainer","filterByClusterSlug","getList","customTokenNamesByNetwork","nameUpdated","logoURI","tok","setMaxListeners"],"mappings":"8eAGe,SAASA,IACtB,OACE,eAACC,EAAA,EAAD,CAASC,QAAQ,cAAjB,UACE,sBAAMC,EAAE,yOACR,sBAAMA,EAAE,0OACR,sBAAMA,EAAE,2O,0HCIC,SAASC,GAAT,GAAqD,IAAzBC,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QACtD,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAgCF,oBAAS,GAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA4CJ,mBAAS,IAArD,mBAAOK,EAAP,KAA2BC,EAA3B,KAEMC,EAAkBJ,EACpBK,YAAcH,QACdI,EACEC,EAAeP,EAAWF,QAA4BQ,IAApBF,EAAgCN,EAExE,OACE,eAACU,EAAA,EAAD,CACEd,KAAMA,EACNe,QAAS,WACPV,EAAQ,IACRE,GAAY,GACZE,EAAc,KAEhBP,QAASA,EACTc,SAAU,kBAAMf,EAAM,CAAEG,OAAMM,qBAC9BO,WAAS,EATX,UAWE,cAACC,EAAA,EAAD,0BACA,cAACC,EAAA,EAAD,CAAeC,MAAO,CAAEC,WAAY,IAApC,SACE,sBACED,MAAO,CACLE,QAAS,OACTC,cAAe,UAHnB,UAME,cAACC,EAAA,EAAD,CACEC,MAAM,OACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOxB,EACPyB,SAAU,SAACC,GAAD,OAAOzB,EAAQyB,EAAEC,OAAOH,MAAMI,WAE1C,cAACC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CACEC,QACE,cAACC,EAAA,EAAD,CACEC,QAAS/B,EACTuB,SAAU,kBAAMtB,GAAaD,MAGjCmB,MAAM,yBAGTnB,GACC,cAACkB,EAAA,EAAD,CACEC,MAAM,8BACNR,WAAS,EACTqB,KAAK,WACLV,MAAOpB,EACPkB,QAAQ,WACRC,OAAO,SACPE,SAAU,SAACC,GAAD,OAAOrB,EAAcqB,EAAEC,OAAOH,MAAMI,gBAKtD,eAACO,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASvC,EAAjB,mBACA,cAACsC,EAAA,EAAD,CAAQF,KAAK,SAASI,MAAM,UAAUC,UAAW9B,EAAjD,uB,wBCnEO,SAAS+B,GAAT,GAAkD,IAAlB5C,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QACnD,EAAkCC,mBAAS,IAA3C,mBAAO0C,EAAP,KAAkBC,EAAlB,KACA,EAAkBC,eAAXC,EAAP,oBACA,OACE,mCACE,eAAClC,EAAA,EAAD,CACEd,KAAMA,EACNE,QAASA,EACT+C,SAAS,KACTjC,SAAU,WACRkC,eACAhD,KAEFe,WAAS,EARX,UAUE,cAACC,EAAA,EAAD,UAAc,8BACd,eAACiC,GAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAKC,MAAM,SAASC,GAAI,EAAxB,UACE,cAACC,EAAA,EAAD,CAAY7B,QAAQ,YAApB,SACE,kGAEF,uBACA,cAAC6B,EAAA,EAAD,CAAY7B,QAAQ,YAApB,2HAKF,cAAC0B,EAAA,EAAD,CAAKC,MAAM,SAASC,GAAI,EAAxB,SACE,cAACC,EAAA,EAAD,CAAY7B,QAAQ,YAApB,+LAMF,cAACF,EAAA,EAAD,CACEC,MAAK,0CACLR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOiB,EACPW,WAAS,EACTC,KAAM,EACN5B,SAAU,SAACC,GAAD,OAAOgB,EAAahB,EAAEC,OAAOH,aAG3C,eAACW,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASvC,EAAjB,mBACA,cAACsC,EAAA,EAAD,CACEF,KAAK,SACLI,MAAM,YACNC,SAAUe,aAAkBb,KAAeG,EAAQW,SAHrD,4B,iFCvCJC,GACI,EADJA,GAEM,EAFNA,GAGK,EAGI,SAASC,GAAT,GAA4D,IAAzB7D,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QAC7D,EAAwBC,mBAASyD,IAAjC,mBAAOE,EAAP,KAAaC,EAAb,KACA,EAA8C5D,mBAAS,MAAvD,mBAAO6D,EAAP,KAAwBC,EAAxB,KACA,OACE,cAACnD,EAAA,EAAD,CAAYZ,QAASA,EAASF,KAAMA,EAAMe,QAAS,aAAUE,WAAS,EAAtE,SACG6C,IAASF,GACR,cAACM,GAAD,CACEhE,QAASA,EACTiE,WAAY,kBAAMJ,EAAQH,OAE1BE,IAASF,GACX,cAACQ,GAAD,CACED,WAAY,SAACE,GACXJ,EAAmBI,GACnBN,EAAQH,KAEV5D,KAAMA,EACNE,QAASA,IAGX,cAACoE,GAAD,CACED,QAASL,EACTO,OAAQ,WACNtE,EAAM+D,GACN9D,IACA6D,EAAQH,KAEVY,OAAQ,WACNT,EAAQH,SAQpB,SAASU,GAAT,GAA6D,IAA5BD,EAA2B,EAA3BA,QAASE,EAAkB,EAAlBA,OAAQC,EAAU,EAAVA,OAChD,EAAoCrE,oBAAS,GAA7C,mBAAOsE,EAAP,KAAmBC,EAAnB,KAYA,OAXAC,qBAAU,WACHF,GACHJ,EAAQO,SACLC,mBACAC,MAAK,kBAAMJ,GAAc,MACzBK,OAAM,SAACC,GACNC,QAAQC,MAAM,mBAAoBF,GAClCR,UAKN,qCACE,cAACtD,EAAA,EAAD,0CACA,cAACC,EAAA,EAAD,CAAeC,MAAO,CAAEC,WAAY,IAApC,SACE,sBAAKD,MAAO,CAAEE,QAAS,OAAQC,cAAe,UAA9C,UACE,cAACgC,EAAA,EAAD,CAAY4B,WAAW,iBAAvB,2GAIA,cAAC5B,EAAA,EAAD,UAAac,EAAQe,UAAUC,kBAGnC,eAAC9C,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAAS+B,EAAjC,kBAGA,cAAChC,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAAS8B,EAAQ5B,UAAW8B,EAApD,wBAQR,SAASP,GAAT,GAA2D,IAAxBC,EAAuB,EAAvBA,WAAYjE,EAAW,EAAXA,QAC7C,OACE,qCACE,cAACgB,EAAA,EAAD,kCACA,cAACC,EAAA,EAAD,CAAeC,MAAO,CAAEC,WAAY,IAApC,SACE,qBACED,MAAO,CACLE,QAAS,OACTC,cAAe,UAHnB,SAME,+HAMJ,eAACgB,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAASvC,EAAjC,oBAGA,cAACsC,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAAS0B,EAAjC,4BAQR,SAASC,GAAT,GAAwD,IAA9BD,EAA6B,EAA7BA,WAAYjE,EAAiB,EAAjBA,QAASF,EAAQ,EAARA,KAC7C,EAA0CG,mBACxCmF,KAAuBC,WADzB,mBAAOC,EAAP,KAAsBC,EAAtB,KAGQC,EAAoBC,eAApBD,gBACR,EAAgCvF,mBAAS,MAAzC,mBAAOyF,EAAP,KAAiBC,EAAjB,KAyCA,OA/BAlB,qBAAU,WACR,GAAI3E,EAAM,CACR,IAAM8F,EAAK,yCAAG,mCAAAC,EAAA,yDACRH,EAAW,GACXJ,IAAkBF,KAAuBC,UAFjC,wBAGNX,EAAW,IAAIoB,KAAqB,CACtCC,eAAgBC,aAAiBV,KAJzB,KAMVI,EANU,SAMUhB,EAASuB,OANnB,wBAMDC,KANC,wCAQVP,EAAY,MAEHQ,EAAI,EAVH,aAUMA,EAAI,IAVV,wBAWJzB,EAAW,IAAIoB,KAAqB,CACtCC,eAAgBC,aAAiBV,GACjCnB,QAASgC,IAbH,KAeRT,EAfQ,UAeYhB,EAASuB,OAfrB,yBAeCC,KAfD,wBAUcC,GAAK,EAVnB,wBAkBZR,EAAYD,GAlBA,4CAAH,qDAoBXE,IAAQf,OAAM,SAACC,GACbC,QAAQqB,IAAR,4DAAiEtB,IAC7DA,GAA0B,QAAnBA,EAAIuB,YACbb,EAAgB,uBAAwB,CAAEhE,QAAS,UAErDxB,UAGH,CAACsF,EAAeE,EAAiB1F,EAAME,IAExC,cAACsG,GAAA,EAAD,CAAMC,UAAW,EAAjB,SACgB,OAAbb,EACC,sBAAKxE,MAAO,CAAEsF,QAAS,QAAvB,UACE,cAACnD,EAAA,EAAD,CAAYF,MAAM,SAAlB,wDAGA,cAACsD,GAAA,EAAD,CACEvF,MAAO,CACLE,QAAS,QACTsF,WAAY,OACZC,YAAa,aAKnB,cAAC,KAAD,CACEC,UAAU,EACVrE,QA1DQ,SAACmC,GACfT,EAAW,CACTS,WACAQ,UAAWR,EAASmC,OACpBd,eAAgBrB,EAASqB,eACzB5B,QAASO,EAASP,QAClB2C,OAAQpC,EAASoC,UAqDbpB,SAAUA,EACVH,iBAAkBA,EAClBD,cAAeA,M,cC7LV,SAASyB,KACtB,OACE,eAACrH,EAAA,EAAD,CAASwB,MAAO,CAAE8F,OAAQ,GAAIC,MAAO,GAAIxF,QAAS,GAAK9B,QAAQ,YAA/D,UACE,sBAAMuH,KAAK,OAAOtH,EAAE,kBACpB,sBAAMA,EAAE,uhB,eCLRuH,GAA0BC,wBAAc,IAEjCC,GAA2B,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACzC,EAAgDrH,mBAAS,IAAzD,mBAAOsH,EAAP,KAAyBC,EAAzB,KAkBA,OAhBA/C,qBAAU,WACR,IAAMgD,EAAyB,WAC7BC,OAAOC,QAAQC,MAAMC,IAAI,oBAAoB,SAACC,GAC5CN,EAAoBM,EAAOP,kBAAoB,QAG7CQ,EAAW,SAACC,GACZ,qBAAsBA,GACxBP,KAKJ,OAFAA,IACAC,OAAOC,QAAQC,MAAMK,UAAUC,YAAYH,GACpC,kBAAML,OAAOC,QAAQC,MAAMK,UAAUE,eAAeJ,MAC1D,IAGD,cAACZ,GAAwBiB,SAAzB,CAAkC1G,MAAO6F,EAAzC,SACGD,KAKMe,GAAsB,kBAAMC,qBAAWnB,KC5B9CoB,GAAcnB,wBAAc,CAAC,SAAU,eAEhCoB,GAAe,SAAC,GAAkB,IAAhBlB,EAAe,EAAfA,SAC7B,EAAwBrH,mBAAS,UAAjC,mBAAOwI,EAAP,KAAaC,EAAb,KAEA,OACE,cAACH,GAAYH,SAAb,CAAsB1G,MAAO,CAAC+G,EAAMC,GAApC,SACGpB,KAKMqB,GAAU,kBAAML,qBAAWC,K,oBCNzB,SAASK,GAAT,GAA2D,IAAzB9I,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QAC5D,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA4BF,mBAAS,IAArC,mBAAO4I,EAAP,KAAeC,EAAf,KAEA,OACE,eAAClI,EAAA,EAAD,CACEd,KAAMA,EACNe,QAAS,WACPV,EAAQ,IACR2I,EAAU,KAEZ9I,QAASA,EACTc,SAAU,kBAAMf,EAAM,CAAEG,OAAM2I,YAC9B9H,WAAS,EARX,UAUE,cAACC,EAAA,EAAD,iCACA,cAACC,EAAA,EAAD,CAAeC,MAAO,CAAEC,WAAY,IAApC,SACE,sBACED,MAAO,CACLE,QAAS,OACTC,cAAe,UAHnB,UAME,cAACC,EAAA,EAAD,CACEC,MAAM,OACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOxB,EACPyB,SAAU,SAACC,GAAD,OAAOzB,EAAQyB,EAAEC,OAAOH,MAAMI,WAE1C,cAACR,EAAA,EAAD,CACEC,MAAM,MACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOmH,EACPlH,SAAU,SAACC,GAAD,OAAOkH,EAAUlH,EAAEC,OAAOH,MAAMI,gBAIhD,eAACO,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASvC,EAAjB,mBACA,cAACsC,EAAA,EAAD,CAAQF,KAAK,SAASI,MAAM,UAA5B,uBCJR,IAAMuG,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,QAAQ,aACNC,SAAU,EACVC,cAAeH,EAAMI,QAAQ,IAC5BJ,EAAMK,YAAYC,GAAGN,EAAMO,KAAO,CACjCrI,WAAY8H,EAAMI,QAAQ,GAC1BI,YAAaR,EAAMI,QAAQ,GAC3BK,aAAcT,EAAMI,QAAQ,KAGhCM,MAAO,CACLR,SAAU,GAEZS,OAAQ,CACNlD,WAAYuC,EAAMI,QAAQ,IAE5BQ,aAAc,CACZC,SAAU,IAEZC,MAAO,CACLC,gBAAiBf,EAAMgB,QAAQC,QAAQC,KACvC3H,MAAOyG,EAAMgB,QAAQG,KAAKD,KAC1BnD,OAAQ,GACRC,MAAO,QAII,SAASoD,GAAT,GAAwC,IAAb/C,EAAY,EAAZA,SAClCgD,EAAUvB,KACVwB,EAAmBC,cACzB,OACE,qCAEI,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,WAAxB,SACE,cAACzH,EAAA,EAAD,CAAK0H,EAAG,EAAR,SACE,cAACC,GAAD,QAGN,sBAAMC,UAAWR,EAAQpB,QAAzB,SAAmC5B,KACjCiD,GAAoB,cAACQ,GAAD,OAK5B,SAASF,KACP,IAAMN,EAAmBC,cACzB,EAAe7B,KAARF,EAAP,oBAEA,GAAIuC,IACF,OAAO,KAGT,IAAIC,EAAW,GAef,MAda,WAATxC,EACFwC,EAAW,CACTC,KAAe,cAACC,GAAD,IACf,cAACC,GAAD,IACA,cAACC,GAAD,KAEgB,gBAAT5C,IACTwC,EAAW,CAAC,cAACK,GAAD,MAGVJ,KAAeX,GACjBU,EAAS/E,KAAK,cAACqF,GAAD,KAGTN,EAGT,SAASM,KAKP,OACE,cAACC,EAAA,EAAD,CAAS7B,MAAM,cAAf,SACE,cAAC8B,EAAA,EAAD,CAAYjJ,MAAM,UAAUD,QANhB,WACdmJ,OAAO5L,KAAK4H,OAAOiE,UAAUC,OAAO,cAAe,WAKjD,SACE,cAACC,GAAA,EAAD,QAMR,SAASP,KACP,IAAMhB,EAAUvB,KACVL,EAAUC,KAAU,GACpBpG,EAAU,kBAAMmG,EAAQ,WAE9B,OACE,qCACE,cAACoD,EAAA,EAAD,CAAQC,MAAI,EAAZ,SACE,cAACP,EAAA,EAAD,CAAS7B,MAAM,kBAAf,SACE,cAAC8B,EAAA,EAAD,CAAYjJ,MAAM,UAAUD,QAASA,EAArC,SACE,cAACyJ,GAAA,EAAD,UAIN,cAACF,EAAA,EAAD,CAAQG,QAAM,EAAd,SACE,cAAC3J,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAASA,EAASuI,UAAWR,EAAQV,OAA7D,yBAQR,SAASuB,KACP,IAAMb,EAAUvB,KACVL,EAAUC,KAAU,GACpBpG,EAAU,kBAAMmG,EAAQ,gBACxBnB,EAAmBc,KAEnB6D,EAAmBC,OAAOC,KAAK7E,GAAkB8E,OAEvD,OACE,qCACE,cAACP,EAAA,EAAD,CAAQC,MAAI,EAAZ,SACE,cAACP,EAAA,EAAD,CAAS7B,MAAM,qBAAf,SACE,cAAC8B,EAAA,EAAD,CAAYjJ,MAAM,UAAUD,QAASA,EAArC,SACE,cAAC+J,GAAA,EAAD,CACEC,aAAcL,EACd5B,QAAS,CAAEP,MAAOO,EAAQP,OAF5B,SAIE,cAAChD,GAAD,YAKR,cAAC+E,EAAA,EAAD,CAAQG,QAAM,EAAd,SACE,cAACK,GAAA,EAAD,CACEC,aAAcL,EACd5B,QAAS,CAAEP,MAAOO,EAAQP,OAF5B,SAIE,cAACzH,EAAA,EAAD,CAAQE,MAAM,UAAUD,QAASA,EAASuI,UAAWR,EAAQV,OAA7D,gCASV,SAASyB,KAAmB,IAAD,EACzB,EAAkCmB,cAA1BC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,YACZC,EAAUC,mBAAQ,kBAAMC,YAAmBJ,KAAW,CAACA,IAC7D,EAAgCxM,mBAAS,MAAzC,mBAAO6M,EAAP,KAAiBC,EAAjB,KACA,EAAqD9M,oBAAS,GAA9D,mBAAO+M,EAAP,KAA6BC,EAA7B,KACM3C,EAAUvB,KAEhB,OACE,qCACE,cAACH,GAAD,CACE9I,KAAMkN,EACNhN,QAAS,kBAAMiN,GAAqB,IACpClN,MAAO,YAAuB,IAApBG,EAAmB,EAAnBA,KAAM2I,EAAa,EAAbA,OACdqE,YAAiBhN,EAAM2I,GACvBoE,GAAqB,MAGzB,cAACnB,EAAA,EAAD,CAAQG,QAAM,EAAd,SACE,eAAC3J,EAAA,EAAD,CACEE,MAAM,UACNhB,QAAQ,WACRe,QAAS,SAACX,GAAD,OAAOmL,EAAYnL,EAAEC,SAC9BiJ,UAAWR,EAAQV,OAJrB,uCAMY+C,QANZ,IAMYA,OANZ,EAMYA,EAASpL,aANrB,QAM8B,eAGhC,cAACuK,EAAA,EAAD,CAAQC,MAAI,EAAZ,SACE,cAACP,EAAA,EAAD,CAAS7B,MAAM,iBAAiBwD,OAAK,EAArC,SACE,cAAC1B,EAAA,EAAD,CAAYjJ,MAAM,UAAUD,QAAS,SAACX,GAAD,OAAOmL,EAAYnL,EAAEC,SAA1D,SACE,cAACpC,EAAD,UAIN,eAAC2N,EAAA,EAAD,CACEN,SAAUA,EACVhN,OAAQgN,EACR9M,QAAS,kBAAM+M,EAAY,OAC3BM,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,mBAAoB,KARtB,UAUGC,cAAcC,KAAI,SAACf,GAAD,OACjB,eAACgB,EAAA,EAAD,CAEEpL,QAAS,WACPwK,EAAY,MACZL,EAAYC,EAAQ9D,SAEtB+E,SAAUjB,EAAQ9D,SAAW4D,EAN/B,UAQE,cAACoB,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACG8C,EAAQ9D,SAAW4D,EAClB,cAAC,IAAD,CAAWqB,SAAS,UAClB,OAEY,wBAAjBnB,EAAQzM,KACL,sBACAyM,EAAQ9D,SAdP8D,EAAQ9D,WAiBjB,eAAC8E,EAAA,EAAD,CACEpL,QAAS,WACP0K,GAAqB,IAFzB,UAKE,cAACY,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,eAChCkE,cACG,uBACA,+BAOd,SAAS3C,KACP,MAOI4C,cANFtI,EADF,EACEA,SACAuI,EAFF,EAEEA,gBACAC,EAHF,EAGEA,sBACAC,EAJF,EAIEA,yBACAC,EALF,EAKEA,kBACAC,EANF,EAMEA,WAEF,EAAgCpO,mBAAS,MAAzC,mBAAO6M,EAAP,KAAiBC,EAAjB,KACA,EAA4C9M,oBAAS,GAArD,mBAAOqO,EAAP,KAAuBC,EAAvB,KACA,EAGItO,oBAAS,GAHb,mBACEuO,EADF,KAEEC,EAFF,KAIA,EAAoDxO,oBAAS,GAA7D,mBAAOyO,EAAP,KAA2BC,EAA3B,KACA,EAAoD1O,oBAAS,GAA7D,mBAAO2O,EAAP,KAA2BC,EAA3B,KACMvE,EAAUvB,KAEhB,OAAwB,IAApBrD,EAAS2G,OACJ,KAGP,qCACE,cAAC1I,GAAD,CACE7D,KAAM0O,EACNxO,QAAS,kBAAMyO,GAA+B,IAC9C1O,MAAO,YAAqD,IAAlDmF,EAAiD,EAAjDA,UAAWa,EAAsC,EAAtCA,eAAgB5B,EAAsB,EAAtBA,QAAS2C,EAAa,EAAbA,OAC5CqH,EAAyB,CACvBjO,KAAM,kBACNgF,YACA1E,gBAAiB0E,EAAUC,WAC3B2J,QAAQ,EACR/I,iBACA5B,UACA2C,WAEFsH,EAAkB,CAChBW,iBAAarO,EACbsO,eAAgB9J,EAAUC,WAC1B2J,QAAQ,EACR/I,iBACA5B,UACA2C,cAIN,cAACjH,GAAD,CACEC,KAAMwO,EACNtO,QAAS,kBAAMuO,GAAkB,IACjCxO,MAAO,YAAgC,IAA7BG,EAA4B,EAA5BA,KAAMM,EAAsB,EAAtBA,gBACd6N,EAAW,CAAEnO,OAAMM,oBACnB4N,EAAkB,CAChBW,YAAavO,OAAkBE,EAAYuN,EAAgB5B,OAC3D2C,eAAgBxO,EACZA,EAAgB0E,UAAUC,gBAC1BzE,EACJoO,QAAQ,IAEVP,GAAkB,MAGtB,cAAC,KAAD,CACEzO,KAAM8O,EACN5O,QAAS,kBAAM6O,GAAsB,MAEvC,cAACnM,GAAD,CACE5C,KAAM4O,EACN1O,QAAS,kBAAM2O,GAAsB,MAEvC,cAAC7C,EAAA,EAAD,CAAQG,QAAM,EAAd,SACE,cAAC3J,EAAA,EAAD,CACEd,QAAQ,YACRgB,MAAM,UACND,QAAS,SAACX,GAAD,OAAOmL,EAAYnL,EAAEC,SAC9BiJ,UAAWR,EAAQV,OAJrB,uBASF,cAACkC,EAAA,EAAD,CAAQC,MAAI,EAAZ,SACE,cAACP,EAAA,EAAD,CAAS7B,MAAM,iBAAiBwD,OAAK,EAArC,SACE,cAAC1B,EAAA,EAAD,CAAYjJ,MAAM,UAAUD,QAAS,SAACX,GAAD,OAAOmL,EAAYnL,EAAEC,SAA1D,SACE,cAAC,IAAD,UAIN,eAACuL,EAAA,EAAD,CACEN,SAAUA,EACVhN,OAAQgN,EACR9M,QAAS,kBAAM+M,EAAY,OAC3BM,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,mBAAoB,KARtB,UAUG9H,EAASgI,KAAI,SAACvJ,GAAD,OACZ,cAAC8K,GAAD,CACE9K,QAASA,EACTmG,QAASA,EACTyC,YAAaA,EACbqB,kBAAmBA,OAGtBF,GACC,qCACE,cAACgB,EAAA,EAAD,IACA,cAACD,GAAD,CACE9K,QAAS+J,EACT5D,QAASA,EACTyC,YAAaA,EACbqB,kBAAmBA,OAIzB,cAACc,EAAA,EAAD,IACA,eAACvB,EAAA,EAAD,CAAUpL,QAAS,kBAAMkM,GAA+B,IAAxD,UACE,cAACZ,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACE,cAAC,IAAD,CAASiE,SAAS,YAFtB,4BAMA,eAACH,EAAA,EAAD,CACEpL,QAAS,WACPwK,EAAY,MACZwB,GAAkB,IAHtB,UAME,cAACV,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACE,cAAC,IAAD,CAASiE,SAAS,YAPtB,iBAWA,eAACH,EAAA,EAAD,CACEpL,QAAS,WACPwK,EAAY,MACZ8B,GAAsB,IAH1B,UAME,cAAChB,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACE,cAAC,IAAD,CAAkBiE,SAAS,YAP/B,qBAWA,eAACH,EAAA,EAAD,CACEpL,QAAS,WACPwK,EAAY,MACZ4B,GAAsB,IAH1B,UAME,cAACd,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACE,cAAC,IAAD,CAAWiE,SAAS,YAErB,qCAOX,IAAMqB,GAAkBnG,aAAW,SAACC,GAAD,MAAY,CAC7CmG,OAAQ,CACNhO,QAAS,OACTiO,eAAgB,WAChB5N,OAAQwH,EAAMI,QAAQ,QAI1B,SAAS0B,KACP,IAAMT,EAAU6E,KAChB,OACE,wBAAQrE,UAAWR,EAAQ8E,OAA3B,SACE,cAAC9M,EAAA,EAAD,CACEd,QAAQ,WACRgB,MAAM,UACN8M,UAAU,IACVzN,OAAO,SACP0N,IAAI,WACJC,KAAK,uDACLC,UAAW,cAAC,IAAD,IAPb,2BAeN,SAASR,GAAT,GAAgF,IAArD9K,EAAoD,EAApDA,QAASmG,EAA2C,EAA3CA,QAASyC,EAAkC,EAAlCA,YAAaqB,EAAqB,EAArBA,kBACxD,OACE,eAACT,EAAA,EAAD,CAEEpL,QAAS,WACPwK,EAAY,MACZqB,EAAkBjK,EAAQuL,WAE5B9B,SAAUzJ,EAAQwL,WAClBL,UAAU,MAPZ,UASE,cAACzB,EAAA,EAAD,CAAc/C,UAAWR,EAAQT,aAAjC,SACG1F,EAAQwL,WAAa,cAAC,IAAD,CAAW7B,SAAS,UAAa,OAEzD,sBAAK5M,MAAO,CAAEE,QAAS,OAAQC,cAAe,UAA9C,UACE,cAACgC,EAAA,EAAD,UAAac,EAAQjE,OACrB,cAACmD,EAAA,EAAD,CAAYb,MAAM,gBAAlB,SACG2B,EAAQyL,QAAQC,kBAdhB1L,EAAQyL,QAAQC,Y,yBCpcrB9G,GAAYC,aAAW,SAACC,GAAD,YAAY,CACvCyB,WAAS,mBACNzB,EAAMK,YAAYwG,KAAK7G,EAAMO,KAAO,CACnChD,QAAS,IAFJ,cAINyC,EAAMK,YAAYC,GAAGN,EAAMO,KAAO,CACjCzG,SAAU,OALL,GAQTgN,kBAAkB,eACf9G,EAAMK,YAAYwG,KAAK7G,EAAMO,KAAO,CACnCwG,aAAc,SAKL,SAASC,KACtB,IAAM3F,EAAUvB,KACVwB,EAAmBC,cACzB,OACE,cAAC0F,GAAA,EAAD,CACEC,OAAK,EAACpN,SAAS,KACf+H,UAAWR,EAAQI,UAFrB,SAIE,cAACD,EAAA,EAAD,CAAMC,WAAS,EAACrB,QAASkB,EAAmB,EAAI,EAAhD,SACE,cAACE,EAAA,EAAD,CAAM2F,MAAI,EAACC,GAAI,GAAIvF,UAAWR,EAAQyF,kBAAtC,SACE,cAACO,GAAA,EAAD,CAAcpP,MAAM,2B,yKCfxBqP,GAA2B,IAAIC,aACnC,gDAEIC,GAAwB,IAAID,aAChC,+CAGIE,GAAmB,IAAIF,aAC3B,gDAEIG,GAAsB,IAAIH,aAC9B,gDAGII,GAAc,GAChBC,GAAwB,KAGfC,GAAa,yCAAG,WAAOC,EAAwBC,EAAgBC,GAA/C,0BAAApL,EAAA,yDAGvB,QADEqL,EAAqBC,WAAQC,KAAKH,UACpC,IAACC,KAAoBG,cAAgB,OAACH,QAAD,IAACA,KAAoBI,YAHnC,iDAQrBpM,EAAY8L,EAAO9L,UAGnBmM,EAAsB,GACnBE,EAAI,EAZc,YAYXA,EAAIL,EAAmBG,aAAahF,QAZzB,wBAarBmF,EAAyBN,EAAmBG,aAAaE,GAbpC,UAcCE,GACxBV,EACA7L,EAFqC,OAGrCgM,QAHqC,IAGrCA,OAHqC,EAGrCA,EAAoBI,YACpBE,EACAN,EACAK,GApBuB,QAcnBG,EAdmB,OAsBzBL,EAAanL,KAAb,6BACKwL,GADL,IAEEC,QAAO,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAwBI,QAxBV,QAYiCL,IAZjC,gDA2BpBF,GA3BoB,4CAAH,0DA8BpBI,GAAa,yCAAG,WACpBV,EACA7L,EACAoM,EACAI,EACAR,EACAW,GANoB,0BAAAhM,EAAA,yDASG,OAAV,OAAX6L,QAAW,IAAXA,OAAA,EAAAA,EAAaE,OACb,OAACF,QAAD,IAACA,KAAahM,UACd,OAACgM,QAAD,IAACA,KAAaI,eAXI,oDAiBdC,EAAUC,KAAKC,OAAOP,EAAYE,MAElCM,EAAYC,GAChB,CAACT,EAAYI,gBACbR,EACA,GAtBkB,yCAyBX,MAzBW,oBA6BdY,EAAUE,OAAOC,iBAAcH,WA7BjB,wBA8BhBnN,QAAQqB,IAAI,IAAMyL,EAAQ,mCA9BV,kBA+BTS,GAAwBpN,EAAWwM,EAAaJ,IA/BvC,YAgCPY,EAAUE,OAAOG,gBAAaL,WAhCvB,wBAiChBnN,QAAQqB,IAAI,IAAMyL,EAAQ,kCAjCV,kBAkCTW,GAAuBtN,EAAWwM,EAAaJ,IAlCtC,YAmCPY,EAAUE,OAAOK,MAnCV,wBAoChB1N,QAAQqB,IAAI,IAAMyL,EAAQ,kCApCV,kBAqCTa,GAAuBxN,EAAWwM,EAAaJ,IArCtC,YAuChBqB,WAAQC,MACN,SAACC,GAAD,OAAYA,EAAOX,WAAaW,EAAOX,UAAUE,OAAOF,MAxC1C,wBA2ChBnN,QAAQqB,IAAI,IAAMyL,EAAQ,gCACtBiB,EAAqBC,6BAAkBhB,GA5C3B,UA6CHiB,GACXjC,EACAW,EACAJ,EACAwB,GAjDc,qDAmDPZ,EAAUE,OAAO7B,IAnDV,wBAoDhBxL,QAAQqB,IAAI,IAAMyL,EAAQ,0CAEpBiB,EAAqBG,GAAuBlB,GAtDlC,UAuDHmB,GACXnC,EACAW,EACAJ,EACAwB,GA3Dc,qDA6DPZ,EAAUE,OAAO3B,IA7DV,wBA8DhB1L,QAAQqB,IAAI,IAAMyL,EAAQ,uCAEpBiB,EAAqBK,GAAoBpB,GAhE/B,UAiEHqB,GACXrC,EACAW,EACAJ,EACAwB,GArEc,qDAuEPZ,EAAUE,OAAO1B,MAAqBwB,EAAUE,OAAOzB,IAvEhD,wBAwEhB5L,QAAQqB,IAAI,IAAMyL,EAAQ,0CAEtBiB,EAAqBO,GAAuBtB,GA1EhC,UA2EHuB,GACXvC,EACAW,EACAJ,EACAwB,GA/Ec,0EAkFT,CACL1Q,KAAM,UACNmR,aAAc7B,EAAYhM,SAASgI,KAAI,SAACmE,GAAD,MAAY,CACjD3M,UAAWoM,EAAYO,GACvB2B,WAAYtC,EAAmBuC,kBAAkB5B,OAEnDK,cAxFc,0DA4FlBnN,QAAQqB,IAAR,+CA5FkB,eAgGpBrB,QAAQqB,IAAI,IAAMyL,EAAQ,mBAAqB6B,KAAKC,UAAU5B,IAhG1C,6EAAH,gEAqGbuB,GAAsB,yCAAG,WAC7BvC,EACAW,EACAJ,EACAwB,GAJ6B,UAAAjN,EAAA,+EAOtB,CACLzD,KAAM,UARqB,2CAAH,4DAYtB8Q,GAAyB,yCAAG,WAChCnC,EACAW,EACAJ,EACAwB,GAJgC,UAAAjN,EAAA,+EAOzB,CACLzD,KAAM,YARwB,2CAAH,4DAYzBgR,GAAsB,yCAAG,WAC7BrC,EACAW,EACAJ,EACAwB,GAJ6B,UAAAjN,EAAA,+EAOtB,CACLzD,KAAM,YARqB,2CAAH,4DAYtBiR,GAAyB,aAKzBJ,GAAyB,aAKzBE,GAAsB,aAKtBH,GAAoB,yCAAG,WAC3BjC,EACAW,EACAJ,EACAwB,GAJ2B,wCAAAjN,EAAA,yDAMtBiN,KAAsB3G,OAAOC,KAAK0G,GAAoBzG,OAAS,GANzC,oDAUnB3G,EAA6BgM,EAA7BhM,SAAUoM,EAAmBJ,EAAnBI,eAGZ8B,EACJtC,GACAqB,WAAQkB,MACN,SAAChB,GAAD,OACEvB,EAAYwC,WAAU,SAACC,GAAD,OACpBA,EAAW3B,OAAOS,EAAOjD,aACtB,KAnBgB,SAyBnBoE,GACM,OAAVJ,QAAU,IAAVA,OAAA,EAAAA,EAAYhE,UAAWuC,GAAkBzM,EAAU4L,EAAa,GAClE2C,GACY,OAAVL,QAAU,IAAVA,OAAA,EAAAA,EAAY1B,YACZC,GAAkB,CAACL,GAAiBR,EAAa,GAC7C4C,EAAaF,EAAcnE,WAC3BsE,GAAM,IAAIC,MAAOC,UAGnBtD,IAAeF,IACfqD,KAActD,IACduD,EAAMvD,GAAYsD,GAAYI,GA5NhB,KAwLO,wBAuCvBzD,GAAwBE,EACxBhM,QAAQqB,IAAI,iBAAkB8N,GAxCP,UA0CPK,UAAOC,KACnBzD,EACAiD,EACA,GACAC,GA9CmB,yBAgDjBE,EAPNvD,GAAYsD,GAzCW,CA0CrBrB,OA1CqB,KAgDrByB,GAhDqB,cAmDzBzB,EAASjC,GAAYsD,GAAYrB,OAnDR,kDAqDzB9N,QAAQqB,IAAI,yBAA2B,KAAE6K,SArDhB,WAyDrB7O,EAAO+J,OAAOC,KAAK0G,GAAoB,GACzClB,EAAOkB,EAAmB1Q,GACjB,gBAATA,EA3DuB,oBA4DnBqS,EAAkBC,GAAmBhP,EAAU4L,GA5D5B,mDAgEvBM,EAAI,6BAAQA,GAAS6C,GAhEE,gCAkEP,aAATrS,GACHuS,EAAeC,GAAgBlP,EAAU4L,GAC/CM,EAAI,6BAAQA,GAAS+C,IACH,eAATvS,IACHuS,EAAeE,GAAkBnP,EAAU4L,GACjDM,EAAI,6BAAQA,GAAS+C,IAvEI,iCAyEpB,CACLvS,OACAwP,OACAiB,SACAe,eA7EyB,0DAAH,4DAiFpBtB,GAA0B,SAACpN,EAAWwM,EAAaJ,GACvD,IAAQQ,EAAmCJ,EAAnCI,eAAgBpM,EAAmBgM,EAAnBhM,SAAUkM,EAASF,EAATE,KAClC,GAAKE,GAAmBpM,GAAakM,EAArC,CAKA,IASIG,EATE+C,EAAoB,CACxB5C,UAAWZ,EAAYQ,GACvB1F,KAAM1G,EAASgI,KAAI,SAACqH,GAAD,MAAmB,CACpCC,OAAQ1D,EAAYyD,OAEtBnD,KAAMI,KAAKC,OAAOL,IAKdxP,EAAO6S,qBAAkBC,sBAAsBJ,GACrD,OAAQ1S,GACN,IAAK,SACH2P,EAAUkD,qBAAkBE,oBAAoBL,GAChD,MACF,IAAK,iBACH/C,EAAUkD,qBAAkBG,qBAAqBN,GACjD,MACF,IAAK,WACH/C,EAAUkD,qBAAkBI,eAAeP,GAC3C,MACF,IAAK,mBACH/C,EAAUkD,qBAAkBK,uBAAuBR,GACnD,MACF,IAAK,SACH/C,EAAUkD,qBAAkBM,aAAaT,GACzC,MACF,IAAK,iBACH/C,EAAUkD,qBAAkBO,qBAAqBV,GACjD,MACF,IAAK,WACH/C,EAAUkD,qBAAkBQ,eAAeX,GAC3C,MACF,IAAK,sBACH/C,EAAUkD,qBAAkBS,mBAAmBZ,GAC/C,MACF,IAAK,uBACH/C,EAAUkD,qBAAkBU,oBAAoBb,GAChD,MACF,IAAK,yBACH/C,EAAUkD,qBAAkBW,sBAAsBd,GAClD,MACF,IAAK,wBACH/C,EAAUkD,qBAAkBY,qBAAqBf,GACjD,MACF,QACE,OAGJ,GACG/C,KACAA,EAAQ+D,YAAe5Q,EAAUkN,OAAOL,EAAQ+D,aAKnD,MAAO,CACL1T,KAAM,SAAWA,EACjBwP,KAAMG,KAIJS,GAAyB,SAACtN,EAAWwM,EAAaJ,GACtD,IAAQQ,EAAmCJ,EAAnCI,eAAgBpM,EAAmBgM,EAAnBhM,SAAUkM,EAASF,EAATE,KAClC,GAAKE,GAAmBpM,GAAakM,EAArC,CAKA,IAQIG,EAREgE,EAAmB,CACvB7D,UAAWZ,EAAYQ,GACvB1F,KAAM1G,EAASgI,KAAI,SAACqH,GAAD,MAAmB,CACpCC,OAAQ1D,EAAYyD,OAEtBnD,KAAMI,KAAKC,OAAOL,IAIdxP,EAAO4T,oBAAiBd,sBAAsBa,GACpD,OAAQ3T,GACN,IAAK,oBACH2P,EAAUiE,oBAAiBC,wBAAwBF,GACnD,MACF,IAAK,YACHhE,EAAUiE,oBAAiBE,gBAAgBH,GAC3C,MACF,IAAK,aACHhE,EAAUiE,oBAAiBG,iBAAiBJ,GAC5C,MACF,IAAK,WACHhE,EAAUiE,oBAAiBI,eAAeL,GAC1C,MACF,IAAK,aAGH,IAAMM,GAFNtE,EAAUiE,oBAAiBM,iBAAiBP,IAErBM,OACnBA,GAAmC,IAAzBA,EAAOE,eAAwC,IAAjBF,EAAOG,OAAeH,EAAOI,UAAUrE,OAAO5B,aAAUkG,SAClG3E,EAAQsE,OAAS,WAGjBtE,EAAQsE,OAAR,yBAAmCA,EAAOE,cAA1C,wBAAuEF,EAAOG,MAA9E,wBAAmGH,EAAOI,UAAU5G,YAGtHkC,EAAQ4E,iBAAmB5E,EAAQ6E,WAAWC,OAC9C9E,EAAQ+E,qBAAuB/E,EAAQ6E,WAAWG,kBAC3ChF,EAAQ6E,WACf,MACF,IAAK,QACH7E,EAAUiE,oBAAiBgB,YAAYjB,GACvC,MACF,IAAK,WACHhE,EAAUiE,oBAAiBiB,eAAelB,GAC1C,MACF,QACE,OAGJ,GACGhE,KACAA,EAAQ+D,YAAe5Q,EAAUkN,OAAOL,EAAQ+D,aAKnD,MAAO,CACL1T,KAAM,QAAUA,EAChBwP,KAAMG,KAIJW,GAAyB,SAC7BxN,EACAwM,EACAJ,GAEA,IAAQQ,EAAmCJ,EAAnCI,eAAgBpM,EAAmBgM,EAAnBhM,SAAUkM,EAASF,EAATE,KAClC,GAAKE,GAAmBpM,GAAakM,EAArC,CAKA,IAAMsF,EAAmB,CACvBhF,UAAWZ,EAAYQ,GACvB1F,KAAM1G,EAASgI,KAAI,SAACqH,GAAD,MAAmB,CACpCC,OAAQ1D,EAAYyD,OAEtBnD,KAAMI,KAAKC,OAAOL,IAGhBG,EAAUoF,kCAAuBD,GAErC,MAAO,CACL9U,KAAM2P,EAAQ3P,KACdwP,KAAMG,EAAQqF,UAIZxC,GAAkB,SAAClP,EAAU4L,GAWjC,MAAO,CAAE+F,iBAVgBlF,GACvBzM,EACA4L,EACAgG,gCAOyBC,YALPpF,GAClBzM,EACA4L,EACAkG,4BAKE3C,GAAoB,SAACnP,EAAU4L,GAWnC,MAAO,CAAE+F,iBAVgBlF,GACvBzM,EACA4L,EACAmG,mCAOyBF,YALPpF,GAClBzM,EACA4L,EACAoG,+BAKEhD,GAAqB,SAAChP,EAAU4L,GACpC,IAAMqG,EAAaxF,GACjBzM,EACA4L,EACAsG,mCAGIC,EAAc1F,GAClBzM,EACA4L,EACAwG,oCAGF,GAAKH,GAAeE,EAIpB,MAAO,CAAEF,aAAYE,gBAGjB1F,GAAoB,SAACzM,EAAU4L,EAAayD,GAChD,IAAMlD,EAAQnM,EAAS2G,OAAS0I,GAAgBrP,EAASqP,GACzD,OAAkB,OAAXzD,QAAW,IAAXA,OAAA,EAAAA,EAAajF,QAASwF,GAASP,EAAYO,I,WC7frC,SAASkG,GAAT,GAMX,IALFxW,EAKC,EALDA,MACAG,EAIC,EAJDA,MAIC,IAHDsW,YAGC,SAFDzV,EAEC,EAFDA,QACA0V,EACC,EADDA,aAEA,OACE,eAAC5U,EAAA,EAAD,CAAY4U,aAAcA,EAA1B,UACG1W,EADH,IACW,IACRyW,EACC,cAACE,GAAA,EAAD,CAAM1I,KAAK,IAAIjN,QAASA,EAAxB,SACGb,IAGH,sBAAMR,MAAO,CAAEsB,MAAO,WAAtB,SAAoCd,OCd7B,SAASyW,GAAT,GAA+D,IAAD,IASlDvI,EATQ8B,EAA0C,EAA1CA,YAAa0G,EAA6B,EAA7BA,cAA6B,IAAdC,UAAc,SACrErH,EAASsH,cACP1G,EAA6BF,EAA7BE,KAAMiB,EAAuBnB,EAAvBmB,OAAQe,EAAelC,EAAfkC,WAChB2E,EACH3E,IACW,OAAVA,QAAU,IAAVA,OAAA,EAAAA,EAAY1T,OAAkB,OAAV0T,QAAU,IAAVA,KAAY4E,WAAa,gBAAkB,MADjE,OAEA3F,QAFA,IAEAA,GAFA,UAEAA,EAAQ4F,gBAFR,iBAEA,EAAkBC,kBAFlB,aAEA,EAA8B7I,aAC9B,UAOM8I,EAA6C/G,EAA7C+G,KAAMC,EAAuChH,EAAvCgH,WAAYC,EAA2BjH,EAA3BiH,UAAWtB,EAAgB3F,EAAhB2F,YAC/BuB,EAAcT,EAAKzG,EAAKmH,gBAAkBnH,EAAKkH,YACrD,OACE,qCACE,cAACzV,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,4BAOA,cAACF,GAAD,CACExW,MAAM,SACNG,MAAO6W,EACPP,MAAM,EACNzV,QAAS,0BACP6V,EAAa,WACA,OAAVxE,QAAU,IAAVA,OAAA,EAAAA,EAAYhE,WAAZ,OAAuBiD,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAQ4F,gBAA/B,aAAuB,EAAkBC,mBAD/B,aACX,EAAuD7I,eAI7D,cAACkI,GAAD,CACExW,MAAM,OACNG,MAAOiX,EAAKK,OAAO,GAAGC,cAAgBN,EAAKO,MAAM,KAEnD,cAACnB,GAAD,CACExW,MAAM,QACNG,OAAa,OAANmR,QAAM,IAANA,OAAA,EAAAA,EAAQsG,kBAAkBP,KAAe,GAAKA,IAEvD,cAACb,GAAD,CACExW,MAAM,WACNG,OAAa,OAANmR,QAAM,IAANA,OAAA,EAAAA,EAAQuG,qBAAqBN,KAAgB,GAAKA,IAE3D,cAACf,GAAD,CACExW,MAAM,OACNG,MAAOmX,EAAUG,OAAO,GAAGC,cAAgBJ,EAAUK,MAAM,KAE7D,cAACnB,GAAD,CACExW,MAAM,QACNyW,KAAMT,EACN7V,MAAO6V,GA7CY3H,EA6CkB2H,EA5CzBvG,EAAO9L,UAAUkN,OAAOxC,GACvB,eAAuB,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAASC,aAAc,WA2CA0H,EACpDa,cAAe,kBACbb,GAAea,EAAa,OAACb,QAAD,IAACA,OAAD,EAACA,EAAa1H,kBCzDrC,SAASwJ,GAAT,GAA6D,IAAD,EAA9B3H,EAA8B,EAA9BA,YAAa0G,EAAiB,EAAjBA,cACxD,OACE,qCACE,cAAC/U,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,kCAOA,cAACF,GAAD,CAEExW,MAAM,UACNG,MAAK,UAAEgQ,EAAYQ,iBAAd,aAAE,EAAuBrC,WAC9BmI,MAAM,EACNC,cAAc,EACd1V,QAAS,kBAAM6V,EAAc1G,EAAYQ,UAAUrC,cAL/C,WAOL6B,EAAY6B,cACX7B,EAAY6B,aAAa7F,KAAI,SAAC4L,EAAazH,GACzC,OACE,qCACE,cAACkG,GAAD,CAEExW,MAAO,aAAesQ,EAAQ,GAC9BnQ,MAAO4X,EAAYpU,UAAU2K,WAC7BmI,MAAM,EACNzV,QAAS,kBAAM6V,EAAckB,EAAYpU,UAAU2K,cAJ9CgC,EAAQ,IAMf,eAACxO,EAAA,EAAD,CAAY4U,cAAY,EAAxB,uBACaqB,EAAY9F,WAAWrO,oBAK5C,eAAC9B,EAAA,EAAD,CAAYnC,MAAO,CAAEqY,UAAW,aAAhC,mBACS7H,EAAYC,cCpC3B,IAAM6H,GAAc,CAClBC,uBAAwB,4BACxBC,eAAgB,kBAChBC,gBAAiB,mBACjBC,cAAe,iBACfC,gBAAiB,mBACjBC,WAAY,cACZC,cAAe,kBAGXC,GAAc,CAClBC,YAAa,CAAE1Y,MAAO,QAASqO,SAAS,GACxC+G,iBAAkB,CAAEpV,MAAO,oBAAqBqO,SAAS,GACzDkH,qBAAsB,CAAEvV,MAAO,wBAAyBqO,SAAS,GACjEyG,OAAQ,CAAE9U,MAAO,SAAUqO,SAAS,GACpCsK,iBAAkB,CAAE3Y,MAAO,aAAcqO,SAAS,GAClDuK,WAAY,CAAE5Y,MAAO,OAAQqO,SAAS,GACtCwK,eAAgB,CAAE7Y,MAAO,OAAQqO,SAAS,GAC1CyK,YAAa,CAAE9Y,MAAO,QAASqO,SAAS,GACxC0K,cAAe,CAAE/Y,MAAO,iBAAkBqO,SAAS,GACnD2K,cAAe,CAAEhZ,MAAO,iBAAkBqO,SAAS,GACnD4K,eAAgB,CAAEjZ,MAAO,kBAAmBqO,SAAS,GACrD6K,oBAAqB,CAAElZ,MAAO,iBAAkBqO,SAAS,GACzD8K,uBAAwB,CAAEnZ,MAAO,2BAA4BqO,SAAS,EAAO+K,UAAW,kBAAMjH,KAAKC,YACnGiH,gBAAiB,CAAErZ,MAAO,YAAaqO,SAAS,GAChDiL,iBAAkB,CAAEtZ,MAAO,WAAYqO,SAAS,GAChDkL,SAAU,CAAEvZ,MAAO,WAAYqO,SAAS,IAG3B,SAASoG,GAAT,GAA2D,IAA/BtE,EAA8B,EAA9BA,YAAa0G,EAAiB,EAAjBA,cAC9ChW,EAAesP,EAAftP,KAAMwP,EAASF,EAATE,KAEd,OACE,qCACE,cAACvO,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,SAKGuB,GAAYpX,KAEdwP,GACCzF,OAAO4O,QAAQnJ,GAAMlE,KAAI,YAAmB,IAAD,mBAAhBsN,EAAgB,KAAXtZ,EAAW,KACnCuZ,EAAYjB,GAAYgB,GAC9B,IAAKC,EACH,OAAO,KAET,IAAQ1Z,EAA8B0Z,EAA9B1Z,MAAOqO,EAAuBqL,EAAvBrL,QAAS+K,EAAcM,EAAdN,UACxB,OACE,cAAC5C,GAAD,CAEExW,MAAOA,EAAQ,GACfG,MAAOkO,EAAO,OAAGlO,QAAH,IAAGA,OAAH,EAAGA,EAAOmO,WAAc8K,EAAYA,EAAUjZ,GAASA,EACrEsW,KAAMpI,EACNrN,QAAS,kBAAMqN,GAAWwI,EAAa,OAAC1W,QAAD,IAACA,OAAD,EAACA,EAAOmO,cAJ1CmL,SClDnB,IAAMxB,GAAc,CAClB0B,aAAc,iBACdC,qBAAsB,2BACtBC,eAAgB,gBAGZpB,GAAc,CAClBqB,SAAU,CAAE9Z,MAAO,KAAMqO,SAAS,GAClC0L,cAAe,CAAE/Z,MAAO,UAAWqO,SAAS,GAC5C+H,WAAY,CAAEpW,MAAO,OAAQqO,SAAS,GACtC2L,KAAM,CAAEha,MAAO,OAAQqO,SAAS,GAChCyK,YAAa,CAAE9Y,MAAO,QAASqO,SAAS,GACxCsK,iBAAkB,CAAE3Y,MAAO,aAAcqO,SAAS,GAClD6K,oBAAqB,CAAElZ,MAAO,iBAAkBqO,SAAS,GACzD4L,iBAAkB,CAAEja,MAAO,cAAeqO,SAAS,GACnD6L,OAAQ,CAAEla,MAAO,SAAUqO,SAAS,GACpCkL,SAAU,CAAEvZ,MAAO,WAAYqO,SAAS,IAG3B,SAASqF,GAAT,GAA4D,IAA/BvD,EAA8B,EAA9BA,YAAa0G,EAAiB,EAAjBA,cAC/ChW,EAAesP,EAAftP,KAAMwP,EAASF,EAATE,KAEd,OACE,qCACE,cAACvO,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,SAKGuB,GAAYpX,KAEdwP,GACCzF,OAAO4O,QAAQnJ,GAAMlE,KAAI,YAAmB,IAAD,mBAAhBsN,EAAgB,KAAXtZ,EAAW,KACnCuZ,EAAYjB,GAAYgB,GAC9B,IAAKC,EACH,OAAO,KAET,IAAQ1Z,EAAmB0Z,EAAnB1Z,MAAOqO,EAAYqL,EAAZrL,QACf,OACE,cAACmI,GAAD,CAEExW,MAAOA,EAAQ,GACfG,MAAOkO,EAAO,OAAGlO,QAAH,IAAGA,OAAH,EAAGA,EAAOmO,WAAanO,EACrCsW,KAAMpI,EACNrN,QAAS,kBAAMqN,GAAWwI,EAAa,OAAC1W,QAAD,IAACA,OAAD,EAACA,EAAOmO,cAJ1CmL,SCvCnB,IAAMxB,GAAc,CAClBkC,YAAa,eACbC,SAAU,cACVC,YAAa,eACbC,YAAa,gBAGT7B,GAAc,CAClBrB,KAAM,CAAEpX,MAAO,OAAQqO,SAAS,GAChCkM,QAAS,CAAEva,MAAO,WAAYqO,SAAS,GACvCmM,MAAO,CAAExa,MAAO,QAASqO,SAAS,GAClC+H,WAAY,CAAEpW,MAAO,cAAeqO,SAAS,GAC7CiI,YAAa,CAAEtW,MAAO,eAAgBqO,SAAS,IAGlC,SAASoM,GAAT,GAAyD,IAAD,IAA9BtK,EAA8B,EAA9BA,YAAa0G,EAAiB,EAAjBA,cAC9CpH,EAASsH,cACf,EAAqB2D,cAAdC,EAAP,oBACQ9Z,EAAmCsP,EAAnCtP,KAAMwP,EAA6BF,EAA7BE,KAAMiB,EAAuBnB,EAAvBmB,OAAQe,EAAelC,EAAfkC,WAEtB2E,EACH3E,IACW,OAAVA,QAAU,IAAVA,OAAA,EAAAA,EAAY1T,OAAkB,OAAV0T,QAAU,IAAVA,KAAY4E,WAAa,gBAAkB,MADjE,OAEA3F,QAFA,IAEAA,GAFA,UAEAA,EAAQ4F,gBAFR,iBAEA,EAAkBC,kBAFlB,aAEA,EAA8B7I,aAC9B,UAEIsM,EAAkB,SAACvM,GACvB,IAAMwM,EAAUF,EAAWtJ,MAAK,SAACyJ,GAAD,OAAcA,EAASjK,OAAOxC,MAE9D,OADgBoB,EAAO9L,UAAUkN,OAAOxC,GAEpC,eACCwM,EAAU,WAAa,KAAxB,OAA8BxM,QAA9B,IAA8BA,OAA9B,EAA8BA,EAASC,aAG7C,OACE,qCACE,cAACxM,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,SAKGuB,GAAYpX,KAEf,cAAC2V,GAAD,CACExW,MAAM,SACNG,MAAO6W,EACPP,MAAM,EACNzV,QAAS,0BACP6V,EAAa,WACA,OAAVxE,QAAU,IAAVA,OAAA,EAAAA,EAAYhE,WAAZ,OAAuBiD,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAQ4F,gBAA/B,aAAuB,EAAkBC,mBAD/B,aACX,EAAuD7I,eAI5D+B,GACCzF,OAAO4O,QAAQnJ,GAAMlE,KAAI,YAAmB,IAAD,mBAAhBsN,EAAgB,KAAXtZ,EAAW,KACnCuZ,EAAYjB,GAAYgB,GAC9B,IAAKC,EACH,OAAO,KAET,IAAQ1Z,EAAmB0Z,EAAnB1Z,MAAOqO,EAAYqL,EAAZrL,QACf,OACE,cAACmI,GAAD,CAEExW,MAAOA,EAAQ,GACfG,MAAOkO,EAAUuM,EAAgBza,GAASA,EAAQ,GAClDsW,KAAMpI,EACNrN,QAAS,kBAAMqN,GAAWwI,EAAa,OAAC1W,QAAD,IAACA,OAAD,EAACA,EAAOmO,cAJ1CmL,SC7DnB,IAAMxB,GAAc,CAClB8C,eAAgB,kBAChBC,kBAAmB,qBACnBC,SAAU,WACVC,QAAS,UACTC,OAAQ,SACRC,OAAQ,UACRC,aAAc,iBAGV5C,GAAc,CAClByB,OAAQ,CAAEla,MAAO,SAAUqO,SAAS,EAAO+K,UAAW,SAACc,GAAD,OAAYA,EAAOtW,aACzE0X,cAAe,CAAEtb,MAAO,iBAAkBqO,SAAS,GACnDkN,iBAAkB,CAAEvb,MAAO,oBAAqBqO,SAAS,GACzDmN,SAAU,CAAExb,MAAO,WAAYqO,SAAS,GACxCoN,SAAU,CAAEzb,MAAO,WAAYqO,SAAS,GACxCqN,YAAa,CAAE1b,MAAO,cAAeqO,SAAS,GAC9CsN,KAAM,CAAE3b,MAAO,OAAQqO,SAAS,GAChCuN,cAAe,CAAE5b,MAAO,iBAAkBqO,SAAS,GACnDwN,aAAc,CAAE7b,MAAO,gBAAiBqO,SAAS,GACjDyN,MAAO,CAAE9b,MAAO,QAASqO,SAAS,GAClC0N,OAAQ,CAAE/b,MAAO,SAAUqO,SAAS,IAGvB,SAAS2N,GAAT,GAA2D,IAA/B7L,EAA8B,EAA9BA,YAAa0G,EAAiB,EAAjBA,cAChDpH,EAASsH,cACf,EAAqB2D,cAAdC,EAAP,oBACQ9Z,EAAesP,EAAftP,KAAMwP,EAASF,EAATE,KAERuK,EAAkB,SAACvM,GACvB,IAAM4N,EAAYC,eAAY5J,MAAK,SAAC6J,GAAD,OACjCA,EAAM9N,QAAQwC,OAAOxC,MAEjBwM,EAAUF,EAAWtJ,MAAK,SAACyJ,GAAD,OAAcA,EAASjK,OAAOxC,MACxD+N,EAAU3M,EAAO9L,UAAUkN,OAAOxC,GACxC,OAAO4N,EACHA,EAAUtd,KACVyd,EACA,eACCvB,EAAU,WAAa,KAAxB,OAA8BxM,QAA9B,IAA8BA,OAA9B,EAA8BA,EAASC,aAG7C,OACE,qCACE,cAACxM,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,SAKGuB,GAAYpX,KAEdwP,GACCzF,OAAO4O,QAAQnJ,GAAMlE,KAAI,YAAmB,IAAD,mBAAhBsN,EAAgB,KAAXtZ,EAAW,KACnCuZ,EAAYjB,GAAYgB,GAC9B,IAAKC,EACH,OAAO,KAET,IAAQ1Z,EAA8B0Z,EAA9B1Z,MAAOqO,EAAuBqL,EAAvBrL,QAAS+K,EAAcM,EAAdN,UACxB,OACE,cAAC5C,GAAD,CAEExW,MAAOA,EAAQ,GACfG,MAAOkO,EAAUuM,EAAgBza,GAASiZ,EAAYA,EAAUjZ,GAASA,EACzEsW,KAAMpI,EACNrN,QAAS,kBAAMqN,GAAWwI,EAAa,OAAC1W,QAAD,IAACA,OAAD,EAACA,EAAOmO,cAJ1CmL,SClDnB,SAAS4C,GAAkB1B,EAAYmB,EAAOQ,GAC5C,IAAIC,GAAS,EACPC,EAAS,CACbC,QAAS,EACTC,MAAO,EACPC,4BAA6B,GAEzBC,EAAgB,GAEtB,SAAS/B,EAAQpH,GACf,QAAKA,MAGL,OACEkH,QADF,IACEA,MAAYtJ,MAAK,SAACwL,GAAD,OACfA,EAAmBhM,OAAO4C,QAKvBmJ,EAAcnJ,EAAOnF,cAAgBkO,EAAOE,OA+ErD,OA5EAJ,EAAeQ,SAAQ,SAAChN,GACtBA,EAAagN,SAAQ,SAAC3M,GACpB,GAAKA,EAGH,GAAyB,YAArBA,EAAYtP,WAET,GAAyB,UAArBsP,EAAYtP,WAEhB,GACL,CAAC,cAAe,cAAe,iBAAiBkc,SAC9C5M,EAAYtP,YAIT,GAAyB,iBAArBsP,EAAYtP,KAAyB,CAC9C,IAAMoZ,EAAqB9J,EAAYE,KAAjC4J,iBACDA,EAGH2C,EAAc3C,EAAiB3L,YAAckO,EAAOC,QAFpDF,GAAS,OAIN,GAAI,CAAC,WAAY,cAAcQ,SAAS5M,EAAYtP,MAAO,CAEhE,MAAwCsP,EAAYE,KAA9CyF,EAAN,EAAMA,iBAAkBE,EAAxB,EAAwBA,YACpBA,GAAe8F,EAAMjL,OAAOmF,GAC9B4G,EAAc9G,EAAiBxH,YAAckO,EAAOE,MAEpDH,GAAS,OAEN,GAAyB,sBAArBpM,EAAYtP,KAA8B,CAEnD,MAAqCsP,EAAYE,KAA3C2F,EAAN,EAAMA,YAAa+D,EAAnB,EAAmBA,cAEjB+B,GACA9F,GACA8F,EAAMjL,OAAOmF,IACb+D,GACA6C,EAAc7C,EAAczL,cAAgBkO,EAAOC,QAEnDG,EAAc7C,EAAczL,YAAckO,EAAOE,MAEjDH,GAAS,OAEN,GAAyB,gBAArBpM,EAAYtP,KAAwB,CAE7C,MAAkCsP,EAAYE,KAAxC+F,EAAN,EAAMA,WAAYE,EAAlB,EAAkBA,YACbuE,EAAQzE,IAAgByE,EAAQvE,KACnCiG,GAAS,QAEN,GAAyB,iBAArBpM,EAAYtP,KAAyB,CAE9C,MAA0CsP,EAAYE,KAAhD2M,EAAN,EAAMA,aACFnC,EADJ,EAAoBoC,mBAElBL,EAAcI,EAAa1O,YACzBkO,EAAOG,4BAETJ,GAAS,OAGXA,GAAS,OAzDXA,GAAS,QAiEb3R,OAAOsS,OAAON,GAAevL,MAC3B,SAAC8L,GAAD,OACG,CAACX,EAAOG,4BAA6BH,EAAOE,OAAOK,SAASI,QAGjEZ,GAAS,IAGHA,EAGK,SAASa,GAAT,GAMX,IALFC,EAKC,EALDA,OACAC,EAIC,EAJDA,SACAC,EAGC,EAHDA,UACAC,EAEC,EAFDA,YACAC,EACC,EADDA,UAEMC,EAAoBC,cACpBnO,EAAaoO,cACbnO,EAASsH,cACf,EAAqB2D,cAAdC,EAAP,oBAEA,EAA8Bjc,oBAAS,GAAvC,mBAAOmf,EAAP,KAAgBC,EAAhB,KAGA,EAA4Cpf,mBAAS,MAArD,mBAAO4d,EAAP,KAAuByB,EAAvB,KAEMC,EAAYV,EAASxS,OAAS,EAEpC5H,qBAAU,WACR+a,QAAQC,IAAIZ,EAASnR,KAAI,SAAC9C,GAAD,OAAOkG,GAAcC,EAAYC,EAAQpG,OAAKhG,MACrE,SAACiZ,GACCyB,EAAkBzB,GAClBwB,GAAW,QAGd,CAACR,EAAU9N,EAAYC,IAE1B,IAAM0O,EAAY9S,mBAAQ,WACxB,MAAO,CACL+S,KACEzD,GACA2B,GACAD,GAAkB1B,EAAYlL,EAAO9L,UAAW2Y,MAEnD,CAAC3B,EAAY2B,EAAgB7M,IAEhCvM,qBAAU,WACR,GAAIib,EAAUC,MAAQZ,EACpBha,QAAQqB,IAAI,mCACZ0Y,QACK,CAILpT,OAAOkU,QAMP,IAAIC,EAAmBb,EAAUc,QAC7BD,IACFA,EAAiBE,eAAe,CAAEC,SAAU,WAC5CC,YAAW,kBAAMJ,EAAiBD,UAAS,QAI9C,CAACF,EAAWX,EAAaC,IAE5B,IAAM5G,EAAgB,SAACxI,GACrBA,GACElE,OAAO5L,KACL,8BAAgC8P,EAAUqP,EAC1C,WAIAiB,EAAa,SAACxO,GAClB,cAAQA,QAAR,IAAQA,OAAR,EAAQA,EAAatP,MACnB,IAAK,cACL,IAAK,gBACL,IAAK,cACL,IAAK,cACH,OACE,cAAC4Z,GAAD,CACEtK,YAAaA,EACb0G,cAAeA,IAGrB,IAAK,eACL,IAAK,oBACL,IAAK,WACL,IAAK,UACL,IAAK,SACL,IAAK,SACH,OACE,cAACmF,GAAD,CACE7L,YAAaA,EACb0G,cAAeA,IAGrB,IAAK,uBACL,IAAK,eACL,IAAK,iBACH,OACE,cAACnD,GAAD,CACEvD,YAAaA,EACb0G,cAAeA,IAGrB,IAAK,yBACL,IAAK,iBACL,IAAK,kBACL,IAAK,gBACL,IAAK,kBACL,IAAK,aACL,IAAK,gBACH,OACE,cAACpC,GAAD,CACEtE,YAAaA,EACb0G,cAAeA,IAGrB,IAAK,WACH,OACE,cAAC,GAAD,CAAU1G,YAAaA,EAAa0G,cAAeA,IAEvD,IAAK,aACH,OACE,cAAC,GAAD,CACE1G,YAAaA,EACb0G,cAAeA,EACfC,IAAI,IAGV,QACE,OACE,cAACgB,GAAD,CACE3H,YAAaA,EACb0G,cAAeA,MAqCzB,OACE,cAAC+H,GAAA,EAAD,UACGf,EACC,qCACE,sBACEle,MAAO,CACLE,QAAS,OACTgf,WAAY,WACZpQ,aAAc,IAJlB,UAOE,cAACvJ,GAAA,EAAD,CAAkBvF,MAAO,CAAEyF,YAAa,MACxC,eAACtD,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,gCAKsBsH,EAAY,EAAI,IAAM,GAL5C,UAQDV,EAASnR,KAAI,SAACuD,EAASoP,GAAV,OACZ,cAAChd,EAAA,EAAD,CAAsBnC,MAAO,CAAEqY,UAAW,aAA1C,SACGvH,KAAKsO,OAAOrP,IADEoP,SAMrB,qCACE,cAAChd,EAAA,EAAD,CAAY7B,QAAQ,KAAKyW,cAAY,EAArC,SACG4F,EAAc,UACRe,EADQ,2CAIhBf,EACCA,EAAenQ,KAAI,SAAC2D,EAAckP,GAAf,OAtDV,SAAClP,EAAckP,GAChC,IAZeF,EAYTG,EAAMnP,EAAa3D,KAAI,SAACgE,EAAaH,GAAd,OAC3B,eAACrO,EAAA,EAAD,CAAKhC,MAAO,CAAEuf,UAAW,IAAzB,UACGP,EAAWxO,GACZ,cAACxC,EAAA,EAAD,CAAShO,MAAO,CAAEuf,UAAW,QAFKlP,MAMtC,OAAKgO,EAKH,eAACrc,EAAA,EAAD,CAAKhC,MAAO,CAAEuf,UAAW,IAAzB,WAxBaJ,EAyBFE,EAvBX,qCACE,eAACld,EAAA,EAAD,CAAY7B,QAAQ,KAAKyW,cAAY,EAArC,yBACeoI,EAAIlb,cAEnB,cAAC+J,EAAA,EAAD,CAAShO,MAAO,CAAEuf,UAAW,UAoB5BD,IAFiCD,GAJ7BC,EA8CCE,CAAWrP,EAAckP,MAG3B,qCACE,eAACld,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,gCAKsBsH,EAAY,EAAI,IAAM,GAL5C,OAOCV,EAASnR,KAAI,SAACuD,GAAD,OACZ,cAAC5N,EAAA,EAAD,CAAYnC,MAAO,CAAEqY,UAAW,aAAhC,SACGvH,KAAKsO,OAAOrP,gBCjUhB,SAAS0P,GAAT,GAKX,IAJF/B,EAIC,EAJDA,OACA3N,EAGC,EAHDA,QACA2P,EAEC,EAFDA,eACA5B,EACC,EADDA,UAEAva,qBAAU,WAIRiH,OAAOkU,QAMP,IAAIC,EAAmBb,EAAUc,QAC7BD,IACFA,EAAiBE,eAAe,CAAEC,SAAU,WAC5CC,YAAW,kBAAMJ,EAAiBD,UAAS,OAG5C,CAACZ,IAEJ,IAEI6B,EAhCSC,EA8BP9P,EAASsH,cAGf,OAAQsI,GACN,IAAK,OACHC,GAAa,IAAIE,aAAc9O,OAAOhB,GACtC,MACF,IAAK,MACH4P,EAAa,MAtCJC,EAsCiB7P,EArCvB+P,MAAMC,UAAUvT,IACpBwT,KAAKJ,GAAQ,SAACK,GAAD,OAAQ,KAAOA,EAAEhc,SAAS,KAAK+T,OAAO,MACnDkI,KAAK,KAoCJ,MACF,IAAK,gBACHP,EAAa,6BACb,MACF,QACE,MAAM,IAAIQ,MAAM,4BAA8BT,GA0BlD,OACE,eAACT,GAAA,EAAD,WACE,cAAC9c,EAAA,EAAD,CAAY7B,QAAQ,KAAKyW,cAAY,EAArC,mBACM2G,EADN,gBAGA,cAACvb,EAAA,EAAD,CACE7B,QAAQ,YACRN,MAAO,CAAE+D,WAAY,QACrBgT,cAAY,EAHd,SA5BiB,WACnB,OAAQ2I,GACN,IAAK,OACH,MAAM,6BAAN,OAAoC5P,EAAO9L,WAC7C,IAAK,MACH,OACE,qCACE,cAACsG,EAAA,EAAD,CACE7B,MAAM,oFACNwD,OAAK,EAFP,SAIE,cAAC,KAAD,CAASjM,MAAO,CAAE8O,aAAc,YACvB,IANb,iCAO6BgB,EAAO9L,cAGxC,IAAK,gBACH,MAAM,6BACR,QACE,MAAM,IAAImc,MAAM,oCAAsCT,IAcrDU,KAEH,cAACpS,EAAA,EAAD,CAAShO,MAAO,CAAEO,OAAQ,MAC1B,cAAC4B,EAAA,EAAD,CAAYnC,MAAO,CAAEqY,UAAW,aAAhC,SAAgDsH,IAChD,cAAC3R,EAAA,EAAD,CAAShO,MAAO,CAAEO,OAAQ,S,yBC5D1B8f,GAAqB,CACzB,kBACA,sBACA,OACA,iBAGF,SAASC,KACP,IAAKtW,IACH,MAAO,GAKT,IAAMuW,EAAY,IAAIC,gBAAgBhW,OAAOiW,SAASC,KAAK1I,MAAM,IAC3D2I,EAAUnO,KAAKoO,MAAML,EAAU5Z,IAAI,YAEzC,GAAuB,SAAnBga,EAAQE,OAAmB,CAC7B,IAAMC,EAAUH,EAAQzK,OAAOxF,KAE/B,IAAKoQ,EACH,MAAM,IAAIX,MAAM,4CAIlB,IADA,IAAMzP,EAAO,IAAIqQ,WAAW9V,OAAOC,KAAK4V,GAAS3V,QACjD,MAA6BF,OAAO4O,QAAQiH,GAA5C,eAAsD,CAAjD,0BAAOnQ,EAAP,KAAcnQ,EAAd,KACHkQ,EAAKC,GAASnQ,EAEhBmgB,EAAQzK,OAAOxF,KAAOA,EAGxB,MAAO,CAACiQ,GAGK,SAASK,GAAT,GAAgC,IAAXC,EAAU,EAAVA,OAC5BvD,EAAShS,mBAAQ,WAErB,OADa,IAAI8U,gBAAgBhW,OAAOiW,SAASC,KAAK1I,MAAM,IAC9CrR,IAAI,YACjB,IACGua,EAAiB9J,cACjB+J,EACJD,GAAkBA,EAAeld,UAAU2K,WAC7C,EAAwC7B,cAAhCtI,EAAR,EAAQA,SAAU0I,EAAlB,EAAkBA,kBAClB,EAA4BnO,mBAASiL,IAAc,KAAOkX,GAA1D,mBAAOpR,EAAP,KAAesR,EAAf,KAEA,EAAgDriB,mBAAS,MAAzD,mBAAOsiB,EAAP,KAAyBC,EAAzB,KACMC,IAAwBF,EAC9B,EAAgCtiB,mBAASuhB,IAAzC,mBAAOkB,EAAP,KAAiBC,EAAjB,KACA,EAAsC1iB,oBAAS,GAA/C,mBAAO8e,EAAP,KAAoB6D,EAApB,KACMC,EAAcC,uBAClB,SAAC7R,GACK/F,IACFxD,OAAOqb,QAAQC,YAAY,CACzBC,QAAS,sCACTrR,KAAMX,IAGRkR,EAAOU,YAAP,cAAqBK,QAAS,OAAUjS,GAAW2N,KAGvD,CAACuD,EAAQvD,IAIXna,qBAAU,WACHyG,KACHoX,EAAUF,KAIX,CAACC,IAGJ5d,qBAAU,WACJyG,KACFxD,OAAOC,QAAQC,MAAMC,IAAI,oBAAoB,SAACC,GAC5C,IAAMqb,GAAmBrb,EAAOP,kBAAoB,IAAIqX,GACpDuE,GACF/U,EAAkB+U,EAAgBzT,UAClC8S,EAAoB,IAAIhS,aAAU2S,EAAgBje,YAClD0d,EAAeO,EAAgBpE,cAE/ByD,EAAoBJ,EAAeld,gBAKxC,CAAC0Z,IAGJna,qBAAU,WACJyG,KAAeqX,GACjBD,EAAUF,KAIX,CAACG,EAAkBF,IAItB5d,qBAAU,WACR,GAAIge,IAAwBvX,IAAa,CAAC,IAC/BkY,EAAT,WACEP,EAAY,CAAEd,OAAQ,kBAGxB,OADArW,OAAO2X,iBAAiB,eAAgBD,GACjC,WACLA,IACA1X,OAAO4X,oBAAoB,eAAgBF,OAG9C,CAACX,EAAqBI,EAAajE,IAGtCna,qBAAU,YAELyG,KACD8F,GACAuR,IACCA,EAAiBnQ,OAAOpB,EAAO9L,YAEhCsd,EAAoB,QAErB,CAACD,EAAkBvR,IAGtBvM,qBAAU,WACR,SAAS8e,EAAe3hB,GAClBA,EAAEgd,SAAWA,GAAUhd,EAAE0b,SAAW5R,OAAOyW,SACxCZ,GAAmBjD,SAAS1c,EAAEgQ,KAAKmQ,SACtCc,EAAY,CAAE7d,MAAO,qBAAsBwe,GAAI5hB,EAAEgQ,KAAK4R,KAGxDb,GAAY,SAACD,GAAD,6BAAkBA,GAAlB,CAA4B9gB,EAAEgQ,WAI9C,OADAlG,OAAO2X,iBAAiB,UAAWE,GAC5B,kBAAM7X,OAAO4X,oBAAoB,UAAWC,MAClD,CAAC3E,EAAQiE,IAEZ,IAAMhB,EAAUa,EAAS,GACnBe,EAAa,kBAAMd,GAAY,SAACD,GAAD,OAAcA,EAASxJ,MAAM,OAElE,EAAqCtM,mBAAQ,WAC3C,IAAKiV,GAA8B,YAAnBA,EAAQE,OACtB,MAAO,CAAElD,SAAU,GAAI+B,eAAgB,MAEzC,OAAQiB,EAAQE,QACd,IAAK,gBACH,MAAO,CACLlD,SAAU,CAACgD,EAAQzK,OAAOlS,WAC1B0b,eAAgB,iBAEpB,IAAK,kBACH,MAAO,CACL/B,SAAU,CAAC7M,KAAKC,OAAO4P,EAAQzK,OAAOnG,UACtC2P,eAAgB,MAEpB,IAAK,sBACH,MAAO,CACL/B,SAAUgD,EAAQzK,OAAOyH,SAASnR,KAAI,SAAC9C,GAAD,OAAOoH,KAAKC,OAAOrH,MACzDgW,eAAgB,MAEpB,IAAK,OACH,KAAMiB,EAAQzK,OAAOxF,gBAAgBqQ,YACnC,MAAM,IAAIZ,MAAM,0CAElB,MAAO,CACLxC,SAAU,CAACgD,EAAQzK,OAAOxF,MAC1BgP,eAA2C,SAA3BiB,EAAQzK,OAAOhW,QAAqB,OAAS,OAEjE,QACE,MAAM,IAAIigB,MAAM,sBAAwBQ,EAAQE,WAEnD,CAACF,IA/BIhD,EAAR,EAAQA,SAAU+B,EAAlB,EAAkBA,eAiClB,GAAI6B,GAA2C,IAApBC,EAASrW,OAOlC,OANInB,IACFQ,OAAOgY,QAEPC,KAIA,cAACtgB,EAAA,EAAD,UACG6H,IACG,gBACA,oDAKV,IAAK8F,EACH,OAAO,cAAC3N,EAAA,EAAD,gCAGT,IAAMugB,GACHrB,IAAqBA,EAAiBnQ,OAAOpB,EAAO9L,WAEvD,GACGgG,KAAkC,YAAnB2W,EAAQE,SACtB7W,KAAe0Y,EACjB,CAkCA,OAAO,cAACC,GAAD,CAAuBjF,OAAQA,EAAQE,UAhC9C,SAAiBC,GACfyD,EAAoBxR,EAAO9L,WACvBgG,KACFxD,OAAOC,QAAQC,MAAMC,IAAI,oBAAoB,SAACC,GAE5C,IAAM3D,EAAUuB,EAASmO,MAAK,SAAC1P,GAAD,OAC5BA,EAAQyL,QAAQwC,OAAOpB,EAAO9L,cAE1BqC,EAAgB,6BAChBO,EAAOP,kBAAoB,IADX,kBAEnBqX,EAAS,CACR1Z,UAAW8L,EAAO9L,UAAU2K,WAC5BH,SAAUvL,EAAQuL,SAClBqP,iBAGJrX,OAAOC,QAAQC,MAAMkc,IAAI,CAAEvc,wBAG/Bsb,EAAY,CACVd,OAAQ,YACR3K,OAAQ,CAAElS,UAAW8L,EAAO9L,UAAU2K,WAAYkP,eAClDyE,GAAItY,IAAc2W,EAAQ2B,QAAK9iB,IAEjCkiB,EAAe7D,GACV7T,IAGHuY,IAFAE,QApMsC,8CA+M5C,uBAAA9d,EAAA,sDACE4d,IADF,KAEU5B,EAAQE,OAFlB,OAGS,kBAHT,OAKS,oBALT,MAMS,SANT,OASS,wBATT,+CAIagC,EAAclF,EAAS,KAJpC,cAOMmF,EAAcnF,EAAS,IAP7B,mCAUMoF,EAAkBpF,GAVxB,kCAaY,IAAIwC,MAAM,sBAAwBQ,EAAQE,QAbtD,6CA/M4C,+BAgO7BiC,EAhO6B,gFAgO5C,WAA6B/S,GAA7B,UAAApL,EAAA,kEACEgd,EADF,SAGuB7R,EAAOkT,gBAAgBjT,GAH9C,wBAIiBD,EAAO9L,UAAU2K,WAJlC,MAGMsU,UAHN,KAIMjf,UAJN,WAMQ2c,EAAQ2B,GANhB,MAEI1b,OAFJ,KAMI0b,GANJ,iEAhO4C,+BA0O7BS,EA1O6B,gFA0O5C,WAAiCpF,GAAjC,kBAAAhZ,EAAA,yDAGsB,WAAhBmL,EAAO5O,KAHb,iBAIIgiB,EAAa,GACJje,EAAI,EALjB,YAKoBA,EAAI0Y,EAASxS,QALjC,6BAMM+X,EANN,SAM4BpT,EAAOkT,gBAAgBrF,EAAS1Y,IAN5D,wBAMiBD,KANjB,uBAKyCC,GAAK,EAL9C,gEASuBqZ,QAAQC,IACzBZ,EAASnR,KAAI,SAAC9C,GAAD,OAAOoG,EAAOkT,gBAAgBtZ,OAVjD,QASIwZ,EATJ,eAaEvB,EAAY,CACV/a,OAAQ,CACNsc,aACAlf,UAAW8L,EAAO9L,UAAU2K,YAE9B2T,GAAI3B,EAAQ2B,KAlBhB,4CA1O4C,wBAgQ5C,SAASO,EAAc7e,GACrB,IAAMkH,ECzT4B,SAAClH,EAAWmf,GAChD,OAAOC,KAASC,eAAe,CAC7Brf,UAAWA,EACXmf,UAAW,IAAIpC,WAAWoC,KDsTbG,CACXtf,EACA8L,EAAOtM,SAASP,QAAQkgB,WAE1BxB,EAAY,CACV/a,OAAQsE,EACRoX,GAAI3B,EAAQ2B,KAYhB,OAtEAiB,KAAOlD,GAAmBjD,SAASuD,EAAQE,SAAW/Q,GAuEpD,cAAC0T,GAAD,CAEE3F,YAAaA,EACbH,OAAQA,EACRC,SAAUA,EACV+B,eAAgBA,EAChB9B,UA1RwC,2CA2RxC6F,SAhBJ,WACElB,IACAZ,EAAY,CACV7d,MAAO,wBACPwe,GAAI3B,EAAQ2B,OAMP3B,EAAQ2B,IAenB,SAASG,KACP,IACEjY,OAAO5L,KAAK,GAAI,UAChB,MAAOgF,GACPC,QAAQqB,IAAI,MAAOtB,IAIvB,IAAMiE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC8H,WAAY,CACV0P,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,GAC5Bub,UAAW,UAEbC,YAAa,CACXtL,UAAW,aAEbuL,cAAe,CACb9a,gBAAiB,UACjBxH,MAAO,SAETuiB,QAAS,CACP1V,eAAgB,iBAElB2V,aAAc,CACZhb,gBAAiBf,EAAMgB,QAAQgb,WAAWC,OAE5CC,eAAgB,CACd1jB,OAAQwH,EAAMI,QAAQ,GACtB7G,MAAOyG,EAAMgB,QAAQG,KAAKgb,SAE5BC,YAAa,CACX1e,YAAasC,EAAMI,QAAQ,GAC3ByE,SAAU,IAEZwX,aAAc,CACZ9iB,MAAOyG,EAAMgB,QAAQsb,QAAQC,MAC7BvgB,WAAY,IACZ6I,SAAU,GACVsS,WAAY,SACZhf,QAAS,QAEXqkB,iBAAkB,CAChBhF,UAAWxX,EAAMI,QAAQ,IAE3Bqc,QAAS,CACPjF,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,QAIhC,SAASwa,GAAT,GAAuD,IAAtBjF,EAAqB,EAArBA,OAAQE,EAAa,EAAbA,UACjC9N,EAASsH,cACf,EAA4CtK,cAApCtI,EAAR,EAAQA,SAAUwI,EAAlB,EAAkBA,sBAEZ/J,EAAUuB,EACbigB,OAAO,CAACzX,IACR2F,MAAK,SAAC1P,GAAD,OAAaA,GAAWA,EAAQyL,QAAQwC,OAAOpB,EAAO9L,cACxDoF,EAAUvB,KAChB,EAAsC9I,oBAAS,GAA/C,mBAAO8e,EAAP,KAAoB6D,EAApB,KACA,EAAgCgD,YAC9B,+BACA,GAFF,mBAAKC,EAAL,KAAgBC,EAAhB,KAIA,OACE,eAACxf,GAAA,EAAD,WACE,eAAC6Z,GAAA,EAAD,WACE,cAAC9c,EAAA,EAAD,CAAY7B,QAAQ,KAAK8N,UAAU,KAAK2I,cAAY,EAApD,4DAGA,sBAAKnN,UAAWR,EAAQyG,WAAxB,UACE,cAAC1N,EAAA,EAAD,UAAaub,IACb,cAAC,IAAD,CAAkB9Q,SAAS,UAC3B,cAACzK,EAAA,EAAD,UAAac,EAAQjE,OACrB,eAACmD,EAAA,EAAD,CAAY7B,QAAQ,UAApB,cACIwP,EAAO9L,UAAU2K,WADrB,UAIF,cAACxM,EAAA,EAAD,iDACA,cAAC6L,EAAA,EAAD,CAASpE,UAAWR,EAAQob,UAC5B,cAAC1jB,EAAA,EAAD,CACEC,QACE,cAACC,EAAA,EAAD,CACEC,QAAS4c,EACTpd,SAAU,kBAAMihB,GAAgB7D,IAChCvc,MAAM,YAGVjB,MAAK,kDAA6Cqd,MAElDiH,GAAa9G,GACb,cAACgH,GAAA,EAAD,CACEjb,UAAWR,EAAQmb,iBACnBxU,QACE,gCACE,uBAAMnG,UAAWR,EAAQgb,aAAzB,UACE,cAAC,KAAD,CAAaxa,UAAWR,EAAQ+a,cADlC,2BAIA,cAAChiB,EAAA,EAAD,CAAYyH,UAAWR,EAAQ6a,eAA/B,mJAOJa,OAAQ,CACN,cAAC1jB,EAAA,EAAD,CAAQC,QAAS,kBAAMujB,EAAa,MAApC,2BAEFxb,QAAS,CAAE2b,KAAM3b,EAAQ0a,mBAI/B,eAACkB,GAAA,EAAD,CAAapb,UAAWR,EAAQya,QAAhC,UACE,cAACziB,EAAA,EAAD,CAAQC,QAASmJ,OAAOgY,MAAxB,oBACA,cAACphB,EAAA,EAAD,CACEE,MAAM,UACND,QAAS,kBAAMuc,EAAUC,IACzBtc,UAAWojB,GAAa9G,EAH1B,2BAYR,SAAS2F,GAAT,GAOI,IANF9F,EAMC,EANDA,OACAC,EAKC,EALDA,SACA+B,EAIC,EAJDA,eACA9B,EAGC,EAHDA,UACA6F,EAEC,EAFDA,SACA5F,EACC,EADDA,YAEMzU,EAAUvB,KACViW,EAAYmH,mBAEZ5G,EAA+B,OAAnBqB,GAA2B/B,EAASxS,OAAS,EAyB/D,OACE,eAAC/F,GAAA,EAAD,WAvBuB,OAAnBsa,EAEA,cAACjC,GAAD,CACEI,YAAaA,EACbH,OAAQA,EACRC,SAAUA,EACVC,UAAWA,EACXE,UAAWA,IAKb,cAAC2B,GAAD,CACE/B,OAAQA,EACR3N,QAAS4N,EAAS,GAClB+B,eAAgBA,EAChB5B,UAAWA,IASf,eAACkH,GAAA,EAAD,CAAapb,UAAWR,EAAQya,QAAhC,UACE,cAACziB,EAAA,EAAD,CAAQC,QAASoiB,EAAjB,oBACA,eAACriB,EAAA,EAAD,CACE8jB,IAAKpH,EACLlU,UAAWR,EAAQwa,cACnBtjB,QAAQ,YACRgB,MAAM,UACND,QAASuc,EALX,oBAOUS,EAAY,OAAS,Y,yBE3gBjC8G,GAAU,CACdC,YAAa,CACXrf,MAAQ,MACRxF,OAAQ,aAEV8kB,cAAe,CACbvc,gBAAiB,OACjBwc,aAAc,iBAGhB5c,OAAQ,CACNkE,SAAU,OACV7I,WAAY,MACZuB,QAAS,WACTigB,WAAY,OACZC,cAAe,SAEjBtc,KAAM,CACJpD,OAAO,QACP5F,QAAS,OACTgf,WAAY,SACZ/Q,eAAgB,SAChBhO,cAAe,UAEjBslB,WAAY,CACV7Y,SAAU,OACV7I,WAAY,MACZwhB,WAAY,OACZC,cAAe,QACflkB,MAAO,WAETokB,YAAa,CACX3f,MAAO,OACPlE,SAAU,QACVtB,OAAQ,QAEVolB,QAAS,CACP7c,gBAAiB,QACjBjH,SAAU,IACVsM,eAAgB,WAIL,SAASyX,KACtB,MAA4CC,eAA5C,mBAAOC,EAAP,KAGA,GAHA,KAGwB/mB,mBAAS,IAAjC,mBAAOgnB,EAAP,KAAaC,EAAb,KACA,EAAwBjnB,oBAAS,GAAjC,mBAAOknB,EAAP,KAAaC,EAAb,KAGMhd,EAAO,CACX,CACET,MAAQ,oBACR0d,UAAW,gCAEb,CACE1d,MAAQ,gBACR0d,UAAW,qLAEb,CACE1d,MAAQ,cACR0d,UAAW,oJAIf,OAAGL,GAGAC,GAAQ,GAMRE,EARO,cAACG,GAAA,EAAD,IAcPL,EAAO,EAEN,cAAC/W,GAAA,EAAD,CAAWnN,SAAS,KAApB,SACE,eAACuD,GAAA,EAAD,WACE,eAACpD,EAAA,EAAD,CAAKqkB,GAAI,EAAGC,GAAI,EAAhB,UACE,cAACtkB,EAAA,EAAD,CAAKC,MAAM,QAAQqkB,GAAI,EAAvB,SACE,cAACllB,EAAA,EAAD,CAAQpB,MAAOmlB,GAAOM,WAAYxjB,MAAM,QAAQ3B,QAAQ,OAAOgB,MAAM,UAAU+kB,GAAI,EAAGhlB,QAAS,kBAAM6kB,GAAQ,IAA7G,oBAIF,cAACK,GAAA,EAAD,CAAWvmB,MAAOmlB,GAAOC,YAAaoB,MAAM,kBAAkBpY,UAAU,WAE1E,eAACpM,EAAA,EAAD,CAAKhC,MAAOmlB,GAAOE,cAAepjB,MAAM,SAASokB,GAAI,EAAGC,GAAI,EAA5D,UAGA,cAACG,GAAA,EAAD,CACEnmB,QAAQ,OACRomB,MAAO,EACPC,SAAS,SACTC,WAAYb,EACZ/lB,MAAOmlB,GAAOQ,UAId,cAAC3jB,EAAA,EAAD,CAAKskB,GAAI,EAAGD,GAAI,EAAhB,SACE,cAAClkB,EAAA,EAAD,CAAY7B,QAAQ,KAApB,SAA0B4I,EAAK6c,GAAMtd,UAEvC,cAACzG,EAAA,EAAD,CAAK6kB,GAAI,EAAGR,GAAI,EAAGrmB,MAAOmlB,GAAOjc,KAAjC,SACE,cAAC/G,EAAA,EAAD,CAAYF,MAAM,SAAS3B,QAAQ,YAAnC,SAAgD4I,EAAK6c,GAAMI,cAG7D,cAACnkB,EAAA,EAAD,CAAKC,MAAM,SAAS6kB,EAAG,EAAvB,SACE,cAAC1lB,EAAA,EAAD,CAAQpB,MAAOmlB,GAAOzc,OAAQpI,QAAQ,WAAWgB,MAAM,UAAU+kB,GAAI,EAAGhlB,QAAS,kBAAM2kB,EAAQD,EAAK,IAApG,iCAhCZ,E,mICrEa,SAASgB,KACtB,IAAM1d,EAAmBC,cACnBjD,EAAmBc,KAEzB,OACE,eAAC6f,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAQN,SAAS,SAASrlB,MAAM,UAAU+D,UAAW,EAArD,SACE,cAAC6hB,GAAA,EAAD,UACE,cAAC/kB,EAAA,EAAD,CACE7B,QAAQ,KACRN,MAAO,CAAEiI,SAAU,EAAG2E,SAAUvD,GAAoB,QACpD+E,UAAU,KAHZ,iCASJ,cAAC+Y,GAAA,EAAD,CAAMC,gBAAc,EAApB,SACGnc,OAAO4O,QAAQxT,GAAkBmG,KAAI,mCAAEkR,EAAF,KAAUuE,EAAV,YACpC,cAACoF,GAAD,CACE3J,OAAQA,EACRuE,gBAAiBA,GACZvE,WAQjB,IAGM7V,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCuf,YAAa,CACX9hB,WAAYuC,EAAMI,QAAQ,GAC1B1C,YAAasC,EAAMI,QAAQ,GAC3B2G,aAAc/G,EAAMI,QAAQ,IAE9Bof,gBAAiB,CACfrnB,QAAS,OACTiO,eAAgB,eAChBoR,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,IAE9Bqf,aAAc,CACZ1e,gBAAiB,QACjB5I,QAAS,OACTgf,WAAY,SACZ/Q,eAAgB,SAChBrI,OApBc,GAqBdC,MArBc,GAsBduf,aAAcmC,IAEhBC,cAAe,CACb5hB,OAxBe,GAyBfC,MAzBe,GA0Bfuf,aAAcqC,QAIlB,SAASN,GAAT,GAA2D,IAA5B3J,EAA2B,EAA3BA,OAAQuE,EAAmB,EAAnBA,gBAC/B7Y,EAAUvB,KAChB,EAAwB9I,oBAAS,GAAjC,mBAAOH,EAAP,KAAagpB,EAAb,KAEMC,EAAenK,EAAS,wBACxBoK,EAAapK,EAAS,eAC5B,EAA8B3e,mBAAS8oB,GAAvC,mBAAOE,EAAP,KAAgBC,EAAhB,KAGM/kB,EAFe6J,cAAbtI,SAEiBmO,MACvB,SAAC1P,GAAD,OAAaA,EAAQyL,QAAQC,aAAesT,EAAgBje,aAiB9D,OACE,qCACE,eAACikB,GAAA,EAAD,CAAUvf,QAAM,EAACrH,QAAS,kBAAMumB,GAAQ,SAAChpB,GAAD,OAAWA,MAAnD,UACE,cAAC+N,EAAA,EAAD,UACE,qBAAK/C,UAAWR,EAAQoe,aAAxB,SACE,qBACEU,IAAKH,EACLI,QAAS,kBAAMH,EAAWF,IAC1Ble,UAAWR,EAAQse,cACnBU,IAAI,SAIV,qBAAKpoB,MAAO,CAAEE,QAAS,OAAQmoB,KAAM,GAArC,SACE,cAACC,GAAA,EAAD,CAAcpE,QAASxG,EAAQ6K,UAAWtlB,EAAQjE,SAEnDJ,EAAO,cAAC4pB,GAAA,EAAD,IAAiB,cAACC,GAAA,EAAD,OAE3B,cAACC,GAAA,EAAD,CAAUC,GAAI/pB,EAAMgqB,QAAQ,OAAOC,eAAa,EAAhD,SACE,qBAAKC,MAAO1f,EAAQke,YAApB,SACE,sBAAKwB,MAAO1f,EAAQme,gBAApB,UACE,cAACnmB,EAAA,EAAD,CACEd,QAAS2hB,EAAgBpE,YAAc,YAAc,WACrDvc,MAAM,UACNynB,KAAK,QACLxa,UAAW,cAACya,GAAA,EAAD,IACX3nB,QAAS,kBAxCGwc,GAwCmBoE,EAAgBpE,iBAvCzDrX,OAAOC,QAAQC,MAAMC,IAAI,oBAAoB,SAACC,GAC5CA,EAAOP,iBAAiBqX,GAAQG,YAAcA,EAC9CrX,OAAOC,QAAQC,MAAMkc,IAAI,CAAEvc,iBAAkBO,EAAOP,sBAHjC,IAACwX,GAmCd,SAOGoE,EAAgBpE,YAAc,gBAAkB,iBAEnD,cAACzc,EAAA,EAAD,CACEd,QAAQ,WACRgB,MAAM,YACNynB,KAAK,QACLxa,UAAW,cAAC,KAAD,IACXlN,QA1Ca,WACvBmF,OAAOC,QAAQC,MAAMC,IAAI,oBAAoB,SAACC,UACrCA,EAAOP,iBAAiBqX,GAC/BlX,OAAOC,QAAQC,MAAMkc,IAAI,CAAEvc,iBAAkBO,EAAOP,uBAkC9C,kCCnIZ,IAAMwB,GAAYC,aAAW,SAACC,GAAD,YAAY,CACvCyB,WAAS,mBACNzB,EAAMK,YAAYwG,KAAK7G,EAAMO,KAAO,CACnChD,QAAS,IAFJ,cAINyC,EAAMK,YAAYC,GAAGN,EAAMO,KAAO,CACjCzG,SAAU,OALL,OAUI,SAASonB,KACtB,IAAM7f,EAAUvB,KACVwB,EAAmBC,cACzB,OACE,cAAC0F,GAAA,EAAD,CAAWC,OAAK,EAACpN,SAAS,KAAK+H,UAAWR,EAAQI,UAAlD,SACE,cAACD,EAAA,EAAD,CAAMC,WAAS,EAACrB,QAASkB,EAAmB,EAAI,EAAhD,SACE,cAACE,EAAA,EAAD,CAAM2F,MAAI,EAACC,GAAI,GAAf,SACE,cAAC4X,GAAD,UCIK,SAASmC,KAEtB,IAAMC,EAAkBC,YAAc,gCAgEhCrhB,GA/DashB,IAAM3d,SACvB,kBACE4d,YAAe,CACbvgB,QAAS,CACPG,KAAM,CACJgb,QAAS,UACTqE,UAAW,WAEbxE,WAAY,CACVvO,QAAS,OACTwO,MAAO,WAETE,QAAS,CACPI,MAAO,UACPrb,KAAM,UACNsgB,KAAM,UACNC,aAAc,QAEhBjB,UAAW,CACTjE,MAAO,UACPrb,KAAM,OACNsgB,KAAM,UACNC,aAAc,YAGlBC,WAAY,CACVC,WAAY,CAAC,aAAc,cAC3BC,GAAI,CACF/c,SAAU,OACV7I,WAAY,OACZzC,MAAO,WAETsoB,GAAI,CACFhd,SAAU,OACV7I,WAAY,OAEd8lB,GAAI,CACFjd,SAAU,OACV7I,WAAY,OAEdoiB,UAAW,CACTvZ,SAAU,OACV7I,WAAY,SACZwhB,WAAY,OACZjkB,MAAO,YAGXwoB,MAAO,CACLxE,aAAc,GAEhByE,UAAW,CACTC,UAAW,CACTjF,KAAM,CACJO,aAAc,MAKpBhd,IAAK,UAET,CAAC6gB,IAGWE,IAAM3d,SAClB,kBACE4d,YAAe,CACbvgB,QAAS,CACPG,KAAM,CACJgb,QAAS,OACTqE,UAAW,WAEbxE,WAAY,CACVvO,QAAS,OACTwO,MAAO,OACPiG,OAAQ,OACRzN,MAAO,WAET0H,QAAS,CACPI,MAAO,UACPrb,KAAM,UACNsgB,KAAM,UACNC,aAAc,QAEhBjB,UAAW,CACTjE,MAAO,UACPrb,KAAM,OACNsgB,KAAM,UACNC,aAAc,YAGlBC,WAAY,CACVC,WAAY,CAAC,aAAc,cAC3BC,GAAI,CACF/c,SAAU,OACV7I,WAAY,QAEd6lB,GAAI,CACFhd,SAAU,OACV7I,WAAY,OAEd8lB,GAAI,CACFjd,SAAU,OACV7I,WAAY,MACZzC,MAAO,QAET4oB,GAAI,CACFnmB,WAAY,IACZ6I,SAAU,OACVtL,MAAO,QAET6oB,QAAS,CACPvd,SAAU,OACV7I,WAAY,MACZwhB,WAAY,SAGhBuE,MAAO,CACLxE,aAAc,GAEhByE,UAAW,CACTC,UAAW,CACTjF,KAAM,CACJO,aAAc,KAGlB8E,qBAAsB,CACpBrF,KAAM,CACJnY,SAAU,OACVtL,MAAO,UACPikB,WAAY,SACZxhB,WAAY,QAGhBsmB,eAAgB,CACdtF,KAAM,CACJ,OAAQ,CACNnY,SAAU,OACV7I,WAAY,MACZwhB,WAAY,OACZjkB,MAAO,UAIbgpB,aAAc,CACZvF,KAAM,CACJ,UAAW,CACTzjB,MAAO,WAMfgH,IAAK,UAET,CAAC6gB,KAIH,GAAI3e,OAAO+f,OAAS/f,OAAOggB,IACzB,OAAO,KAGT,IAAIC,EACF,cAACthB,GAAD,UACE,cAAC,WAAD,CAAUuhB,SAAU,cAACC,GAAA,EAAD,IAApB,SACE,cAACC,GAAD,QAaN,OARI5gB,MACFygB,EACE,cAAC,GAAD,UACE,cAAC,GAAD,UAAeA,OAMnB,cAAC,WAAD,CAAUC,SAAU,cAACC,GAAA,EAAD,IAApB,SACE,eAACE,EAAA,EAAD,CAAe9iB,MAAOA,EAAtB,UACE,cAAC+iB,EAAA,EAAD,IAEA,cAAC,IAAD,UACE,cAAC,KAAD,UACE,cAAC,KAAD,CAAkBC,SAAU,EAAGC,iBAAkB,IAAjD,SACE,cAAC,IAAD,UAAiBP,eAS/B,SAASG,KACP,IAAM9a,EAASsH,cACf,EAAe3P,KAARF,EAAP,oBAEyBiD,OAAOygB,aAAaC,QADvB,qCAEtB,OAAKpb,EAODtF,OAAOyW,OACF,cAACD,GAAD,CAAWC,OAAQzW,OAAOyW,SAEtB,WAAT1Z,EACK,cAACwH,GAAD,IACW,gBAATxH,EACF,cAAC0hB,GAAD,SADF,EAVH,mCACE,cAACrD,GAAD,MAcU9d,aAAW,iBAAO,CAClCqjB,aAAc,CACZplB,MAAO,OACPT,QAAS,OACT,UAAW,CACT8lB,OAAQ,gBClPMC,QACW,cAA7B7gB,OAAOiW,SAAS6K,UAEe,UAA7B9gB,OAAOiW,SAAS6K,UAEhB9gB,OAAOiW,SAAS6K,SAASC,MACvB,2DCZNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACxC,GAAD,MAEFyC,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBroB,MAAK,SAACsoB,GACLA,EAAaC,gBAEdtoB,OAAM,SAACG,GACND,QAAQC,MAAMA,EAAMiM,a,4JEpItBlI,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgd,KAAM,CACJ7kB,QAAS,OACTgf,WAAY,SACZ/Q,eAAgB,SAChBpI,MAAO,OACPD,OAAQ,OACRR,QAASyC,EAAMI,QAAQ,QAIZ,SAASwiB,EAAT,GAIX,IAAD,IAHD7kB,cAGC,MAHQ,KAGR,MAFDomB,aAEC,MAFO,IAEP,EADEC,EACF,iBACK/iB,EAAUvB,IAChB,EAA8B9I,oBAAS,GAAvC,mBAAOqtB,EAAP,KAAgBC,EAAhB,KAEAC,aAAsB,kBAAMD,GAAW,KAAOH,GAE9C,IAAIlsB,EAAQ,GAKZ,OAJI8F,IACF9F,EAAM8F,OAASA,GAGZsmB,EAKH,6CAAKxiB,UAAWR,EAAQ2b,KAAM/kB,MAAOA,GAAWmsB,GAAhD,aACE,cAAC,IAAD,OALKrmB,EAAS,qBAAK9F,MAAOA,IAAY,O,uYCZrC,SAAeusB,EAAtB,oC,4CAAO,WAAqC1c,EAAY7L,GAAjD,iBAAAW,EAAA,6DACD6nB,EAAUC,YAAwBzoB,GADjC,SAEY6L,EAAW6c,mBAC1Bnb,IACA,CACEib,YALC,cAEDG,EAFC,yBAQEA,EACJngB,KAAI,gBAAGsH,EAAH,EAAGA,OAAH,IAAW7Q,QAAWyN,EAAtB,EAAsBA,KAAMkc,EAA5B,EAA4BA,WAAYzQ,EAAxC,EAAwCA,MAAOvC,EAA/C,EAA+CA,SAA/C,MAAiE,CACpE5V,UAAW,IAAIsL,YAAUwE,GACzB+Y,YAAa,CACXnc,OACAkc,aACAzQ,MAAO,IAAI7M,YAAU6M,GACrBvC,iBAfD,4C,sBAoBA,SAAekT,EAAtB,wC,4CAAO,WACLjd,EACA8T,EACA7T,EACAid,GAJK,iCAAApoB,EAAA,6DAKLqoB,EALK,yCAQGnd,EAAWod,mBAAmB,OARjC,cAOLtJ,EAAYuJ,gBAPP,OASHC,WACF,EAAAxJ,GAAYyJ,WAAZ,SAEEtd,EAAO9L,WAFT,mBAGK+oB,EAAQvgB,KAAI,SAAC6gB,GAAD,OAAOA,EAAErpB,gBAGtB+oB,EAAQ5hB,OAAS,IACnB,EAAAwY,GAAY2J,YAAZ,oBAA2BP,IAjBxB,SAoBejd,EAAOyd,gBAAgB5J,GApBtC,cAoBLA,EApBK,OAqBC6J,EAAiB7J,EAAY8J,YArB9B,UAsBQ5d,EAAW6d,mBAAmBF,EAAgB,CACzDR,gBACAW,oBAAqB,WAxBlB,qF,wBA4BA,SAAeC,EAAtB,wC,4CAAO,WAA8B/d,EAAYC,EAAQiM,EAAaxB,GAA/D,eAAA5V,EAAA,6DACCkpB,GAAK,IAAIC,eAAcC,IAC3B5c,gBAAcmK,SAAS,CACrB1G,WAAY9E,EAAO9L,UACnBmW,SAAU4B,EACVnC,SAAUW,KALT,SAQQuS,EAAuBjd,EAAYge,EAAI/d,EAAQ,IARvD,oF,sBAwEA,SAAeke,EAAtB,kC,4CAAO,uCAAArpB,EAAA,6DACLkL,EADK,EACLA,WACAoe,EAFK,EAELA,MACAC,EAHK,EAGLA,cACAC,EAJK,EAILA,WAEIxK,EAAc,IAAImK,cANjB,KAOLnK,EAPK,KAQHxS,gBARG,KASW8c,EAAMjqB,UATjB,KAUiBmqB,EAAWnqB,UAV5B,SAWe6L,EAAWue,kCACzBC,IAAeC,MAZhB,+BAcMD,IAAeC,KAdrB,KAeU/c,IAfV,MASDqD,WATC,KAUD0F,iBAVC,KAWDV,SAXC,KAcD2U,MAdC,KAeDvd,UAfC,gBAQWwd,cARX,qBAOOT,IAPP,gBAkBLpK,EAAYoK,IACV1S,YAAkB,CAChBpY,QAASkrB,EAAWnqB,UACpBgY,KAAMkS,EACN/R,MAAO8R,EAAMjqB,aAIb+oB,EAAU,CAACoB,GA1BV,UA2BQrB,EAAuBjd,EAAY8T,EAAasK,EAAOlB,GA3B/D,sF,sBA8BA,SAAe0B,EAAtB,kC,4CAAO,6CAAA9pB,EAAA,6DACLkL,EADK,EACLA,WACAC,EAFK,EAELA,OACA4e,EAHK,EAGLA,oBAHK,SAKuBC,EAC1B7e,EAAO9L,UACP8L,EAAO9L,UACP0qB,GARG,0CAKEE,EALF,KAKMlgB,EALN,MAUCmf,EAAK,IAAIC,eACZC,IAAIa,GACPf,EAAGgB,SAAW/e,EAAO9L,UAZhB,UAae8oB,EAAuBjd,EAAYge,EAAI/d,EAAQ,IAb9D,eAaCgf,EAbD,yBAeE,CAACpgB,EAASogB,IAfZ,6C,+BAiBQH,E,kFAAf,WACEI,EACAC,EACAN,GAHF,qBAAA/pB,EAAA,sEAKuCsqB,EACnCD,EACAN,GAPJ,cAKQQ,EALR,OASQC,EAAkB,IAAI7f,YAAU,oCAChCpE,EAAO,CACX,CACE4I,OAAQib,EACRK,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQob,EACRE,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQkb,EACRI,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQ4a,EACRU,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQqb,EACRC,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQub,oBAAkB9d,iBAC1B6d,UAAU,EACV9c,YAAY,GAEd,CACEwB,OAAQwb,qBACRF,UAAU,EACV9c,YAAY,IAGVsc,EAAK,IAAIW,yBAAuB,CACpCrkB,OACA8F,UAAWwe,EACX9e,KAAM+e,EAAOvf,KAAK,MAlDtB,kBAoDS,CAAC0e,EAAIM,IApDd,4C,sBAuDO,SAAeD,EAAtB,oC,4CAAO,WACLD,EACAU,GAFK,SAAA/qB,EAAA,sEAKG2K,YAAUqgB,mBACd,CACEX,EAAcY,WACdP,oBAAkB9d,iBAAiBqe,WACnCF,EAAiBE,YAEnBJ,GAXC,uCAaH,IAbG,4C,sBAgBA,IAAMA,EAA8B,IAAIlgB,YAC7C,gDAGK,SAAeugB,EAAtB,kC,4CAAO,iDAAAlrB,EAAA,6DACLkL,EADK,EACLA,WACAsM,EAFK,EAELA,MACA2T,EAHK,EAGLA,gBACAC,EAJK,EAILA,qBACAxV,EALK,EAKLA,OACAyV,EANK,EAMLA,KACAhU,EAPK,EAOLA,KACAH,EARK,EAQLA,SACAoU,EATK,EASLA,yBATK,SAW8BpgB,EAAWqgB,eAC5CH,GAZG,YAWDI,EAXC,UAgBHA,EAAuBhU,MAAMjL,OAAOK,KAhBjC,gCAkBU6e,EAAgC,CAC3CvgB,aACAsM,QACAH,OACAH,WACAiU,kBACAC,uBACAxV,SACAyV,SA1BC,kEA+BDG,GAA8D,IAApCA,EAAuBvW,UAClDqW,EAhCE,uBAkCG,IAAI9P,MAAM,iDAlCb,yBAqC2C8O,EAC9Cc,EACA/T,GAvCG,eAqCCqU,EArCD,iBAyC0BxgB,EAAWqgB,eACxCG,GA1CG,aAyCLF,EAzCK,UA8CHA,EAAuBhU,MAAMjL,OAAOK,KA9CjC,kCAgDU6e,EAAgC,CAC3CvgB,aACAsM,QACAH,OACAH,WACAiU,kBACAC,qBAAsBM,EACtB9V,SACAyV,SAxDC,yBA2DQM,EAA2B,CACtCzgB,aACAsM,QACA2T,kBACAC,uBACAxV,SACAyV,OACAhU,OACAH,aAnEG,6C,sBAuEP,SAAS0U,EAAT,GAQI,IAPFC,EAOC,EAPDA,eACAxU,EAMC,EANDA,KACAH,EAKC,EALDA,SACAiU,EAIC,EAJDA,gBACAC,EAGC,EAHDA,qBACAxV,EAEC,EAFDA,OACAyV,EACC,EADDA,KAEIrM,GAAc,IAAImK,eAAcC,IAClC0C,YAAgB,CACdrU,OAAQ0T,EACR9T,OACAH,WACAE,YAAagU,EACb5T,MAAOqU,EACPjW,YAMJ,OAHIyV,GACFrM,EAAYoK,IAAI2C,YAAgBV,IAE3BrM,E,SAGMyM,E,8EAAf,+CAAAzrB,EAAA,6DACEkL,EADF,EACEA,WACAsM,EAFF,EAEEA,MACAH,EAHF,EAGEA,KACAH,EAJF,EAIEA,SACAiU,EALF,EAKEA,gBACAC,EANF,EAMEA,qBACAxV,EAPF,EAOEA,OACAyV,EARF,EAQEA,KAEMrM,EAAc4M,EAAiD,CACnEC,eAAgBrU,EAAMnY,UACtBgY,OACAH,WACAiU,kBACAC,uBACAxV,SACAyV,SAEEjD,EAAU,GAnBhB,SAoBeD,EAAuBjd,EAAY8T,EAAaxH,EAAO4Q,GApBtE,oF,+BAuBeuD,E,8EAAf,yDAAA3rB,EAAA,6DACEkL,EADF,EACEA,WACAsM,EAFF,EAEEA,MACA2T,EAHF,EAGEA,gBACAC,EAJF,EAIEA,qBACAxV,EALF,EAKEA,OACAyV,EANF,EAMEA,KACAhU,EAPF,EAOEA,KACAH,EARF,EAQEA,SARF,SAaY8S,EACRxS,EAAMnY,UACN+rB,EACA/T,GAhBJ,0CAWI2U,EAXJ,KAYIC,EAZJ,MAkBMjN,EAAc,IAAImK,eACVC,IACV8C,YAAY,CACV5tB,QAAS8sB,EACT5T,MAAOhL,gBAAcH,aAGzB2S,EAAYoK,IAAI4C,GACVG,EAA6BP,EACjC,CACEC,eAAgBrU,EAAMnY,UACtBgY,OACAH,WACAiU,kBACAC,qBAAsBa,EACtBrW,SACAyV,SAGJrM,EAAYoK,IAAI+C,GACZ/D,EAAU,GAtChB,UAuCeD,EAAuBjd,EAAY8T,EAAaxH,EAAO4Q,GAvCtE,sF,sBA0CO,SAAegE,EAAtB,kC,4CAAO,uCAAApsB,EAAA,6DACLkL,EADK,EACLA,WACAsM,EAFK,EAELA,MACA2T,EAHK,EAGLA,gBACA9C,EAJK,EAILA,cAEIrJ,GAAc,IAAImK,eAAcC,IAClCrS,YAAa,CACXU,OAAQ0T,EACR/T,YAAaI,EAAMnY,UACnBmY,MAAOA,EAAMnY,aAGb+oB,EAAU,GAbT,SAcQD,EACXjd,EACA8T,EACAxH,EACA4Q,EACAC,GAnBG,oF,seCrYD7H,EAAU,CACdC,YAAa,CACXrf,MAAQ,MACRxF,OAAQ,aAEVmI,OAAQ,CACNkE,SAAU,OACV7I,WAAY,IACZyhB,cAAe,QACfD,WAAY,OACZjgB,QAAS,cACT/E,OAAQ,QAEVmlB,YAAa,CACX3f,MAAO,OACPlE,SAAU,QACVtB,OAAQ,QAEVywB,aAAc,CACZ1vB,MAAO,UACPyC,WAAY,MACZ6I,SAAU,OACVqkB,WAAY,QAEdC,cAAe,CACb5vB,MAAO,UACPyC,WAAY,MACZ6I,SAAU,OACVqkB,WAAY,SAID,SAAS7K,IACtB,MAA8BrnB,oBAAS,GAAvC,mBAAOoyB,EAAP,KAAgBC,EAAhB,KACA,EAA4CvL,cAA5C,mBAAOC,EAAP,KAEA,OAFA,KAGS,KAIP,cAAC,IAAD,CAAWjkB,SAAS,KAApB,SACGsvB,EACC,cAACE,EAAD,CAAmBC,OAAQ,kBAAMF,GAAW,MAE5C,mCACGtL,EAA2B,cAACyL,EAAD,IAAgB,cAACC,EAAD,QAOtD,SAASA,IACP,MAAwCzyB,oBAAS,GAAjD,mBAAO0yB,EAAP,KAAqBC,EAArB,KACA,EAA0C3yB,oBAAS,GAAnD,mBAAO4yB,EAAP,KAAsBC,EAAtB,KAEA,OAAGH,EACM,cAACI,EAAD,IAENF,EACM,cAACN,EAAD,IAELI,OAAJ,EAEI,cAAC,IAAD,UACE,eAAC,IAAD,CAAKpL,GAAI,EAAGC,GAAI,GAAhB,UACE,cAAC,IAAD,CAAKD,GAAI,EAAGC,GAAI,EAAhB,SACE,cAAC,IAAD,CAAWtmB,MAAOmlB,EAAOC,YAAaoB,MAAM,kBAAkBpY,UAAU,UAE1E,eAAC,IAAD,CAAK0jB,GAAI,EAAT,UACE,cAAC,IAAD,CAAY9xB,MAAOmlB,EAAO6L,aAAc/uB,MAAM,SAAS3B,QAAQ,KAAKyW,cAAY,EAAhF,wBAGA,cAAC,IAAD,CAAY/W,MAAOmlB,EAAO+L,cAAejvB,MAAM,SAAS3B,QAAQ,KAAKyW,cAAY,EAAjF,uBAIF,eAAC,IAAD,CAAK/W,MAAOmlB,EAAOO,YAAaxlB,QAAQ,OAAOC,cAAc,SAA7D,UACE,cAAC,IAAD,CAAQG,QAAQ,YAAYN,MAAOmlB,EAAOzc,OAAQpH,MAAM,UAAUD,QAAS,kBAAMqwB,GAAgB,IAAjG,2BAGA,cAAC,IAAD,CAAQpxB,QAAQ,YAAYN,MAAOmlB,EAAOzc,OAAQpH,MAAM,YAAYD,QAAS,kBAAMuwB,GAAiB,IAApG,oCASZ,SAASC,IACP,MAAwC9yB,oBAAS,GAAjD,mBAAO0yB,EAAP,KAAqBC,EAArB,KAEA,OAAGD,EACM,cAACM,EAAD,IAGP,cAAC,IAAD,UACE,eAAC,IAAD,CAAKjL,EAAG,EAAR,UACE,cAAC,IAAD,CAAW9mB,MAAOmlB,EAAOC,YAAaoB,MAAM,kBAAkBpY,UAAU,QACxE,cAAC,IAAD,CAAK1E,EAAG,EAAR,SACE,cAAC,IAAD,CAAYzH,MAAM,SAAS3B,QAAQ,KAAnC,oCAEF,cAAC,IAAD,CAAKoJ,EAAG,EAAR,SACE,cAAC,IAAD,CAAYzH,MAAM,SAAS3B,QAAQ,YAAnC,8MAMF,cAAC,IAAD,CAAKN,MAAOmlB,EAAOO,YAAaxlB,QAAQ,OAAOC,cAAc,SAA7D,SACE,cAAC,IAAD,CAAQG,QAAQ,YAAYN,MAAOmlB,EAAOzc,OAAQpH,MAAM,UAAUD,QAAS,kBAAMqwB,GAAgB,IAAjG,6BAWV,SAASK,IACP,MAA8ChzB,mBAAS,MAAvD,mBAAOizB,EAAP,KAAwBC,EAAxB,KACA1uB,qBAAU,WACR2uB,cAA0BxuB,KAAKuuB,KAC9B,IACH,MAAoClzB,oBAAS,GAA7C,mBAAOozB,EAAP,KAAmBC,EAAnB,KACMC,EAAYC,cAkBlB,OAAKH,EAUH,cAACI,EAAD,CACEP,gBAAiBA,EACjBV,OAAQ,kBAAMc,GAAc,IAC5BxyB,SA7BJ,SAAgB4yB,GACd,IAAQjwB,EAAmByvB,EAAnBzvB,SAAU8X,EAAS2X,EAAT3X,KAClBgY,EACEI,YACElwB,EACA8X,EACAmY,EACAE,IAAgBC,aAElB,CACEC,gBAAiB,qBACjBC,eAAgB,sBAOlB,cAACC,EAAD,CACEd,gBAAiBA,EACjBe,UAAW,kBAAMX,GAAc,MAcvC,SAASU,EAAT,GAAwD,IAA/Bd,EAA8B,EAA9BA,gBAAiBe,EAAa,EAAbA,UACxC,EAAkCh0B,oBAAS,GAA3C,mBAAOi0B,EAAP,KAAkBC,EAAlB,KACA,EAAoCl0B,oBAAS,GAA7C,mBAAOm0B,EAAP,KAAmBC,EAAnB,KACA,EAAoCp0B,oBAAS,GAA7C,mBAAOq0B,EAAP,KAAmBC,EAAnB,KACA,EAAkCt0B,mBAAS,IAA3C,mBAAO0C,EAAP,KAAkBC,EAAlB,KAWA,OACE,qCACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAKolB,EAAG,EAAR,UACA,cAAC,IAAD,CAAW9mB,MAAOmlB,EAAOC,YAAaoB,MAAM,kBAAkBpY,UAAU,QACtE,cAAC,IAAD,CAAYnM,MAAM,SAAS3B,QAAQ,KAAKyW,cAAY,EAApD,+BAGA,cAAC,IAAD,+FAICib,EACC,cAAC,IAAD,CACE1xB,QAAQ,WACRT,WAAS,EACTuC,WAAS,EACT7B,OAAO,SACPC,MAAOwxB,EAAgBzvB,SACvBlC,MAAM,aACNizB,QAAS,SAAC5yB,GAAD,OAAOA,EAAE6yB,cAAcC,YAGlC,cAAC,IAAD,IAEF,cAAC,IAAD,CACEzyB,QACE,cAAC,IAAD,CACEE,QAAS+xB,EACTzxB,UAAWywB,EACXvxB,SAAU,SAACC,GAAD,OAAOuyB,EAAavyB,EAAEC,OAAOM,YAG3CZ,MAAM,8CAGR,cAAC,IAAD,CAAKozB,GAAI,EAAGxxB,MAAM,SAAlB,SACE,cAAC,IAAD,CAAQ3B,QAAQ,YAAYgB,MAAM,UAAUtB,MAAOmlB,EAAOzc,OAAQrH,QAAS,YA9C5D,SAACkB,GACxB,IAAMmxB,EAAMlpB,OAAOmpB,IAAIC,gBAAgB,IAAIC,KAAK,CAACtxB,KAC3CuU,EAAO6U,SAASmI,cAAc,KACpChd,EAAKxI,KAAOolB,EACZ5c,EAAKid,aAAa,WAAY,cAC9BpI,SAASqI,KAAKC,YAAYnd,GAC1BA,EAAKod,QAyCKC,CAAgB,OAACnC,QAAD,IAACA,OAAD,EAACA,EAAiBzvB,UAClC4wB,GAAc,IAFhB,2CASJ,cAAC,IAAD,CAAanzB,MAAO,CAAEmO,eAAgB,YAAtC,SACE,cAAC,IAAD,CAAQ7M,MAAM,UAAUC,UAAWyxB,IAAcE,EAAY7xB,QAAS,kBAAMgyB,GAAc,IAA1F,2BAKJ,eAAC,IAAD,CACEz0B,KAAMw0B,EACNt0B,QAAS,kBAAMu0B,GAAc,IAC7BzzB,SAAUmzB,EACVlzB,WAAS,EAJX,UAME,cAAC,IAAD,UAAc,qBACd,eAAC,IAAD,CAAmBG,MAAO,CAAEO,OAAQ,IAApC,UACE,qBACEP,MAAO,CACLE,QAAS,OACTC,cAAe,UAHnB,iFAQA,cAAC,IAAD,CACEE,MAAK,0CACLR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOiB,EACPhB,SAAU,SAACC,GAAD,OAAOgB,EAAahB,EAAEC,OAAOH,aAG3C,eAAC,IAAD,WACE,cAAC,IAAD,CAAQF,QAAQ,WAAWgB,MAAM,YAAYD,QAAS,kBAAMgyB,GAAc,IAA1E,mBACA,cAAC,IAAD,CACEnyB,KAAK,SACLI,MAAM,UACNhB,QAAQ,YACRiB,SAAUe,YAAkBb,MAAlB,OAAiCuwB,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAiBzvB,UAJ9D,+BAcV,SAASgwB,EAAT,GAAmD,IAArBjB,EAAoB,EAApBA,OAAQ1xB,EAAY,EAAZA,SACpC,EAAgCb,mBAAS,IAAzC,mBAAOyzB,EAAP,KAAiB4B,EAAjB,KACA,EAA8Cr1B,mBAAS,IAAvD,mBAAOs1B,EAAP,KAAwBC,EAAxB,KAEA,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAYh0B,QAAQ,KAAKyW,cAAY,EAArC,0CAGA,cAAC,IAAD,iEAGA,cAAC,IAAD,CACEzW,QAAQ,WACRT,WAAS,EACTU,OAAO,SACPF,MAAM,eACNa,KAAK,WACLqzB,aAAa,eACb/zB,MAAOgyB,EACP/xB,SAAU,SAACC,GAAD,OAAO0zB,EAAY1zB,EAAEC,OAAOH,UAExC,cAAC,IAAD,CACEF,QAAQ,WACRT,WAAS,EACTU,OAAO,SACPF,MAAM,mBACNa,KAAK,WACLqzB,aAAa,eACb/zB,MAAO6zB,EACP5zB,SAAU,SAACC,GAAD,OAAO4zB,EAAmB5zB,EAAEC,OAAOH,UAE/C,cAAC,IAAD,yGAKF,eAAC,IAAD,CAAaR,MAAO,CAAEmO,eAAgB,iBAAtC,UACE,cAAC,IAAD,CAAQ9M,QAASiwB,EAAjB,kBACA,cAAC,IAAD,CACEhwB,MAAM,UACNC,SAAUixB,IAAa6B,EACvBhzB,QAAS,kBAAMzB,EAAS4yB,IAH1B,iCAYR,SAASjB,IACP,MAAgCxyB,mBAAS,IAAzC,mBAAOyzB,EAAP,KAAiB4B,EAAjB,KACA,EAAwCr1B,oBAAS,GAAjD,mBAAOy1B,EAAP,KAAqBC,EAArB,KACMpC,EAAYC,cAEZoC,EAAS,WACbrC,EAAUsC,YAAoBnC,EAAUgC,GAAe,CACrD5B,gBAAiB,sBACjBC,eAAgB,qBAapB,OACE,eAAC,IAAD,CAAMjpB,UAAU,OAAhB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAY3H,MAAM,SAAS3B,QAAQ,KAAKyW,cAAY,EAApD,2BAGA,cAAC,IAAD,CACEzW,QAAQ,WACRT,WAAS,EACTU,OAAO,SACPF,MAAM,WACNa,KAAK,WACLqzB,aAAa,mBACb/zB,MAAOgyB,EACP/xB,SAjBoB,SAACC,GAAD,OAAO0zB,EAAY1zB,EAAEC,OAAOH,QAkBhDo0B,UAzBc,SAACl0B,GACN,UAAXA,EAAEm0B,MAA+B,gBAAXn0B,EAAEm0B,OAC1Bn0B,EAAEo0B,iBACFp0B,EAAEq0B,kBACFL,QAuBE,cAAC,IAAD,CACE3zB,QACE,cAAC,IAAD,CACEE,QAASuzB,EACT/zB,SAvBe,SAACC,GAAD,OAAO+zB,EAAgB/zB,EAAEC,OAAOM,YA0BnDZ,MAAM,4BAGV,cAAC,IAAD,CAAaL,MAAO,CAAEmO,eAAgB,YAAtC,SACE,cAAC,IAAD,CAAQ7M,MAAM,UAAUD,QAASqzB,EAAjC,yBAQR,SAASrD,EAAT,GAAwC,IAAXC,EAAU,EAAVA,OAC3B,EAAsCvyB,mBAAS,IAA/C,mBAAOi2B,EAAP,KAAoBC,EAApB,KACA,EAAwBl2B,mBAAS,IAAjC,mBAAOsb,EAAP,KAAa6a,EAAb,KACA,EAAgCn2B,mBAAS,IAAzC,mBAAOyzB,EAAP,KAAiB4B,EAAjB,KACA,EAA8Cr1B,mBAAS,IAAvD,mBAAOs1B,EAAP,KAAwBC,EAAxB,KACA,EAAwBv1B,oBAAS,GAAjC,mBAAOo2B,EAAP,KAAaC,EAAb,KAEM7yB,EAAWD,YAAkB0yB,GAC7BK,EACJ7C,IAAa6B,GAAmBiB,2BAAiB/yB,GAC7CgzB,GAAwD,IAA/BD,2BAAiB/yB,IAAuBA,EAAS4I,OAAS,EACzF,OACE,mCACGgqB,EACC,cAACK,EAAD,CACElE,OAAQ,kBAAM8D,GAAQ,IACtB7yB,SAAUA,EACViwB,SAAUA,EACVnY,KAAMA,IAGR,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKyX,GAAI,EAAT,SACE,cAAC,IAAD,CAAY7vB,MAAM,SAAS3B,QAAQ,KAAKyW,cAAY,EAApD,uCAIF,cAAC,IAAD,CAAK9U,MAAM,SAASC,GAAI,EAAxB,SACE,cAAC,IAAD,CAAY5B,QAAQ,YAApB,+IAKF,cAAC,IAAD,CAAK2B,MAAM,SAAX,SACE,cAAC,IAAD,CAAY3B,QAAQ,YAAYyD,WAAW,iBAA3C,SACE,uFAGJ,cAAC,IAAD,CAAK9B,MAAM,SAAS6vB,GAAI,EAAxB,SACE,cAAC,IAAD,CAAYxxB,QAAQ,YAAYyD,WAAW,iBAA3C,2FAKF,cAAC,IAAD,CACEzD,QAAQ,WACRT,WAAS,EACTuC,WAAS,EACTC,KAAM,EACN9B,OAAO,SACPF,MAAM,aACNG,MAAOw0B,EACPv0B,SAAU,SAACC,GAAD,OAAOu0B,EAAev0B,EAAEC,OAAOH,UAE1C+0B,GACE,cAAC,IAAD,CAAYxxB,WAAW,iBAAiB/D,MAAO,CAAE4M,SAAU,OAAQtL,MAAO,OAA1E,kFAIH,cAAC,IAAD,CACEhB,QAAQ,WACRT,WAAS,EACTU,OAAO,SACPF,MAAM,0BACNa,KAAK,WACLqzB,aAAa,eACb/zB,MAAOgyB,EACP/xB,SAAU,SAACC,GAAD,OAAO0zB,EAAY1zB,EAAEC,OAAOH,UAExC,cAAC,IAAD,CACEF,QAAQ,WACRT,WAAS,EACTU,OAAO,SACPF,MAAM,mBACNa,KAAK,WACLqzB,aAAa,eACb/zB,MAAO6zB,EACP5zB,SAAU,SAACC,GAAD,OAAO4zB,EAAmB5zB,EAAEC,OAAOH,aAGjD,eAAC,IAAD,CAAaR,MAAO,CAAEmO,eAAgB,iBAAtC,UACE,cAAC,IAAD,CAAQ9M,QAASiwB,EAAjB,oBACA,cAAC,IAAD,CACEhwB,MAAM,UACNC,UAAW8zB,EACXh0B,QAAS,WACPo0B,YAAelzB,GAAUmB,MAAK,SAAC2W,GAC7B6a,EAAQ7a,GACR+a,GAAQ,OANd,0BAmBZ,SAASI,EAAT,GAAgE,IAArClE,EAAoC,EAApCA,OAAQ/uB,EAA4B,EAA5BA,SAAU8X,EAAkB,EAAlBA,KAAMmY,EAAY,EAAZA,SAC3CH,EAAYC,cAClB,EAA0CvzB,mBACxCmF,EAAuBwxB,aADzB,mBAAOtxB,EAAP,KAAsBC,EAAtB,KAGMG,EAAW,YAAIsb,MAAM,KAAKtT,KAAI,SAACmpB,EAAGxW,GACtC,OAAOyW,YACLnG,EAAOvf,KAAKmK,EAAM,OAClB8E,EACAra,EAAiBV,OAerB,OACE,eAAC,IAAD,WACE,cAACyxB,EAAD,CACEC,gBAAgB,EAChBtxB,SAAUA,EACVJ,cAAeA,EACfC,iBAAkBA,IAEpB,eAAC,IAAD,CAAarE,MAAO,CAAEmO,eAAgB,iBAAtC,UACE,cAAC,IAAD,CAAQ9M,QAASiwB,EAAjB,kBACA,cAAC,IAAD,CAAQhwB,MAAM,UAAUD,QArB9B,WACEgxB,EACEI,YACElwB,EACA8X,EACAmY,EACA1tB,EAAiBV,MAejB,2BAQD,SAASyxB,EAAT,GAOH,IANFnwB,EAMC,EANDA,SACAowB,EAKC,EALDA,eACAtxB,EAIC,EAJDA,SACAJ,EAGC,EAHDA,cACAC,EAEC,EAFDA,iBACAhD,EACC,EADDA,QAEA,OACE,eAAC,IAAD,WACE,sBACErB,MAAO,CACLE,QAAS,OACTiO,eAAgB,iBAHpB,UAME,cAAC,IAAD,CAAY7N,QAAQ,KAAKyW,cAAY,EAArC,gCAGA,cAAC,IAAD,CAAazW,QAAQ,WAArB,SACE,eAAC,IAAD,CACEE,MAAO4D,EACP3D,SAAU,SAACC,GACT2D,EAAiB3D,EAAEC,OAAOH,QAH9B,UAMGkF,GACC,cAAC,IAAD,CAAUlF,MAAO0D,EAAuBC,UAAxC,wBAIF,cAAC,IAAD,CAAU3D,MAAO0D,EAAuB6xB,MAAxC,2BAGA,cAAC,IAAD,CAAUv1B,MAAO0D,EAAuBwxB,YAAxC,8BAGCI,GACC,cAAC,IAAD,CAAUt1B,MAAO0D,EAAuB8xB,WAAxC,gDAOPxxB,EAASgI,KAAI,SAACypB,GACb,OACE,qBAAK50B,QAASA,EAAU,kBAAMA,EAAQ40B,IAAO,GAA7C,SACE,cAAC,IAAD,CAEE50B,QAASA,EACT2C,UAAWiyB,EAAIjyB,UACfkyB,YAAY,GAHPD,EAAIjyB,UAAUC,oBAiB1B,IAAMC,EAAyB,CACpC8xB,WAAY,EACZD,MAAO,EACPL,YAAa,EACbvxB,UAAW,GAGN,SAASW,EAAiBV,GAC/B,OAAQA,GACN,KAAKF,EAAuB8xB,WAC1B,OAAOtD,IAAgBpb,WACzB,KAAKpT,EAAuB6xB,MAC1B,OAAOrD,IAAgByD,MACzB,KAAKjyB,EAAuBwxB,YAC1B,OAAOhD,IAAgBC,YACzB,KAAKzuB,EAAuBC,UAC1B,OAAOuuB,IAAgB0D,UACzB,QACE,MAAM,IAAIjW,MAAJ,mCAAsC/b,Q,0DCpoBlD,2JAGaiyB,EAAW,CACtB,CACEr3B,KAAM,eACN2I,OAAQ2uB,IACRj2B,MAAO,eACPk2B,YAAa,gBAEf,CACEv3B,KAAM,sBACN2I,OAAQ6uB,IACNn2B,MAAO,sBACTk2B,YAAa,gBAEf,CACEv3B,KAAM,SACN2I,OAAQ8uB,wBAAc,UACtBp2B,MAAO,SACPk2B,YAAa,UAEf,CACEv3B,KAAM,UACN2I,OAAQ8uB,wBAAc,WACtBp2B,MAAO,UACPk2B,YAAa,WAEf,CACEv3B,KAAM,WACN2I,OAAQ,wBACRtH,MAAO,KACPk2B,YAAa,aAIV,SAAS5qB,EAAmBJ,GACjC,OAAOgB,IAAcoG,MAAK,qBAAGhL,SAAwB4D,KAGvD,IAAMmrB,EAAyB,sBAExB,SAAS1qB,EAAiBhN,EAAM2I,GACrC,IAAMgvB,EAAoBnkB,KAAKC,UAAU,CAACzT,KAAMA,EAAMqB,MAAOrB,EAAM2I,OAAQA,EAAQ4uB,YAAa,OAChGtL,aAAa2L,QAAQF,EAAwBC,GAGxC,SAAS9pB,IACd,QAASoe,aAAaC,QAAQwL,GAGzB,SAASnqB,IACd,IAAMoqB,EAAoB1L,aAAaC,QAAQwL,GACzCG,EAASF,EAAoBnkB,KAAKoO,MAAM+V,GAAqB,KACnE,OAAQE,EAAM,UAAOR,EAAP,CAAiBQ,IAAUR,I,kQCpDrCvlB,EAAOgmB,EAAQ,IAWfC,EAAc,IAEdC,EAAa,I,SAKJC,E,oFAAf,WAA2BC,EAAW1mB,EAAa2mB,EAAIC,GAAvD,uBAAAzyB,EAAA,yDACM0yB,EAAK,EACLC,EAAiB,IAEjBF,EAAQjsB,OAAS4rB,GAJvB,6BAKWK,EAAQjsB,OAASmsB,EAAiBP,GAL7C,wBAMYQ,EAAMH,EAAQpf,MAAMsf,EAAgBA,EAAiBP,GAC3DO,GAAkBP,EAClBlzB,QAAQqB,IACN,QAlBQ,EAmBPmyB,GAAcpzB,SAAS,IACxBszB,EAAIpsB,OAAOlH,SAAS,IACpBszB,GAZR,SAc0BL,EAAUM,KAC5BR,EACAxmB,EACA2mB,EA1BQ,EA2BRE,EACAE,GAnBR,UAqB2B,IArB3B,OAqBgBpsB,OArBhB,uBAsBc,IAAIgV,MACR,iDACA,0BAxBV,QA2BMkX,GArCY,EAUlB,8BA+BQE,EAAMH,EAAQpf,MAAMsf,GAC1BzzB,QAAQqB,IAAI,OAAQmyB,EAAGpzB,SAAS,IAAKszB,EAAIpsB,OAAOlH,SAAS,IAAKszB,GAhChE,UAiCsBL,EAAUM,KAAKR,EAAYxmB,EAAa2mB,EAAIE,EAAIE,GAjCtE,eAiCQE,EAjCR,yBAmCSA,EAAMzf,MAAM,EAAGyf,EAAMtsB,OAAS,IAnCvC,6C,sBAuCA,SAASusB,EAAQC,GACf,OAF0B,WAElBA,KAA4B,EAG/B,SAASC,EAAuB30B,EAAS2C,EAAQf,GACtD,IAAIgzB,EAAa50B,GAAoB,EACjC60B,EAAYlyB,GAAkB,EAKlC,IAJAf,EAAiBA,GAEb6tB,IAAgBC,eAEGD,IAAgB0D,UAAW,CAChD,IACM2B,EAAkBtI,EAAOuI,MAAM,GACjCC,EAAS,EAIb,OAHAA,EAASF,EAAgBG,WAHV,EAG6BD,GAC5CA,EAASF,EAAgBI,cAAcT,EAAQ,IAAKO,GACpDF,EAAgBI,cAAcT,EAAQ,KAAMO,GACrCF,EACF,GAAIlzB,IAAmB6tB,IAAgByD,MAAO,CACnD,IACM4B,EAAkBtI,EAAOuI,MAAM,IACjCC,EAAS,EAKb,OAJAA,EAASF,EAAgBG,WAHV,EAG6BD,GAC5CA,EAASF,EAAgBI,cAAcT,EAAQ,IAAKO,GACpDA,EAASF,EAAgBI,cAAcT,EAAQ,KAAMO,GACrDF,EAAgBI,cAAcT,EAAQG,GAAaI,GAC5CF,EACF,GAAIlzB,IAAmB6tB,IAAgBC,YAAa,CACzD,IACMoF,EAAkBtI,EAAOuI,MAAM,IACjCC,EAAS,EAMb,OALAA,EAASF,EAAgBG,WAHV,EAG6BD,GAC5CA,EAASF,EAAgBI,cAAcT,EAAQ,IAAKO,GACpDA,EAASF,EAAgBI,cAAcT,EAAQ,KAAMO,GACrDA,EAASF,EAAgBI,cAAcT,EAAQG,GAAaI,GAC5DF,EAAgBI,cAAcT,EAAQI,GAAYG,GAC3CF,EAEP,MAAM,IAAI5X,MAAM,2B,SAILiY,E,gFAAf,WAAwClB,EAAWa,GAAnD,SAAApzB,EAAA,+EACSsyB,EACLC,EApGmB,EAGA,EAoGnBa,IALJ,4C,sBASO,SAAeM,EAAtB,sC,4CAAO,WACLnB,EACAa,EACApU,GAHK,eAAAhf,EAAA,6DAKC2zB,EAAY3U,EAAY4U,mBALzB,kBAMEC,EAAyBtB,EAAWa,EAAiBO,IANvD,4C,sBASA,SAAeE,EAAtB,sC,4CAAO,WACLtB,EACAa,EACAO,GAHK,iBAAA3zB,EAAA,6DAKD8zB,EAAYhJ,EAAOuI,MAAM,IACnBE,WAAW,GACfd,EAAU3H,EAAOhL,OAAO,CAACgU,EAAWV,EAAiBO,IAPtD,kBASErB,EAAYC,EA5HI,EAGN,EAyH2CE,IATvD,4C,sBAYA,SAAesB,EAAtB,oC,4CAAO,WAA4BxB,EAAWyB,GAAvC,mBAAAh0B,EAAA,6DAGHi0B,EADED,GAGqBf,IALpB,SAO2BQ,EAC9BlB,EACA0B,GATG,cAOCC,EAPD,OAWCC,EAAqBhoB,EAAKsO,OAAOyZ,GAXlC,kBAaE,IAAIvpB,YAAUwpB,IAbhB,4C,sBAgBA,SAAeC,EAAtB,oC,4CAAO,WACL7B,EACAa,GAFK,SAAApzB,EAAA,sEAIQsyB,EACXC,EArJmB,EAIJ,EAoJfa,GARG,oF,ygBC/IA,SAAeiB,EAAtB,kC,4CAAO,WAAqBC,GAArB,SAAAt0B,EAAA,+EACE,IAAI2Z,SAAQ,SAAC4a,GAAD,OAAana,WAAWma,EAASD,OAD/C,4C,sBAKA,SAASvU,EACd5K,EACAqf,GAEA,MAA0Bp6B,oBAAS,WACjC,IAAIq6B,EAAcnO,aAAaC,QAAQpR,GACvC,OAAIsf,EACK5mB,KAAKoO,MAAMwY,GAEbD,KALT,mBAAO3b,EAAP,KAAc6b,EAAd,KAQMC,EAAuB1X,uBAC3B,SAAC2X,GACe/b,IAAU+b,IAIxBF,EAASE,GACQ,OAAbA,EACFtO,aAAauO,WAAW1f,GAExBmR,aAAa2L,QAAQ9c,EAAKtH,KAAKC,UAAU8mB,OAG7C,CAAC/b,EAAO1D,IAGV,MAAO,CAAC0D,EAAO8b,GAGV,SAAShN,EAAsBmN,EAAoB7Q,GACxDrlB,qBAAU,WACR,IAAIm2B,EAAS3a,WAAW0a,EAAQ7Q,GAChC,OAAO,kBAAM+Q,aAAaD,OAIvB,SAASE,EAAYC,EAASC,GACnC,MAAsB/6B,mBAAS,GAAxBg7B,EAAP,oBACAx2B,qBAAU,WACR,IAAIsD,EAAW,kBAAMkzB,GAAY,SAAC1pB,GAAD,OAAOA,EAAI,MAE5C,OADAwpB,EAAQG,GAAGF,EAAWjzB,GACf,kBAAMgzB,EAAQ5yB,eAAe6yB,EAAWjzB,MAC9C,CAACgzB,EAASC,IAGR,SAASG,EACdz5B,EACA05B,GAEA,IAAMC,EAAUlV,iBAAUzkB,GAI1B,OAHI25B,EAAQvb,UAAYpe,GAAU05B,EAASC,EAAQvb,QAASpe,KAC1D25B,EAAQvb,QAAUpe,GAEb25B,EAAQvb,QAGV,SAASwb,EAAkB1rB,GAChC,IAAI2rB,EAAS3rB,EAAQC,WACrB,OAAO0rB,EAAOriB,MAAM,EAAG,GAAK,SAAMqiB,EAAOriB,MAAMqiB,EAAOlvB,OAAS,GAG1D,SAAemvB,EAAtB,oC,4CAAO,WACLzqB,EACAoT,GAFK,iBAAAte,EAAA,6DAID41B,EAAY,IAAIrnB,KAJf,SAKcrD,EAAWyqB,mBAAmBrX,EAAW,UALvD,YAKDrc,EALC,QAMMpG,MAAMoD,IANZ,sBAOG,IAAIuc,MACR,iCAAmC3N,KAAKC,UAAU7L,EAAOpG,MAAMoD,MAR9D,cAWLC,QAAQqB,IACN,oCACA,IAAIgO,MAAOC,UAAYonB,EAAUpnB,WAb9B,kBAeEvM,EAAOpG,OAfT,4C,sBAmBA,SAAS8I,IACd,OAAO8f,YAAc,qBAGhB,IAAMpf,EAA2C,sBAA7BQ,OAAOiW,SAAS+Z,SAE9B1wB,EAAmBE,GAAeQ,OAAOyW,OAIzC1hB,EAAgB,SAACk7B,GAC5B,IACE,OAAOC,UAAQC,cAAc,IAAI5Z,WAAWvO,KAAKoO,MAAM6Z,KACvD,MAAO9E,GACP,IACE,OAAO+E,UAAQC,cAAc,IAAI5Z,WAAWjQ,SAAY2pB,KACxD,MAAO9E,GACP,W,yJClGFiF,EAAY,KAEHh2B,EAAb,WACE,WAAYi2B,GAAO,IAAD,gCAclB91B,KAdkB,sBAcX,sBAAAJ,EAAA,yDACa,OAAdi2B,EADC,gCAEeE,IAAgBC,SAF/B,OAEHH,EAFG,qBAIL,EAAK1D,UAAY0D,EAJZ,SAKelC,YAAa,EAAKxB,UAAW,EAAK8D,sBALjD,cAKL,EAAKr1B,OALA,OAML,EAAKuxB,UAAU8C,GAAG,aAAc,EAAKiB,cACrC,EAAKC,cAAL,uCAAqB,WAAOC,GAAP,SAAAx2B,EAAA,+EAEZ,CAAC,EAAKgB,SAFM,2CAArB,kCAAAy1B,KAAA,eAPK,kBAWE,GAXF,4CAdW,KAgClB7N,gBAhCkB,uCAgCA,WAAO5J,GAAP,eAAAhf,EAAA,sEACQ0zB,YACtB,EAAKnB,UACL,EAAK8D,qBACLrX,GAJc,cACV0X,EADU,OAMhB1X,EAAY2X,aAAa,EAAKt3B,UAAWq3B,GANzB,kBAOT1X,GAPS,2CAhCA,2DA0ClBX,gBA1CkB,uCA0CA,WAAOjT,GAAP,eAAApL,EAAA,sEACQ6zB,YACtB,EAAKtB,UACL,EAAK8D,qBACLjrB,GAJc,cACVsrB,EADU,yBAMTvqB,IAAKsO,OAAOic,IANH,2CA1CA,2DAmDlB53B,iBAnDkB,sBAmDC,sBAAAkB,EAAA,sEACJo0B,YACX,EAAK7B,UACL,EAAK8D,sBAHU,mFAlDjBI,KAAKH,aAAgBJ,GAAQA,EAAKI,cAAkB,aACpDG,KAAKv2B,eAAiBg2B,EAClBA,EAAKh2B,eACL6tB,IAAgBC,YACpByI,KAAKn4B,QAAU43B,EAAOA,EAAK53B,aAAUzD,EACrC47B,KAAKx1B,OAASi1B,EAAOA,EAAKj1B,YAASpG,EACnC47B,KAAKJ,qBAAuBpD,YAC1BwD,KAAKn4B,QACLm4B,KAAKx1B,OACLw1B,KAAKv2B,gBAXX,2CA6BE,WACE,OAAOu2B,KAAKz1B,WA9BhB,M,ghBCkBM41B,EAA0B,CAC9B1tB,YAAa,EACbC,oBAAgBtO,EAChBoO,QAAQ,GAGG4tB,EAAb,WACE,WAAY3rB,EAAY3O,EAAM25B,GAAO,IAAD,gCAoBpCY,oBApBoC,sBAoBd,4BAAA92B,EAAA,sEACC4nB,YAAsB,EAAK1c,WAAY,EAAK7L,WAD7C,cAChBQ,EADgB,yBAEbA,EACJgI,KAAI,YAAiC,IAA9BxI,EAA6B,EAA7BA,UAAW6oB,EAAkB,EAAlBA,YAEjB,OADA6O,YAAsB,EAAK7rB,WAAY7L,EAAW6oB,GAC3C,CAAE7oB,YAAW23B,OAAQC,YAAsB/O,EAAYnc,UAE/DmrB,MAAK,SAACC,EAAUC,GAAX,OACJD,EAASH,OAAO3f,KACbrN,WACAqtB,cAAcD,EAASJ,OAAO3f,KAAKrN,gBAVtB,2CApBc,KAkCpCstB,mBAlCoC,uCAkCf,WAAOC,GAAP,SAAAv3B,EAAA,sEACNqpB,YAAgC,CAC3Cne,WAAY,EAAKA,WACjBoe,MAAO,EACPC,cAAegO,EACf/N,WAAY,IAAIgO,YALC,mFAlCe,2DA2CpC1N,6BA3CoC,uCA2CL,WAAOC,GAAP,SAAA/pB,EAAA,sEAChB8pB,YAA6B,CACxC5e,WAAY,EAAKA,WACjBC,OAAQ,EACR4e,wBAJ2B,mFA3CK,2DAmDpC0N,iBAnDoC,sBAmDjB,sBAAAz3B,EAAA,+EACV,EAAKkL,WAAWue,kCACrBC,IAAeC,OAFA,2CAnDiB,KAyDpC+N,cAzDoC,uCAyDpB,WACdjgB,EACAL,EACAxB,EACAyB,EACAH,GALc,6BAAAlX,EAAA,yDAMdqrB,EANc,+BAMP,KACPC,EAPc,iCASV7T,EAAOlL,OAAO,EAAKlN,WATT,oBAURgsB,EAVQ,sBAWJ,IAAI7P,MAAM,wBAXN,gCAaL,EAAKmc,YAAYvgB,EAAaxB,IAbzB,uBAeDsV,YAAe,CAC1BhgB,WAAY,EAAKA,WACjBsM,MAAO,EACP2T,gBAAiB1T,EACjB2T,qBAAsBhU,EACtBxB,SACAyV,OACAhU,OACAH,WACAoU,6BAxBY,mFAzDoB,mEAqFpCqM,YArFoC,uCAqFtB,WAAOvgB,EAAaxB,GAApB,SAAA5V,EAAA,+EACLipB,YAAe,EAAK/d,WAAY,EAAMkM,EAAaxB,IAD9C,2CArFsB,6DAyFpCwW,kBAzFoC,uCAyFhB,WAAO/sB,GAAP,2BAAAW,EAAA,6DAAkBqoB,EAAlB,yCACL+D,YAAkB,CAC7BlhB,WAAY,EAAKA,WACjBsM,MAAO,EACP2T,gBAAiB9rB,EACjBgpB,kBALgB,mFAzFgB,2DAkGpCO,gBAlGoC,uCAkGlB,WAAO5J,GAAP,SAAAhf,EAAA,+EACT,EAAKnB,SAAS+pB,gBAAgB5J,IADrB,2CAlGkB,2DAsGpCX,gBAtGoC,uCAsGlB,WAAOjT,GAAP,SAAApL,EAAA,+EACT,EAAKnB,SAASwf,gBAAgBjT,IADrB,2CAtGkB,sDAClCqrB,KAAKvrB,WAAaA,EAClBurB,KAAKl6B,KAAOA,EACZk6B,KAAK53B,SAAW+4B,IAAsBC,YAAYt7B,EAAM25B,GAJ5D,2CAaE,WACE,OAAOO,KAAK53B,SAASQ,YAdzB,wBAiBE,WACE,MAAqB,UAAdo3B,KAAKl6B,SAlBhB,KAAas6B,EAOJT,O,uCAAS,WAAOlrB,EAAY3O,EAAM25B,GAAzB,eAAAl2B,EAAA,6DACR83B,EAAW,IAAIjB,EAAO3rB,EAAY3O,EAAM25B,GADhC,SAER4B,EAASj5B,SAASuB,OAFV,gCAGP03B,GAHO,2C,0DAqGlB,IAAMC,EAAgBrT,IAAMnjB,cAAc,MAEnC,SAASy2B,EAAT,GAAuC,IAAbv2B,EAAY,EAAZA,SAC/BwzB,YAAYgD,IAAmB,UAC/B,MAKKj7B,cALL,sBACEY,EADF,EACEA,SACA8X,EAFF,EAEEA,KACAwiB,EAHF,EAGEA,qBACAh4B,EAJF,EAIEA,eAEMP,EAAoBC,cAApBD,gBACFuL,EAAaoO,cACnB,EAA4Blf,qBAA5B,mBAAO+Q,EAAP,KAAesR,EAAf,KAGA,EAAkDsD,YAChD,0BACA,IAFF,mBAAOoY,EAAP,KAA0BC,EAA1B,KAKA,EAA0CrY,YACxC,iBACA6W,GAFF,mBAAKyB,EAAL,KAAqB9vB,EAArB,KAIA,EAA2DnO,mBAAS,MAApE,mBAAOk+B,EAAP,KAA+BhwB,EAA/B,KAGA,EAAsCyX,YAAqB,cAAe,GAA1E,mBAAOyW,EAAP,KAAoB+B,EAApB,KAEIF,EAAepvB,SAAWqvB,IAC5BD,EAAiBzB,EACjBruB,EAAkBquB,IAGpBh4B,qBAAU,WACR,sBAAC,kCAAAoB,EAAA,yDACM0V,EADN,yCAEU,MAFV,WAKK2iB,EAAepvB,OALpB,iCAWWitB,EAAO,CACXI,aALmB,WACnB/tB,EAAkBquB,GAClBtuB,EAAyB,OAIzBpI,eAAgBm4B,EAAen4B,eAC/B5B,QAAS+5B,EAAe/5B,QACxB2C,OAAQo3B,EAAep3B,QAf9B,SAiBoB41B,EAAOT,OAAOlrB,EAAY,SAAUgrB,GAjBxD,OAiBK/qB,EAjBL,gEAmBKjM,QAAQqB,IAAR,qDACI6K,EAAU,kCACV,KAAE5K,aACJ4K,GAAO,YAAS,KAAE5K,aAEpBb,EAAgByL,EAAS,CAAEzP,QAAS,UACpC4M,EAAkBquB,GAClBtuB,EAAyB,MA1B9B,8BA8BM6C,EA9BN,wBA+BS7M,OAC2BzD,IAA/Bw9B,EAAenvB,YACX+nB,YACEnG,EAAOvf,KAAKmK,EAAM,OAClB2iB,EAAenvB,YACfhJ,GAEF,IAAIs3B,UACD,WACC,MAA8BW,EAC5BE,EAAelvB,gBADTqvB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,WAGf,OAAOC,IAAKC,UAAU1+B,KACpBkS,SAAYssB,GACZtsB,SAAYqsB,GACZN,GAPH,IAvCZ,UAkDkBrB,EAAOT,OAAOlrB,EAAY,QAAS,CAAE5M,YAlDvD,QAkDG6M,EAlDH,eAoDCsR,EAAUtR,GApDX,yDAAD,KAsDC,CACDD,EACAwK,EACA2iB,EACAF,EACAD,EACA3vB,EACA5I,EACAO,IAqBF,IAAM04B,EAAiB,WACrB,OAAO/qB,KAAKC,UACV,YAAIqN,MAAMqb,GAAajwB,QAAQsB,KAAI,SAAC2S,GAAD,OACjC8L,aAAaC,QAAb,cAA4B/L,SAIlC,EAAsCpgB,mBAASw+B,KAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAYA,IAyCIzwB,GAzCJ,GAAoCtB,mBAAQ,WAC1C,IAAK2O,EACH,MAAO,CAAC,GAAI,IAGd,IAAMqjB,EAAajO,EAAOvf,KAAKmK,EAAM,OAC/BtN,EAAkB,YAAI+S,MAAMqb,GAAajwB,QAAQsB,KAAI,SAAC2S,GAC1D,IAAIzQ,EAAUknB,YAAmB8H,EAAYve,EAAKta,GAC/Cb,UACChF,EAAOisB,aAAaC,QAAb,cAA4B/L,IACvC,MAAO,CACL3Q,SAAU,CACRX,YAAasR,EACbrR,oBAAgBtO,EAChBoO,QAAQ,GAEVa,WAAYuuB,EAAenvB,cAAgBsR,EAC3CzQ,UACA1P,KAAc,IAARmgB,EAAY,eAAiBngB,GAAI,kBAAemgB,OAIpDwe,EAAmB1yB,OAAOC,KAAK4xB,GAAmBtwB,KAAI,SAACsH,GAC3D,IAAQ9U,EAAS89B,EAAkBhpB,GAA3B9U,KACR,MAAO,CACLwP,SAAU,CACRX,iBAAarO,EACbsO,eAAgBgG,EAChBlG,QAAQ,GAEVc,QAAS,IAAIY,YAAUwB,SAAYgD,IACnC9U,KAAK,GAAD,OAAKA,EAAL,eACJyP,WAAYuuB,EAAelvB,iBAAmBgG,MAKlD,MAAO,CADU/G,EAAgB0X,OAAOkZ,GACtB5wB,KAEjB,CAACsN,EAAM8gB,EAAa6B,EAAgBF,EAAmBU,IAvC1D,qBAAOh5B,GAAP,MAAiBuI,GAAjB,MA0DA,OAhBIkwB,IACFjwB,GAAqB,2BAChBiwB,GADgB,IAEnBzuB,SAAU,CACRX,iBAAarO,EACboO,QAAQ,EACRE,eAAgBmvB,EAAuBj5B,UACvCa,eAAgBo4B,EAAuBp4B,eACvC5B,QAASg6B,EAAuBh6B,QAChC2C,OAAQq3B,EAAuBr3B,QAEjC8I,QAASuuB,EAAuBj5B,UAChCyK,WAAYuuB,EAAepvB,UAK7B,cAAC8uB,EAAcx1B,SAAf,CACE1G,MAAO,CACLsP,SACAuK,OACA9X,WACAs6B,uBACAG,iBACA9vB,oBACA4vB,oBACAC,uBACAv4B,YACAuI,mBACAI,WA7GN,YAAwD,IAAlCnO,EAAiC,EAAjCA,KAAMM,EAA2B,EAA3BA,gBAC1B,GADqD,EAAVsO,YACnBpO,IAApBF,EACFN,GAAQisB,aAAa2L,QAAb,cAA4BuE,GAAen8B,GACnDk+B,EAAe/B,EAAc,OACxB,CACL,IAAMgC,EAAQE,IAAKO,YAAYP,IAAKC,UAAUO,aACxCC,EAAYx+B,EAAgB6jB,UAC5Bia,EAAaC,IAAKC,UAAUQ,EAAWX,EAAON,GAEhDkB,EAAoB,eAAQjB,GAChCiB,EAAqBz+B,EAAgB0E,UAAUC,YAAc,CAC3DjF,OACAo+B,WAAYtsB,SAAYssB,GACxBD,MAAOrsB,SAAYqsB,IAErBJ,EAAqBgB,KA+FnBC,eAnFN,SAAwBxvB,EAAUyvB,GAChC,GAAIzvB,EAASV,iBAAmBU,EAASZ,OAAQ,CAC/C,IAAImwB,EAAoB,eAAQjB,GAChCiB,EAAqBvvB,EAASV,eAAe7J,YAAYjF,KAAOi/B,EAChElB,EAAqBgB,QAErB9S,aAAa2L,QAAb,cAA4BpoB,EAASX,aAAeowB,GACpDR,EAAeF,MA6Eb14B,iBACAmI,yBACAC,4BAhBJ,SAmBG7G,IAKA,SAASgR,IACd,OAAOhQ,qBAAWs1B,GAAe5sB,OAG5B,SAASiL,IACd,IAAIjL,EAASsH,IACb,EAAiC8mB,YAC/BpuB,EAAO2rB,oBACP3rB,EAAO2rB,qBAFT,mBAAK0C,EAAL,KAAuBC,EAAvB,KAIIpjB,EAAU,CACZlL,EAAO9L,WADK,mBAERm6B,EACAA,EAAiB3xB,KAAI,qBAAGxI,aACxB,KASN,MAAO,CANPgX,EAAaif,YACXjf,GACA,SAACqjB,EAASC,GAAV,OACED,EAAQlzB,SAAWmzB,EAAQnzB,QAC3BkzB,EAAQE,OAAM,SAACzkB,EAAKzJ,GAAN,OAAYyJ,EAAI5I,OAAOotB,EAAQjuB,UAE7B+tB,GAGf,SAASI,IACd,IAAI1uB,EAASsH,IACb,OAAO8mB,YAAapuB,EAAO2rB,oBAAqB3rB,EAAO2rB,qBAGlD,SAASgD,EAAwB3uB,GACtC4uB,YAAa5uB,EAAO2rB,qBAGf,SAASkD,EAAwB3iB,GACtC,MAAyBwiB,IAAlBI,EAAP,oBACA,OAAOlzB,mBACL,wBACEsQ,EAAI,OACA4iB,QADA,IACAA,GADA,UACAA,EACIjsB,MAAK,SAAC1P,GAAD,yBAAaA,EAAQ04B,cAArB,iBAAa,EAAgB3f,YAA7B,aAAa,EAAsB9K,OAAO8K,aAFnD,aACA,EAEIhY,UAAU2K,WACd,OACN,CAACiwB,EAAgB5iB,IAId,SAAS6iB,EAAe76B,GAC7B,IAsCW,EAtCX,EAAuC86B,YAAe96B,GAAtD,mBAAK6oB,EAAL,KAAkBkS,EAAlB,KACA,EAAyC,OAAXlS,QAAW,IAAXA,KAAa1Q,MAAMjL,OAAOK,KACpDqqB,YAAsB/O,EAAYnc,MAClC,GAFEsL,EAAN,EAAMA,KAAMG,EAAZ,EAAYA,MAAO5B,EAAnB,EAAmBA,OAGnB,EAAiCukB,YAAe9iB,GAAhD,mBAAKgjB,EAAL,KAAeC,EAAf,KACA,EAAgCC,YAAaljB,GAAvChd,EAAN,EAAMA,KAAMmgC,EAAZ,EAAYA,OAAQC,EAApB,EAAoBA,QAEpB,IAAKL,EACH,OAAO,KAGT,GAAI/iB,GAAQijB,EACV,IAEE,MAAO,CACL1kB,SACAsB,SAHiBwjB,YAAcL,EAAStuB,MAApCmL,SAIJG,OACAG,QACAmjB,UAAWtgC,EACXugC,YAAaJ,EACbK,aAAcJ,EACdK,OAAO,GAET,MAAO/+B,GACP,MAAO,CACL6Z,SACAsB,SAAU,EACVG,OACAG,QACAmjB,UAAW,UACXC,YAAa,UACbC,aAAc,KACdC,OAAO,GAKb,OAAKzjB,EAYE,KAXE,CACLzB,OAAM,iBAAEsS,QAAF,IAAEA,OAAF,EAAEA,EAAajT,gBAAf,QAA2B,EACjCiC,SAAU,EACVG,KAAM,KACNG,MAAOnY,EACPs7B,UAAW,MACXC,YAAa,MACbE,OAAO,GAON,SAAS3yB,IACd,MAQI1F,qBAAWs1B,GAPbl4B,EADF,EACEA,SACAuI,EAFF,EAEEA,gBACAI,EAHF,EAGEA,WAOF,MAAO,CACL3I,WACAuI,kBACAG,kBAbF,EAIEA,kBAUAC,aACA6wB,eAfF,EAKEA,eAWAhxB,sBAhBF,EAMEA,sBAWAC,yBAjBF,EAOEA,6B,ihBC/cEyyB,EAAoBrW,IAAMnjB,cAItB,MAEGowB,EAAc,sCAGdE,EAAqB,uCAC3B,SAASmJ,EAAT,GAA2C,IAAbv5B,EAAY,EAAZA,SACnC,EAAgCse,YAC9B,qBACA4R,GAFF,mBAAO/qB,EAAP,KAAiBC,EAAjB,KAKMqE,EAAanE,mBAAQ,kBAAM,IAAIk0B,aAAWr0B,EAAU,YAAW,CACnEA,IAGF,OACE,cAACm0B,EAAkBx4B,SAAnB,CAA4B1G,MAAO,CAAE+K,WAAUC,cAAaqE,cAA5D,SACGzJ,IAKA,SAAS6X,IACd,IAAI4hB,EAAUz4B,qBAAWs4B,GACzB,IAAKG,EACH,MAAM,IAAI1f,MAAM,8BAElB,OAAO0f,EAAQhwB,WAGV,SAASvE,IACd,IAAIu0B,EAAUz4B,qBAAWs4B,GACzB,IAAKG,EACH,MAAM,IAAI1f,MAAM,8BAElB,MAAO,CAAE5U,SAAUs0B,EAAQt0B,SAAUC,YAAaq0B,EAAQr0B,aAGrD,SAASs0B,IACd,IAAID,EAAUz4B,qBAAWs4B,GACzB,IAAKG,EACH,MAAM,IAAI1f,MAAM,8BAElB,OAAO0f,EAAQt0B,WAAa+qB,GAAeuJ,EAAQt0B,WAAairB,EAG3D,SAASxY,IACd,IAAM6hB,EAAUz4B,qBAAWs4B,GAC3B,IAAKG,EACH,MAAM,IAAI1f,MAAM,8BAElB,IAAM5U,EAAWs0B,EAAQt0B,SACzB,OAAIA,IAAakrB,wBAAc,UACtB,kBACElrB,IAAakrB,wBAAc,WAC7B,mBAEF,GAGF,SAASqI,EAAe96B,GAAwB,IAAD,EAC9C6L,EAAaoO,IACb8hB,EAAWC,YAAMnwB,EAAD,OAAa7L,QAAb,IAAaA,OAAb,EAAaA,EAAW2K,YAC9C,EAA8BuvB,YAAY,sBACxC,sBAAAv5B,EAAA,+EAAaX,EAAY6L,EAAWqgB,eAAelsB,GAAa,MAAhE,2CACA+7B,GAFF,mBAAOlT,EAAP,KAAoBuR,EAApB,KAwBA,OApBA76B,qBAAU,WACR,GAAKS,EAAL,CAGA,IAAIi8B,EAA2C,KACzC3d,EAAKzS,EAAWqwB,gBAAgBl8B,GAAW,SAACm8B,GAE7CF,GACAA,EAAavvB,KAAKQ,OAAOivB,EAAKzvB,OAC/BuvB,EAAarmB,WAAaumB,EAAKvmB,WAE/BqmB,EAAeE,EACfC,YAASL,EAAUI,OAGvB,OAAO,WACLtwB,EAAWwwB,4BAA4B/d,OAGxC,CAACzS,EAAD,iBAAa7L,QAAb,IAAaA,OAAb,EAAaA,EAAW2K,kBAAxB,QAAsC,GAAIoxB,IACtC,CACL9F,YACEpN,GACA,SAACyT,EAASC,GAAV,QACID,KACAC,GACFD,EAAQ5vB,KAAKQ,OAAOqvB,EAAQ7vB,OAC5B4vB,EAAQ1mB,WAAa2mB,EAAQ3mB,YAEjCwkB,GAIG,SAASoC,EAAmB3wB,EAAY7L,GAAgC,IAArBy8B,EAAoB,wDACtEV,EAAWC,YAAMnwB,EAAY7L,EAAU2K,YAC7C+vB,YAAaqB,EAAUU,GAGlB,SAAS/E,EAAsB7rB,EAAY7L,EAAW6oB,GAC3D,IAAMkT,EAAWC,YAAMnwB,EAAY7L,EAAU2K,YAC7CyxB,YAASL,EAAUlT,EAAa,CAAE6T,gBAAgB,IAG7C,SAAeC,EAAtB,oC,4CAAO,WACL9wB,EACAmL,GAFK,SAAArW,EAAA,+EAMCi8B,QAAaC,IAAIC,oBAAoBjxB,EAAYmL,IANlD,4C,4OCnHQ,SAAS+lB,EAAT,GAAiD,IAAlBniC,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QAC5CgR,EAASsH,cACf,EAAgCrY,oBAAS,GAAzC,mBAAOiiC,EAAP,KAAiBC,EAAjB,KACMC,EAAS,WAAOphB,MAAM5P,KAAKJ,EAAOtM,SAASP,QAAQkgB,WAA1C,KACf,OACE,eAAC,IAAD,CAAYvkB,KAAMA,EAAME,QAASA,EAASe,WAAS,EAAnD,UACE,cAAC,IAAD,6BACA,eAAC,IAAD,WACE,cAAC,IAAD,CACEQ,MAAM,cACNR,WAAS,EACTqB,KAAM8/B,GAAY,WAClB1gC,QAAQ,WACRC,OAAO,SACPC,MAAO0gC,IAET,cAAC,IAAD,CACEngC,QACE,cAAC,IAAD,CACEE,SAAU+/B,EACVvgC,SAAU,kBAAMwgC,GAAaD,MAGjC3gC,MAAM,cAGV,cAAC,IAAD,UACE,cAAC,IAAD,CAAQgB,QAASvC,EAAjB,wBAMD,SAASqiC,EAAT,GAAkD,IAAlBviC,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QAC3C,EAAgCC,oBAAS,GAAzC,mBAAOiiC,EAAP,KAAiBC,EAAjB,KACA,EAAkBt/B,cAAXC,EAAP,oBACA,OACE,eAAC,IAAD,CAAYhD,KAAMA,EAAME,QAASA,EAASe,WAAS,EAAnD,UACE,cAAC,IAAD,8BACA,eAAC,IAAD,WACE,cAAC,IAAD,CACEQ,MAAM,WACNR,WAAS,EACTqB,KAAM8/B,GAAY,WAClB1gC,QAAQ,WACRC,OAAO,SACPC,MAAOoB,EAAQW,WAEjB,cAAC,IAAD,CACExB,QACE,cAAC,IAAD,CACEE,SAAU+/B,EACVvgC,SAAU,kBAAMwgC,GAAaD,MAGjC3gC,MAAM,cAGV,cAAC,IAAD,UACE,cAAC,IAAD,CAAQgB,QAASvC,EAAjB,0B,2WC5DF+I,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgd,KAAM,CACJ7kB,QAAS,OACTqf,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,GAC5B+W,WAAY,gBAID,SAASkiB,EAAT,GAMX,IALF5gC,EAKC,EALDA,MACAH,EAIC,EAJDA,MACAghC,EAGC,EAHDA,UACAC,EAEC,EAFDA,OACAC,EACC,EADDA,WAEQj9B,EAAoBC,cAApBD,gBACFk9B,EAAcvc,mBACd7b,EAAUvB,IAahB,OACE,sBAAK+B,UAAWR,EAAQ2b,KAAxB,UACE,cAAC3kB,EAAA,EAAD,CACEqhC,SAAU,SAACvc,GAAD,OAAUsc,EAAY5iB,QAAUsG,GAC1C9iB,WAAS,EACTi/B,UAAWA,EACX7gC,MAAOA,EACPkhC,UAAQ,EACRpO,QAAS,SAAC5yB,GAAD,OAAOA,EAAE6yB,cAAcC,UAChC5pB,UAAWR,EAAQu4B,SACnB9hC,WAAS,EACT0hC,WAAYA,EACZlhC,MAAOA,EACPuhC,YAAY,IAEd,cAACr3B,EAAA,EAAD,CAAYlJ,QA3BC,WACf,IAAIsgC,EAAWH,EAAY5iB,QACvB+iB,IACFA,EAASnO,SACT7H,SAASkW,YAAY,QACrBv9B,EAAgB,UAAD,OAAWjE,GAAS,CACjCC,QAAS,OACT0qB,iBAAkB,SAoBpB,SACE,cAAC,IAAD,MAEDsW,EAAS,cAAC,EAAD,CAAQ9gC,OAAkB,IAAX8gC,EAAkB9gC,EAAQ8gC,IAAa,QAKtE,IAAMQ,EAAkBh6B,aAAW,SAACC,GAAD,MAAY,CAC7Cg6B,gBAAiB,CACf7hC,QAAS,OACTC,cAAe,SACf+e,WAAY,SACZpQ,aAAc/G,EAAMI,QAAQ,QAIhC,SAAS65B,EAAT,GAA4B,IAAVxhC,EAAS,EAATA,MAChB,EAAoC6oB,IAAMtqB,UAAS,GAAnD,mBAAOkjC,EAAP,KAAmBC,EAAnB,KACM94B,EAAU04B,IAEhB,OACE,qCACE,cAACv3B,EAAA,EAAD,CAAYlJ,QAAS,kBAAM6gC,GAAc,IAAzC,SACE,cAAC,IAAD,MAEF,cAACC,EAAA,EAAD,CAAQvjC,KAAMqjC,EAAYnjC,QAAS,kBAAMojC,GAAc,IAAvD,SACE,cAACniC,EAAA,EAAD,CAAe6J,UAAWR,EAAQ24B,gBAAlC,SACE,cAAC,IAAD,CAAQvhC,MAAOA,EAAOuoB,KAAM,IAAKqZ,eAAa,WC1EtCt6B,aAAW,SAACC,GAAD,MAAY,CACvCs6B,aAAc,CACZvzB,aAAc/G,EAAMI,QAAQ,IAE9Bkc,QAAS,CACPvV,aAAc/G,EAAMI,QAAQ,IAE9BqB,UAAW,CACTZ,SAAU,S,2FCjBC,SAAS05B,EAAT,GAAmE,IAA9CtmB,EAA6C,EAA7CA,KAAM0X,EAAuC,EAAvCA,IAAK4L,EAAkC,EAAlCA,UAAkC,IAAvBvW,YAAuB,MAAhB,GAAgB,EAATwZ,EAAS,iBAC/E,EAAgCxjC,oBAAS,GAAzC,mBAAOyjC,EAAP,KAAiBC,EAAjB,KAMA,OAJK/O,GAAgB,OAAT1X,IACV0X,EAAM,gGAGJ8O,IAAa9O,EACR,KAIP,iCACExL,IAAKwL,EACLjrB,MAAO62B,EACPlX,IAAKkX,EACLt/B,MAAO,CACL+F,MAAOgjB,EACPjjB,OAAQijB,EACRjgB,gBAAiB,QACjBwc,aAAcyD,EAAO,GAEvBZ,QAAS,kBAAMsa,GAAY,KACvBF,I,+BCRJ16B,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvC26B,SAAU,CACRxiC,QAAS,OACTC,cAAe,MACf+e,WAAY,UAEdyjB,UAAW,CACTl9B,YAAasC,EAAMI,QAAQ,IAE7BqB,UAAW,CACTtJ,QAAS,OACTC,cAAe,MACf+e,WAAY,SACZ/Q,eAAgB,SAChBoR,UAAWxX,EAAMI,QAAQ,IAE3BqG,SAAU,CACR/I,YAAasC,EAAMI,QAAQ,QAIhB,SAASy6B,EAAT,GAA0C,IAAD,EAAjBhkC,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QACnC0F,EAAasI,cAAbtI,SACF4E,EAAUvB,IACVg7B,EAAgBC,cAChBC,EAAkBv+B,EAASmO,MAAK,SAAChO,GAAD,OAAOA,EAAE8J,cAC/C,EAAwB1P,mBAAS,OAAjC,mBAAOikC,EAAP,KAAaC,EAAb,KACMv0B,EAAO,OAAGq0B,QAAH,IAAGA,GAAH,UAAGA,EAAiBr0B,eAApB,aAAG,EAA0BC,WACpCu0B,EAAYllB,cACZ3U,EAAmBC,cAezB,OACE,eAAC5J,EAAA,EAAD,CAAYmC,SAAS,KAAKjD,KAAMA,EAAME,QAASA,EAASe,WAAS,EAAjE,UACE,eAACC,EAAA,EAAD,gCACqB,IACnB,cAACkX,EAAA,EAAD,CAAMrW,OAAO,SAAS2N,KAAM,sBAA5B,wBAIF,eAACvO,EAAA,EAAD,WACE,cAACgC,EAAA,EAAD,0JAGA,cAACA,EAAA,EAAD,qFAGA,sBAAK6H,UAAWR,EAAQI,UAAxB,UACE,cAAC25B,EAAA,EAAD,CAAa7iC,QAAQ,WAAWsJ,UAAWR,EAAQoF,SAAnD,SACE,eAAC40B,EAAA,EAAD,CAAQ5iC,MAAOwiC,EAAMviC,SAAU,SAACC,GAAD,OAAOuiC,EAAQviC,EAAEC,OAAOH,QAAvD,UACE,cAACiM,EAAA,EAAD,CAAUjM,MAAO,MAAjB,SACE,sBAAKoJ,UAAWR,EAAQs5B,SAAxB,UACE,cAACJ,EAAD,CACE5O,IAAK,KACL1X,KAAM,KACNsjB,UAAW,MACXvW,KAAM,GACNnf,UAAWR,EAAQu5B,YAErB,8BAAMt5B,EAAmB,MAAQ,oBAGpCw5B,EACEQ,QAAO,SAACC,GAAD,OAAeA,EAAU50B,SAAW40B,EAAUnE,UACrD3yB,KAAI,SAAC82B,GAAD,aACH,cAAC72B,EAAA,EAAD,CAAUjM,MAAO8iC,EAAUnE,OAA3B,SACE,sBAAKv1B,UAAWR,EAAQs5B,SAAxB,UACE,cAACJ,EAAD,CACE5O,IAAK4P,EAAUlE,QACfE,UAAWgE,EAAUtkC,KACrB+pB,KAAM,GACNnf,UAAWR,EAAQu5B,YAErB,cAAC3rB,EAAA,EAAD,CACErW,OAAO,SACP0N,IAAI,WACJC,KACE,qCAA8Bg1B,EAAU50B,SACxCw0B,EALJ,UAQI75B,EAAmB,GAAH,oBAAWi6B,EAAUtkC,YAArB,QAA6Bo7B,YAAkBkJ,EAAU50B,SAAzD,MAAwE40B,EAAUnE,aAhBlEmE,EAAUnE,gBAuB1D,cAAC/9B,EAAA,EAAD,CAAQC,QArEC,WACf,IAAMkiC,EAAkB,IAAI/iB,gBAC5B+iB,EAAgBC,OAAO,UAAW90B,GAClC60B,EAAgBC,OAAO,OAAQR,GAC/BO,EAAgBC,OAAO,SAAU,OACjCD,EAAgBC,OAAO,kBAAkB,GACzCh5B,OAAO5L,KAAP,sCACiC2kC,GAC/B,SACA,mCA4D+BjjC,QAAQ,WAAWyoB,KAAK,SAASznB,MAAM,UAAlE,gCAMJ,cAACH,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAQd,QAAQ,WAAWgB,MAAM,YAAYynB,KAAK,SAAS1nB,QAASvC,EAApE,wB,wQC5H6BmsB,aAAaC,QAChD,uB,4CCCWuY,GAAb,oDACE,WAAYC,EAAKC,GAAS,IAAD,+BACvB,cAAMD,IACD1kC,KAAO,eACZ,EAAK2kC,OAASA,EAHS,EAD3B,qCAAkCxjB,QAQ3B,SAAeyjB,GAAtB,uC,8CAAO,WACL/iB,EACA8X,EACA3E,GAHK,qCAAArvB,EAAA,8FAI0B,GAJ1B,IAIHk/B,wBAJG,SAOD3tB,EAAS,CAAE4tB,QADXA,EAAU,GACUjjB,UACT,QAAXA,EACF3K,EAAO6tB,MAAQ,WACN/P,IACT8P,EAAQ,gBAAkB,mBAC1B5tB,EAAO8d,KAAOxhB,KAAKC,UAAUuhB,IAZ1B,SAeYtvB,MAAM,8BAAD,OAA+Bi0B,GAAQziB,GAfxD,cAeDyW,EAfC,gBAgBQqX,GAAsBrX,EAAMkX,GAhBpC,oF,kCAmBQG,G,mFAAf,WAAqCrX,EAAMkX,GAA3C,eAAAl/B,EAAA,sEACmBgoB,EAAKsX,OADxB,WACMA,EADN,QAEYj7B,QAFZ,qBAGQ66B,GAAoBlX,EAAKgX,QAAU,KAAOhX,EAAKgX,OAAS,KAHhE,yCAIa,MAJb,aAMU,IAAIF,GAAaQ,EAAKngC,MAAO6oB,EAAKgX,QAN5C,gCAQSM,EAAKr9B,QARd,4C,sBCKA,IAAMs9B,GAAY,IAAIC,KAAKC,kBAAa5kC,EAAW,CACjD6kC,sBAAuB,EACvBC,sBAAuB,IAGnBz8B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCw8B,KAAM,CACJz1B,aAAc/G,EAAMI,QAAQ,GAC5Bq8B,aAAa,aAAD,OAAez8B,EAAMgB,QAAQgb,WAAWC,YAIzC,SAASygB,GAAT,GAA4C,IAAlB7lC,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QACzCgR,EAASsH,cACb,EAAyB8mB,aACvBpuB,EAAOssB,iBACPtsB,EAAOssB,kBAFJA,EAAL,oBAIIhzB,EAAUvB,KACV68B,EAAkBC,cACtB,EAAmCC,eAAnC,mBAAOC,EAAP,KAAwBC,EAAxB,KAEA,EAAyBtG,cAAlBI,EAAP,oBACMiE,EAAgBC,cACtB,EAAsB/jC,mBAAW8jC,EAAgB,UAAY,UAA7D,mBAAOkC,EAAP,KAAYC,EAAZ,KACA,EAAsCjmC,mBAAS,IAA/C,mBAAOkmC,EAAP,KAAoBC,EAApB,KACA,EAAkCnmC,mBAAS,IAA3C,mBAAOugC,EAAP,KAAkB6F,EAAlB,KACA,EAAsCpmC,mBAAS,IAA/C,mBAAOwgC,EAAP,KAAoB6F,EAApB,KACA,EAAwCrmC,mBAAS,IAAjD,mBAAOsmC,EAAP,KAAqBC,EAArB,KAQA,SAAS1lC,EAASsW,GACJ,WAAR6uB,EACF7uB,EAAS,CAAE+uB,cAAa3F,YAAWC,eAClB,UAARwF,IACT7uB,EAAS,CAAEmvB,iBAEbR,EA9BsD,2CA8BtCU,CAASrvB,GAAS,CAChCsvB,UAAW,WACT/G,YAAwB3uB,GACxBhR,OAjCkD,4CAsCxD,yCAAA6F,EAAA,yDACEsgC,EADF,EACEA,YACA3F,EAFF,EAEEA,UACAC,EAHF,EAGEA,cACA8F,EAJF,EAIEA,cAJF,gCAO0BzB,GAAe,OAAD,oBAAsByB,IAP9D,OAOQ/B,EAPR,OAQI2B,EAAc3B,EAAUmC,QACxBnG,EAAYgE,EAAUtkC,KACtBugC,EAAc+D,EAAUoC,OACK,QAAzBpC,EAAUqC,aACZrG,EAAY,WAAaA,GAZ/B,cAgBMtjB,EAAO,IAAI1M,aAAU21B,GACzBP,EAAgB1oB,EAAMsjB,EAAWC,GAjBnC,UAkBqBzvB,EAAO2e,6BAA6BzS,GAlBzD,eAkBQ2Q,EAlBR,yBAmBSA,EAAK,IAnBd,4CAtCwD,wBAkBxDppB,qBAAU,WACHs/B,GACHmC,EAAO,YAER,CAACnC,IAsCJ,IAAIpD,IAAQ,EAKZ,MAJY,UAARsF,IACFtF,GAAgC,KAAxB4F,EAAal6B,QAAiBk6B,EAAaO,WAAW,OAI9D,eAAClmC,EAAA,EAAD,CAAYd,KAAMA,EAAME,QAASA,EAAjC,UACE,cAACgB,EAAA,EAAD,wBACA,eAACC,EAAA,EAAD,WACGq8B,EACC,eAACr6B,EAAA,EAAD,wDAC6C,IAC1CmiC,GAAU2B,OAAOzJ,EAAmB0J,qBAFvC,WAKA,cAACnb,EAAA,EAAD,MAECkY,GACD,eAACkD,GAAA,EAAD,CACEvlC,MAAOukC,EACPiB,UAAU,UACVC,eAAe,UACfr8B,UAAWR,EAAQm7B,KACnB9jC,SAAU,SAACC,EAAGF,GAAJ,OAAcwkC,EAAOxkC,IALjC,UAOE,cAAC0lC,GAAA,EAAD,CAAK7lC,MAAM,iBAAiBG,MAAM,YACf,cAAC0lC,GAAA,EAAD,CAAK7lC,MAAM,cAAcG,MAAM,UAClD,cAAC0lC,GAAA,EAAD,CAAK7lC,MAAM,eAAeG,MAAM,cAG3B,WAARukC,GAAqBlC,EA+BV,YAARkC,EACF,cAAC5d,GAAA,EAAD,CAAMC,gBAAc,EAApB,SACGyb,EAAcQ,QAAO,SAAAC,GAAS,OAAIA,EAAU50B,WAASlC,KAAI,SAAC82B,GAAD,OACxD,cAAC6C,GAAD,CAEE7C,UAAWA,EACX8C,iBAAkBxH,GAAkB,IAAIjsB,MACtC,SAAC1P,GAAD,OACEA,EAAQ04B,OAAO3f,KAAKrN,aAAe20B,EAAU50B,WAEjD9O,SAAUA,EACV2B,SAAUujC,GAPLxB,EAAU50B,cAWX,UAARq2B,EACF,qCACE,cAAC3kC,EAAA,EAAD,CACEC,MAAM,yBACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAO6kC,EACP5kC,SAAU,SAACC,GAAD,OAAO4kC,EAAgB5kC,EAAEC,OAAOH,MAAMI,SAChDygC,WAAS,EACT9/B,SAAUujC,IAEXO,GAAgB5F,GACf,cAACzoB,EAAA,EAAD,CACE1I,KAAI,qCAAgC+2B,GACpC1kC,OAAO,SACP0N,IAAI,WAHN,+BAOE,QAEJ,KAnEF,eAAC,IAAMg4B,SAAP,WACE,cAACjmC,EAAA,EAAD,CACEC,MAAM,qBACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOykC,EACPxkC,SAAU,SAACC,GAAD,OAAOwkC,EAAexkC,EAAEC,OAAOH,QACzC6gC,WAAS,EACT9/B,SAAUujC,IAEZ,cAAC1kC,EAAA,EAAD,CACEC,MAAM,aACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAO8+B,EACP7+B,SAAU,SAACC,GAAD,OAAOykC,EAAazkC,EAAEC,OAAOH,QACvCe,SAAUujC,IAEZ,cAAC1kC,EAAA,EAAD,CACEC,MAAM,eACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAO++B,EACP9+B,SAAU,SAACC,GAAD,OAAO0kC,EAAe1kC,EAAEC,OAAOH,QACzCe,SAAUujC,UA0ClB,eAAC3jC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASvC,EAAjB,oBACS,YAARimC,GACC,cAAC3jC,EAAA,EAAD,CACEF,KAAK,SACLI,MAAM,UACNC,SAAUujC,IAAYrF,GACtBp+B,QAAS,kBAAMzB,EAAS,CAAE0/B,YAAWC,cAAa0F,iBAJpD,uBAcV,SAASkB,GAAT,GAA4E,IAAD,EAAlD7C,EAAkD,EAAlDA,UAAW1jC,EAAuC,EAAvCA,SAAU2B,EAA6B,EAA7BA,SAAU6kC,EAAmB,EAAnBA,gBACtD,EAAwBrnC,oBAAS,GAAjC,mBAAOH,EAAP,KAAagpB,EAAb,KACMsb,EAAYllB,cACZsoB,IAAkBF,EAExB,OACE,eAAC,IAAMC,SAAP,WACE,sBAAKrmC,MAAO,CAAEE,QAAS,QAAvB,UACE,eAAC+nB,GAAA,EAAD,CAAUvf,QAAM,EAACrH,QAAS,kBAAMumB,GAAQ,SAAChpB,GAAD,OAAWA,MAAnD,UACE,cAAC+N,GAAA,EAAD,UACE,cAAC21B,EAAD,CACE5O,IAAK4P,EAAUlE,QACfE,UAAWgE,EAAUtkC,KACrB+pB,KAAM,OAGV,cAACT,GAAA,EAAD,CACEpE,QACE,eAAClN,EAAA,EAAD,CACErW,OAAO,SACP0N,IAAI,WACJC,KACE,qCAA8Bg1B,EAAU50B,SACxCw0B,EALJ,oBAQGI,EAAUtkC,YARb,QAQqBo7B,YAAkBkJ,EAAU50B,SAC9C40B,EAAUnE,OAAV,YAAwBmE,EAAUnE,OAAlC,KAA8C,UAIpDvgC,EAAO,cAAC,KAAD,IAAiB,cAAC,KAAD,OAE3B,cAACwC,EAAA,EAAD,CACEF,KAAK,SACLI,MAAM,UACNC,SAAUA,GAAY+kC,EACtBjlC,QAAS,kBACPzB,EAAS,CACP0/B,UAAWgE,EAAUtkC,KACrBugC,YAAa+D,EAAUnE,OACvB8F,YAAa3B,EAAU50B,WAR7B,SAYG43B,EAAgB,QAAU,UAtCOhD,EAAUtkC,MAyChD,cAAC0pB,GAAA,EAAD,CAAUC,GAAI/pB,EAAMgqB,QAAQ,OAAOC,eAAa,EAAhD,SACE,cAACuY,EAAD,CACE5gC,MAAO8iC,EAAU50B,QACjBrO,MAAK,UAAKijC,EAAUnE,OAAf,wB,iEC1QF,IAAIoH,KAAK/7B,OAAOg8B,UA2JP,IAAIC,I,6DCvJbC,GAAgB,WAC3B,IAAMh9B,EAAa,GAkBnB,OAjBA+H,WAAQ0L,SAAQ,SAACxL,GACf,IAAMqxB,EAAOrxB,EAAO3S,KAAK2nC,MAAM,KAAK,GAChCj9B,EAAEs5B,IAECt5B,EAAE4N,aAOP5N,EAAEs5B,GAAQ,CACRh/B,UAAW2N,EAAOjD,QAClB1P,KAAM2S,EAAO3S,KAAK2nC,MAAM,KAAKzmB,KAAK,SAIjCxW,EAnBoB,GAuBvBk9B,G,WAGJ,aAAe,0BAFf7C,WAEc,EACZ3I,KAAK2I,MAAQ,G,oFAGf,WAAel0B,EAAYg3B,GAA3B,oBAAAliC,EAAA,+EACS,IAAI2Z,SAAQ,SAAC4a,EAAS4N,GAC3B,GAAIj3B,EAAWk3B,eAAiBzQ,IAIhC,YAA+B92B,IAA3B,EAAKukC,MAAM8C,GAyBN3N,EAAQ,EAAK6K,MAAM8C,SAxB1BniC,MAAM,4CAAD,OAA6CmiC,IAAcnjC,MAC9D,SAACipB,GACCA,EAAKsX,OAAOvgC,MAAK,SAACipB,GAChB,GAAuB,OAAnBA,EAAKjc,KAAKs2B,MAAoC,OAAnBra,EAAKjc,KAAKu2B,KACvC/N,OAAQ15B,QACH,GACqB,IAA1BmtB,EAAKjc,KAAKs2B,KAAK77B,QACW,IAA1BwhB,EAAKjc,KAAKu2B,KAAK97B,OAEf+tB,OAAQ15B,QACH,GAA8B,IAA1BmtB,EAAKjc,KAAKs2B,KAAK77B,OACxB+tB,EAAQvM,EAAKjc,KAAKu2B,KAAK,GAAGC,YACrB,GAA8B,IAA1Bva,EAAKjc,KAAKu2B,KAAK97B,OACxB+tB,EAAQvM,EAAKjc,KAAKs2B,KAAK,GAAGE,WACrB,CACL,IAAMC,GACHxa,EAAKjc,KAAKs2B,KAAK,GAAGE,MAAQva,EAAKjc,KAAKu2B,KAAK,GAAGC,OAAS,EACxD,EAAKnD,MAAM8C,GAAcM,EACzBjO,EAAQ,EAAK6K,MAAM8C,WAtB3B3N,OAAQ15B,OAHd,2C,gEAqCW4nC,GAAa,IAAIR,G,oBC9DG,IAAIt3B,aACnC,gDAGwB,IAAIA,aAC5B,+CCsBiB,IAAIA,aACrB,gDAEgB,IAAIA,aAAU,gDAEb,IAAIA,aACrB,gDAGgB,IAAIA,aAAU,gDACH,IAAIm3B,IAAI,CACnC,8CACA,iDCxBqB,IAAIA,IAAI,CAC7B,iD,cC7BK,SAASY,KACd,OAAOC,oBAAQ,sBAAC,4BAAA3iC,EAAA,sEACKD,MAJN,mDAGC,cACRioB,EADQ,gBAEDA,EAAKsX,OAFJ,mFAGb,I,cCAU,SAASsD,GAAT,GAKX,IAJF3oC,EAIC,EAJDA,KACA4oC,EAGC,EAHDA,QACA1oC,EAEC,EAFDA,QACA2oC,EACC,EADDA,OAEA,EAAwB1oC,mBAASyoC,GAAjC,mBAAOxoC,EAAP,KAAaC,EAAb,KACA,OACE,eAACS,EAAA,EAAD,CACEd,KAAMA,EACNe,QAAS,kBAAMV,EAAQuoC,IACvB1oC,QAASA,EACTc,SAAU,kBAAM6nC,EAAOzoC,EAAK4B,SAC5Bf,WAAS,EALX,UAOE,cAACC,EAAA,EAAD,2BACA,cAACC,EAAA,EAAD,UACE,qBACEC,MAAO,CACLE,QAAS,OACTC,cAAe,UAHnB,SAME,cAACC,EAAA,EAAD,CACEC,MAAM,OACNR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOxB,EACPyB,SAAU,SAACC,GAAD,OAAOzB,EAAQyB,EAAEC,OAAOH,cAIxC,eAACW,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASvC,EAAjB,mBACA,cAACsC,EAAA,EAAD,CAAQF,KAAK,SAASI,MAAM,UAA5B,wB,yBCfO,SAASomC,GAAT,GAAiD,IAAlB9oC,EAAiB,EAAjBA,KAAME,EAAW,EAAXA,QAClD,EAAqBic,cAAdC,EAAP,oBACMnL,EAAaoO,cACbnO,EAASsH,cACP9S,EAAoBC,cAApBD,gBACR,EAAkCvF,oBAAS,GAA3C,mBAAO4oC,EAAP,KAAkBC,EAAlB,KACA,EAAoC7oC,mBAAS,IAA7C,mBAAO8oC,EAAP,KAAmBC,EAAnB,KACMC,EAAaC,cAWbC,EAAa,uCAAG,0DAAAtjC,EAAA,yDAAOujC,EAAP,+BAAoB,GAApB,SAEC,IAAfA,EAFc,uBAGhB5jC,EAAgB,kDAAmD,CACjEhE,QAAS,UAJK,0CAYVqgC,YAA0B9wB,EAAYmL,GAZ5B,OAWZmtB,EAXY,OAcf9E,QACC,SAACpN,GAAD,OACU,OAARA,GACAA,EAAIhzB,QAAQkZ,MAAMjL,OAAOme,qBAAkB9d,qBAE9C/E,KAAI,YAA6B,IAA1BxI,EAAyB,EAAzBA,UAAWf,EAAc,EAAdA,QACjB,MAAO,CACLe,YACAf,QAAS24B,aAAsB34B,EAAQyN,MACvCyL,MAAOlZ,EAAQkZ,UAKfisB,EAAuB,GAC7BD,EAAchrB,SAAQ,SAACkrB,GACrB,IAAMvuB,EAAMuuB,EAAGplC,QAAQ+Y,KAAK/X,WACxBmkC,EAAqBtuB,GACvBsuB,EAAqBtuB,GAAK9U,KAAKqjC,GAE/BD,EAAqBtuB,GAAO,CAACuuB,MAK3BC,EAAQr9B,OAAOC,KAAKk9B,GACjBnjC,EAAI,EAxCK,aAwCFA,EAAIqjC,EAAMn9B,QAxCR,uBAyCVo9B,EAAYH,EAAqBE,EAAMrjC,KAC/BkG,OAAS,GA1CP,wBA2CR6Q,EAAOusB,EAAU,GAAGtlC,QAAQ+Y,KA3CpB,UA4CaiT,YACzBnf,EAAO9L,UACPgY,GA9CY,WA4CRwsB,EA5CQ,OAmDW,IAArBD,EAAUp9B,QACVq9B,EAAat3B,OAAOq3B,EAAU,GAAGvkC,WApDvB,wBAuDNs/B,EAAYmF,YAChBzsB,EACAnM,EAAWk3B,aACXgB,GAEI5I,EAASmE,EAAUnE,OACrBmE,EAAUnE,OACVnjB,EAAK/X,WACTJ,QAAQqB,IAAR,oBAAyBi6B,IACzB76B,EAAgB,aAAD,OAAc66B,GAAU,CACrC7+B,QAAS,SAjEC,UAmENooC,GACJF,EACAD,EACAvsB,EACAsnB,EAAUznB,SACV/L,EACAD,EACAvL,GA1EU,QAwCgBW,GAAK,EAxCrB,yCAiFZ+zB,YAAM,KAjFM,yBAoFZ2P,GAAQ74B,EAAQkL,GApFJ,QAuFlBwH,IAvFkB,yDAyFlB3e,QAAQC,MAAM,yCAAd,MACAQ,EAAgB,8CAA+C,CAC7DhE,QAAS,SA3FO,UA+FZ04B,YAAM,KA/FM,eAiGlB10B,EAAgB,qBAAsB,CAAEhE,QAAS,SAjG/B,UAkGZ2nC,EAAcC,EAAa,GAlGf,0DAAH,qDAqGb1lB,EAAQ,WACZslB,EAAc,IACdhpC,KAEIyC,EAAwC,YAA7BsmC,EAAWe,cAE5B,OACE,cAACzG,EAAA,EAAD,CAAQ0G,qBAAsBlB,EAAW/oC,KAAMA,EAAME,QAASA,EAA9D,SACG6oC,EACC,eAAC5nC,EAAA,EAAD,WACE,cAACgC,EAAA,EAAD,CAAmB/B,MAAO,CAAE8O,aAAc,EAAG4U,UAAW,UAAxD,8BAGA,qBACE1jB,MAAO,CACLE,QAAS,OACTiO,eAAgB,SAChB7I,QAAS,QAJb,SAOE,cAACC,EAAA,EAAD,SAIJ,qCACE,cAACzF,EAAA,EAAD,uDACA,eAACC,EAAA,EAAD,WACE,eAACgC,EAAA,EAAD,WACE,wCADF,+EAIA,eAACA,EAAA,EAAD,2CACgC,IAC9B,cAACiV,EAAA,EAAD,CACE1I,KAAM,kDACN3N,OAAO,SACP0N,IAAI,WAHN,uCAMQ,IACR,cAAC,KAAD,CAAiBrO,MAAO,CAAE8O,aAAc,UAT1C,6EAYA,cAAC/M,EAAA,EAAD,8NAMA,cAAC3B,EAAA,EAAD,CACEC,MAAK,mCACLR,WAAS,EACTS,QAAQ,WACRC,OAAO,SACPC,MAAOqnC,EACPpnC,SAAU,SAACC,GAAD,OAAOonC,EAAcpnC,EAAEC,OAAOH,MAAMI,cAGlD,eAACO,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAASmhB,EAAOlhB,MAAM,UAA9B,oBAGA,cAACF,EAAA,EAAD,CACEG,SAAUA,EACVF,QAAS,WACPumC,GAAa,GACbK,IACGvkC,MAAK,WACJY,EAAgB,2BAA4B,CAC1ChE,QAAS,YAEXsnC,GAAa,MAEdjkC,OAAM,SAACC,GACNU,EAAgB,8CAAD,OACiCV,EAAIK,YAClD,CAAE3D,QAAS,UAEbsnC,GAAa,OAGnBtmC,MAAM,YACN+/B,WAAS,EApBX,6B,SAgCGqH,G,6FAAf,WACEF,EACAM,EACA9sB,EACAH,EACA/L,EACAD,EACAvL,GAPF,mBAAAK,EAAA,yDASgC,IAA1BmkC,EAAe39B,OATrB,iEAaqC,sBAAC,kCAAAxG,EAAA,2DAC9BokC,EAAWD,EACZt8B,KAAI,SAACu8B,GAAD,OAAcA,EAAS/kC,aAC3Bq/B,QAAO,SAAC2F,GAAD,OAAaA,EAAQ93B,OAAOs3B,MACnCS,OAJ+B,yCAQzBF,GARyB,uBAeZl5B,EAAWqgB,eAAesY,GAfd,UAgBlB,OAhBkB,gDAiBzBA,GAjByB,wBAqBV/Z,YAA6B,CACnD5e,aACAC,SACA4e,oBAAqBoa,EAAe,GAAG7lC,QAAQ+Y,OAxBf,2CAqB3BtN,EArB2B,uBA2B3BA,GA3B2B,2CAAD,GAbrC,OAaMw6B,EAbN,OA6CWjkC,EAAI,EA7Cf,YA6CkBA,EAAI6jC,EAAe39B,QA7CrC,qBA+CkE,KADxDg+B,EAAeL,EAAe7jC,IACnBjB,UAAUkN,OAAOg4B,GA/CtC,sBAgDUC,EAAalmC,QAAQsX,OAAS,GAhDxC,kCAiDczK,EAAOusB,cACX8M,EAAanlC,UACbklC,EACAC,EAAalmC,QAAQsX,OACrByB,EACAH,GAtDV,QA6C6C5W,GAAK,EA7ClD,4D,+BA6De0jC,G,mFAAf,WAAuB74B,EAAQkL,GAA/B,SAAArW,EAAA,sEACQ85B,YAAwB3uB,GADhC,OAEEkL,EAAWxO,KAAI,SAACxI,GAAD,OACbw8B,YAAmB1wB,EAAOD,WAAY7L,GAAW,MAHrD,4C,2IC7SaolC,GAAgB,CAC3B1gC,OAAQ,CACNpD,QAAS,UAEX+jC,WAAY,CACV/nC,MAAO,OACPsL,SAAU,OACV7I,WAAY,OACZwhB,WAAY,SCcD,SAAS+jB,GAAT,GAA+B,IAATvgB,EAAQ,EAARA,KAEnC,OADyBzf,cAEhB,cAACigC,GAAD,CAAkBxgB,KAAMA,IAExB,cAACygB,GAAD,CAAmBzgB,KAAMA,IAIpC,SAASwgB,GAAT,GAAqC,IAATxgB,EAAQ,EAARA,KAC1B,EAAoChqB,oBAAS,GAA7C,mBAAO0qC,EAAP,KAAmBC,EAAnB,KACA,EAA0B9E,eAAnBC,EAAP,oBACMh1B,EAAaoO,cACbnO,EAASsH,cACT2wB,EAAaC,cACb2B,EAAY5B,GAAc,IAAI6B,KAAmB7B,GACjDvkC,EAAW,IAAIqmC,GAAkBh6B,EAAYC,EAAQ+0B,GAC3D,OACE,qCACE,cAACv6B,GAAA,EAAD,CAAS7B,MAAM,cAAf,SACE,cAAC8B,EAAA,EAAD,CAAYwe,KAAMA,EAAM1nB,QAAS,kBAAMqoC,GAAc,IAArD,SACE,cAAC,KAAD,QAGJ,cAAChqC,EAAA,EAAD,CACEd,KAAM6qC,EACN3qC,QAAS,kBAAM4qC,GAAc,IAC7B7pC,WAAS,EAHX,SAKE,sBACEG,MAAO,CACLE,QAAS,OACTiO,eAAgB,gBAChBhO,cAAe,SACf2F,OAAQ,QALZ,UAQE,cAAC,KAAD,CACEtC,SAAUA,EACVmmC,UAAWA,EACXG,eAAgB,CACd/jC,MAAO,OACPgkC,UAAW,UAGf,cAAC5oC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAQC,QAAS,kBAAMqoC,GAAc,IAArC,6BAQZ,SAASF,GAAT,GAAsC,IAATzgB,EAAQ,EAARA,KAC3B,EAA0B6b,eAAnBC,EAAP,oBACMh1B,EAAaoO,cACbnO,EAASsH,cACT2wB,EAAaC,cACb2B,EAAY5B,GAAc,IAAI6B,KAAmB7B,GACjDvkC,EAAW,IAAIqmC,GAAkBh6B,EAAYC,EAAQ+0B,GAC3D,OACE8E,GACE,cAAC,KAAD,CAAYrpC,QAAQ,UAApB,SACG,SAAC0pC,GAAD,OACC,sBAAKhqC,MAAO,CAAEE,QAAS,QAAvB,UACE,eAAC8B,EAAA,EAAD,CAAKC,MAAM,SAAX,UACE,cAACqI,GAAA,EAAD,CAAS7B,MAAM,cAAf,SACE,cAACrH,EAAA,EAAD,yBAAQpB,MAAOopC,GAAc1gC,OAAQpI,QAAQ,YAAYgB,MAAM,WAAc2oC,uBAAYD,IAAzF,IAAsGjhB,KAAMA,EAA5G,SACE,cAAC,KAAD,SAGJ,cAAC5mB,EAAA,EAAD,CAAYnC,MAAOopC,GAAcC,WAAjC,qBAEF,cAACa,GAAA,EAAD,2BACMC,uBAAYH,IADlB,IAEE79B,aAAc,CACZC,SAAU,SACVC,WAAY,QAEd+9B,gBAAiB,CACfh+B,SAAU,MACVC,WAAY,SAEdg+B,WAAY,CAAErqC,MAAO,CAAEslB,aAAc,SACrCglB,qBAAmB,EACnBC,aAAW,EAZb,SAcE,cAAC,KAAD,CACE/mC,SAAUA,EACVmmC,UAAWA,EACXG,eAAgB,CAAE/jC,MAAO,oB,IAUnC8jC,G,oDACJ,WACEh6B,EACAC,EACA+0B,GACC,IAAD,+BACA,cAAMh1B,EAAYC,EAAQ,CACxB06B,WAAY,YAET3F,gBAAkBA,EAJvB,E,gFAOF,WACEhX,EACAd,EACA0d,GAHF,oBAAA9lC,EAAA,+EAKS,IAAI2Z,SAAQ,SAACknB,EAAWrd,GAC7B,EAAK0c,gBAAL,wDAAgChX,EAAId,EAAS0d,GAAO,CAClDjF,YACArd,gBARN,2C,uHAaA,WACEuiB,EACAD,GAFF,oBAAA9lC,EAAA,+EAIS,IAAI2Z,QAAJ,uCAAY,WAAO4a,EAAS/Q,GAAhB,qBAAAxjB,EAAA,sDACbgmC,EAAS,GADI,eAEAD,GAFA,aAAA/lC,EAAA,kCAAAA,EAAA,6DAENkpB,EAFM,aAGf8c,EAHe,SAIP,IAAIrsB,SAAQ,SAACknB,GACjB,EAAKX,gBAAL,wDAAgChX,EAAGA,GAAIA,EAAGd,QAAS0d,GAAO,CACxDjF,YACArd,eAPS,wBAGRnjB,KAHQ,yRAYjBk0B,EAAQyR,GAZS,gEAAZ,0DAJT,2C,8DAzB8BzjC,aCvD1B0jC,I,2DCjCY9iC,aAAW,SAACC,GAAD,MAAY,CACvC2G,QAAS,CACPm8B,aAAc,WACdC,UAAW,UAEbvjB,gBAAiB,CACfrnB,QAAS,OACTiO,eAAgB,eAChBoR,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,IAE9Bmf,YAAa,CACX9hB,WAAYuC,EAAMI,QAAQ,GAC1B1C,YAAasC,EAAMI,QAAQ,GAC3B2G,aAAc/G,EAAMI,QAAQ,IAE9Be,KAAM,CACJ5H,MAAO,QACPsL,SAAU,GACV2S,UAAW,KACXzQ,aAAc,KACdi8B,QAAS,IAEXC,MAAO,CACL1pC,MAAO,QACPyC,WAAY,IACZgC,MAAO,KAETklC,kBAAmB,CACjB/qC,QAAS,OACTC,cAAe,SACfgO,eAAgB,SAChB+Q,WAAY,SACZ5Z,QAAS,GACTia,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,IAE9B6b,MAAO,CACLje,MAAO,MACPD,OAAQ,MACRolC,UAAW,UAEbC,MAAO,CACLjrC,QAAS,OACTgf,WAAY,SACZ/Q,eAAgB,cDZE,IAAIg2B,KAAKC,kBAAa5kC,EAAW,CACrD6kC,sBAAuB,EACvBC,sBAAuB,EACvB8G,aAAa,KAGTC,GACE,EADFA,GAEO,EAFPA,GAGQ,EAYRC,GAAY,GAKZC,GAAwB,GAExBC,GAAe,IAAIrH,KAAKC,aAAa,QAAS,CAClDpkC,MAAO,WACPyrC,SAAU,QAGZ,SAASC,GAAc1wB,GACrB,OACEA,EAAWqoB,QAAO,SAACsI,GAAD,YAAqCnsC,IAA7B8rC,GAAUK,EAAG1nC,eAA2BkH,SAClE6P,EAAW7P,OAIA,SAASiE,KACtB,IAAMU,EAASsH,cACf,EAA6B2D,cAA7B,mBAAOC,EAAP,KAAmBojB,EAAnB,KACA,EAAoDr/B,oBAAS,GAA7D,mBAAO6sC,EAAP,KAA2BC,EAA3B,KACA,EAAkE9sC,oBAChE,GADF,mBAAO+sC,EAAP,KAAkCC,EAAlC,KAGA,EAAkDhtC,oBAAS,GAA3D,mBAAOitC,EAAP,KAA0BC,EAA1B,KACA,EAAgDltC,oBAAS,GAAzD,mBAAOmtC,EAAP,KAAyBC,EAAzB,KACA,EAAwCptC,mBAASssC,IAAjD,mBAAOe,EAAP,KAAqBC,EAArB,KACA,EAAqCv/B,cAA7BtI,EAAR,EAAQA,SAAUw5B,EAAlB,EAAkBA,eACZ30B,EAAmBC,cAEzB,EAA2BvK,oBAAS,GAA3ButC,EAAT,oBACMC,EAASlF,KACTtE,EAAkBv+B,EAASmO,MAAK,SAAChO,GAAD,OAAOA,EAAE8J,cACzC+9B,EAAkBpO,GAAUsN,GAAc1wB,GAC5CyxB,EAAmBzxB,EACnBwxB,GAAmBJ,IAAiBf,KACtCoB,EAAgB,YAAOzxB,IACN6gB,MAAK,SAACl3B,EAAG+nC,GACxB,IAAMC,EAAOrB,GAAU3mC,EAAEV,YACnB2oC,EAAOtB,GAAUoB,EAAEzoC,YAIzB,OAFAU,OAAanF,IAATmtC,GAA+B,OAATA,GAAiB,EAAIA,EAC/CD,OAAaltC,IAATotC,GAA+B,OAATA,GAAiB,EAAIA,EAC3CR,IAAiBf,GACf1mC,EAAI+nC,GACE,EACC/nC,EAAI+nC,EACN,EAEA,EAGLA,EAAI/nC,GACE,EACC+nC,EAAI/nC,EACN,EAEA,KAMf,IAWMkoC,EAAgB7xB,EACnBqoB,QAAO,SAACsI,GAAD,OAAQL,GAAUK,EAAG1nC,eAC5BuI,KAAI,SAACm/B,GAAD,OAAQL,GAAUK,EAAG1nC,eACzB6oC,QAAO,SAACnoC,EAAG+nC,GAAJ,OAAU/nC,EAAI+nC,IAAG,GAgBrBK,EAAuBnrB,uBAC3B,SAAC5d,EAAWgpC,GACN1B,GAAUtnC,EAAUC,cAAgB+oC,IACtC1B,GAAUtnC,EAAUC,YAAc+oC,EAC9BtB,GAAc1wB,IAChBsxB,GAAe,SAACvS,GAAD,OAAkBA,QAIvC,CAAC/e,IAEGiyB,EAAuBvhC,mBAAQ,WACnC,OAAO+gC,EAAiBjgC,KAAI,SAACm/B,GAC3B,OAAOtiB,IAAM2G,MAAK,SAACuS,GACjB,OACE,cAAC2K,GAAD,CAEElpC,UAAW2nC,EACXwB,YAAaJ,GAFRpB,EAAG1nC,oBAOf,CAACwoC,EAAkBM,IAEhBK,GAAW/jC,EAAmB,QAAU,SAE9C,OACE,qCACA,eAAC2d,EAAA,EAAD,CAAOhnB,MAAO,CAAEE,QAASssC,EAAkB,QAAU,QAArD,UAME,cAACa,GAAD,CACEb,gBAAiBA,EACjBK,cAAeA,EACf9J,gBAAiBA,IAEnB,eAAC/gC,EAAA,EAAD,CAAKsrC,GAAI,CAACC,QAAS,oBAAqBjoB,aAAc,iBAAkBe,GAAI,EAAGC,GAAI,EAAnF,UACE,eAACtkB,EAAA,EAAD,CAAK9B,QAAQ,OAAOiO,eAAe,SAAnC,UACE,cAACnM,EAAA,EAAD,CAAKwrC,GAAI,EAAT,SACCjB,EAAO3lC,SAAW2lC,EAAO3lC,OAAO6mC,cAAgB,cAACnE,GAAD,CAAYvgB,KAAMqkB,OAEnE,eAACprC,EAAA,EAAD,CAAKwrC,GAAI,EAAGvrC,MAAM,SAAlB,UACE,cAACqI,GAAA,EAAD,CAAS7B,MAAM,cAAcwD,OAAK,EAAlC,SACE,cAAC7K,EAAA,EAAD,CACEpB,MAAOopC,GAAc1gC,OACrBpI,QAAQ,YACRgB,MAAM,UACND,QAAS,WACP,OAAQ+qC,GACN,KAAKf,GAEH,YADAgB,EAAgBhB,IAElB,KAAKA,GAEH,YADAgB,EAAgBhB,IAElB,KAAKA,GAEH,YADAgB,EAAgBhB,IAElB,QACExnC,QAAQC,MAAM,oBAAqBsoC,KAhB3C,SAoBE,cAAC,KAAD,QAGJ,cAACjqC,EAAA,EAAD,CAAYnC,MAAOopC,GAAcC,WAAjC,qBAEF,eAACrnC,EAAA,EAAD,CAAKwrC,GAAI,EAAGvrC,MAAM,SAAlB,UACE,cAACqI,GAAA,EAAD,CAAS7B,MAAM,UAAUwD,OAAK,EAA9B,SACA,cAAC7K,EAAA,EAAD,CACIpB,MAAOopC,GAAc1gC,OACrBpI,QAAQ,YACRgB,MAAM,UACND,QAAS,WACPo9B,YAAwB3uB,GACxBkL,EAAWxO,KAAI,SAACxI,GAAD,OACbw8B,YAAmB1wB,EAAOD,WAAY7L,GAAW,OAPzD,SAWI,cAAC,IAAD,QAGJ,cAAC7B,EAAA,EAAD,CAAYnC,MAAOopC,GAAcC,WAAjC,2BAGJ,cAACrnC,EAAA,EAAD,CAAK0H,EAAG,EAAR,SACE,cAACvH,EAAA,EAAD,CAAY7B,QAAQ,KAApB,sBAED2sC,EAAqBzgC,KAAI,SAACkhC,GAAD,OACxB,cAACA,EAAD,OAEDtP,EAAS,KAAO,cAACzT,EAAA,EAAD,IACjB,cAAC3oB,EAAA,EAAD,CAAK0H,EAAG,EAAGzH,MAAM,SAAjB,SACE,cAACb,EAAA,EAAD,CAAQ2nB,KAAK,QAAQzoB,QAAQ,WAAWN,MA7HrC,CACPsB,MAAO,UACPqsC,OAAQ,qBACR5nC,MAAO,QA0H4D1E,QAAS,kBAAM8qC,GAAoB,IAAlG,4BAKJ,cAAC1H,GAAD,CACE7lC,KAAMgtC,EACN9sC,QAAS,kBAAM+sC,GAAsB,MAEvC,cAACjJ,EAAD,CACEhkC,KAAMstC,EACNlxB,WAAYA,EACZlc,QAAS,kBAAMqtC,GAAoB,MAErC,cAAC5E,GAAD,CACE3oC,KAAMktC,EACNhtC,QAAS,kBAAMitC,GAA6B,IAC5CvE,QAASzE,EAAkBA,EAAgB/jC,KAAO,GAClDyoC,OAAQ,SAACzoC,GACPg/B,EAAe+E,EAAgBv0B,SAAUxP,GACzC+sC,GAA6B,MAGjC,cAACrE,GAAD,CACE9oC,KAAMotC,EACNltC,QAAS,kBAAMmtC,GAAqB,SAGxC,cAACjlB,EAAA,EAAD,CAAOhnB,MAAO,CAAEE,QAASssC,EAAkB,QAAU,SAArD,SACE,cAACxqC,EAAA,EAAD,CAAKC,MAAM,SAAS6kB,EAAG,GAAvB,SACE,cAACvhB,EAAA,EAAD,CAAkBqoC,eAAa,WAQvC,IAAM/lC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC2G,QAAS,CACPm8B,aAAc,WACdC,UAAW,UAEbxjB,YAAa,CACX9hB,WAAYuC,EAAMI,QAAQ,GAC1B1C,YAAasC,EAAMI,QAAQ,GAC3B2G,aAAc/G,EAAMI,QAAQ,IAE9Bof,gBAAiB,CACfrnB,QAAS,OACTiO,eAAgB,eAChBoR,UAAWxX,EAAMI,QAAQ,GACzB2G,aAAc/G,EAAMI,QAAQ,IAE9B0lC,YAAa,CACX,UAAW,CACTziB,OAAQ,gBAKP,SAAS8hB,GAAT,GAAkE,IAAD,EAAtClpC,EAAsC,EAAtCA,UAAWkyB,EAA2B,EAA3BA,WAAYiX,EAAe,EAAfA,YACjDr9B,EAASsH,cACT02B,EAAcjP,YAAe76B,GAE7B6L,GADUhI,KACGoW,eACnB,EAAwBlf,oBAAS,GAAjC,mBACMsK,GADN,UACyBC,eACzB,EAA2BvK,oBAAS,GAA3ButC,EAAT,oBAKA,EAA0BvtC,wBAASS,GAAnC,mBAAO0nC,EAAP,KAAc6G,EAAd,KAoCA,GAnCAxqC,qBAAU,WACR,GAAIuqC,EACF,GAAIA,EAAYvO,YAAa,CAC3B,IAAMyD,EAAO8K,EAAYvO,YAAYxnB,cAErC,GAAa,SAATirB,GAA4B,SAATA,EACrB+K,EAAS,QAGN,GAAIrH,GAAa1D,GAAO,CAC3B,IAAIt5B,EAAIg9B,GAAa1D,GACrBoE,GACG4G,SAASn+B,EAAYnG,EAAE1K,MACvB0E,MAAK,SAACwjC,GACL6G,EAAS7G,MAEVvjC,OAAM,SAACC,GACNC,QAAQC,MAAMF,GACdmqC,EAAS,cAKbA,EAAS,WAKXA,EAAS,QAGZ,CAAC7G,EAAO4G,EAAaj+B,IAExBqmB,OAA4B12B,IAAf02B,GAAkCA,GAE1C4X,EACH,OAAO,cAACnjB,EAAA,EAAD,CAAkBuB,MAAO,IAGlC,IASI+hB,EARF1zB,EAMEuzB,EANFvzB,OACAsB,EAKEiyB,EALFjyB,SACAG,EAIE8xB,EAJF9xB,KACAsjB,EAGEwO,EAHFxO,UACAC,EAEEuO,EAFFvO,YACAC,EACEsO,EADFtO,aAEFF,EAAS,UAAGA,SAAH,QAAgBlF,YAAkBpe,GAGzCiyB,EADE5kC,EACS,OAAGk2B,QAAH,IAAGA,IAAeD,EAEfA,GAAaC,EAAW,YAAQA,EAAR,KAAyB,IAI7DzvB,GAAUA,EAAO9L,WAAagY,SAEyBxc,IAAvD+rC,GAAsBz7B,EAAO9L,UAAUC,kBAErCzE,IADF+rC,GAAsBz7B,EAAO9L,UAAUC,YAAY+X,EAAK/X,aAGxDgrB,YAA2Bnf,EAAO9L,UAAWgY,GAAMtY,MAAK,SAACqlC,GACvD,IAAInK,EAAiB3zB,OAAOijC,OAC1B,GACA3C,GAAsBz7B,EAAO9L,UAAUC,aAEzC26B,EAAe5iB,EAAK/X,YAAc8kC,EAClCwC,GAAsBz7B,EAAO9L,UAAUC,YAAc26B,EACjDmK,EAAS73B,OAAOlN,IAElBsoC,GAAe,SAACvS,GAAD,OAAkBA,SAQzC,GACEjqB,GACAA,EAAO9L,WACPgY,GACAuvB,GAAsBz7B,EAAO9L,UAAUC,YACvC,CACA,IAAIgyB,EACFsV,GAAsBz7B,EAAO9L,UAAUC,YAAY+X,EAAK/X,YACtDgyB,KACEA,EAAI/kB,OAAOlN,GASjBqF,IAAqBrF,EAAUkN,OAAO48B,EAAY3xB,QAS3CnY,EAAU2K,WAVnB,IAeMq+B,OACMxtC,IAAV0nC,OACI1nC,EACU,OAAV0nC,EACA,MACE3sB,EAAS4zB,KAAKC,IAAI,GAAIvyB,GAAaqrB,GAAOmH,QAAQ,GAK1D,OAJIlB,QAA4B3tC,IAAbwtC,GACjBG,EAAYnpC,EAAwB,OAAbgpC,EAAoB,KAAOsB,WAAWtB,IAI7D,mCACE,cAAChrC,EAAA,EAAD,CAAKqkB,GAAI,EAAGC,GAAI,EAAGgnB,GAAI,CAACC,QAAS,mBAAoBjoB,aAAc,QAAnE,SACE,eAACtjB,EAAA,EAAD,CAAKsrC,GAAI,CAACptC,QAAQ,OAAQC,cAAe,MAAOgO,eAAe,iBAA/D,UACE,cAACnM,EAAA,EAAD,CAAKsrC,GAAI,CAACvnC,MAAO,MAAO7F,QAAS,OAAQC,cAAe,MAAO+e,WAAW,UAA1E,SACE,cAACojB,EAAD,CACEtmB,KAAMA,EACNsjB,UAAWA,EACX5L,IAAK8L,EACLzW,KAAM,OAGV,eAAC/mB,EAAA,EAAD,CAAKsrC,GAAI,CAACptC,QAAQ,OAAQC,cAAe,SAAWgO,eAAe,aAAcpI,MAAO,OAAxF,UACE,cAAC5D,EAAA,EAAD,CAAY7B,QAAQ,KAApB,SAA0B2tC,IAC1B,eAAC9rC,EAAA,EAAD,CAAY7B,QAAQ,UAApB,UAA+BsqC,GAAc/E,OAAOtrB,EAAS4zB,KAAKC,IAAI,GAAIvyB,IAAY,UAExF,cAAC7Z,EAAA,EAAD,CAAKsrC,GAAI,CAACvnC,MAAO,OAAjB,SACGmhC,GACG,cAAC/kC,EAAA,EAAD,CAAY7B,QAAQ,KAAK2B,MAAM,QAA/B,SACGupC,GAAa3F,OAAOmH,cAqWvC,SAASK,GAAT,GAII,IAHFb,EAGC,EAHDA,gBACAK,EAEC,EAFDA,cACA9J,EACC,EADDA,gBAEA,EAAgChkC,oBAAS,GAAzC,mBAAOwvC,EAAP,KAAiBC,EAAjB,KACA,EAAgDzvC,oBAAS,GAAzD,6BAUA,OACE,eAACiD,EAAA,EAAD,CAAKC,MAAM,SAASqkB,GAAI,EAAxB,UACE,cAACtkB,EAAA,EAAD,CAAK8vB,GAAI,EAAT,SACE,cAAC3vB,EAAA,EAAD,CAAY7B,QAAQ,KAApB,yBAEF,cAAC0B,EAAA,EAAD,CAAK8vB,GAAI,EAAT,SACG0a,EACG,cAACrqC,EAAA,EAAD,CAAY7B,QAAQ,KAAKN,MAdxB,CACP4M,SAAU,OACV7I,WAAY,OACZwhB,WAAY,QAWN,SAAiDimB,GAAa3F,OAAOgH,EAAcwB,QAAQ,MAC5F,cAAC9oC,EAAA,EAAD,CAAkBqoC,eAAa,MAGpC,cAAC,mBAAD,CACE1kC,KAAM65B,GAAmBA,EAAgBr0B,QAAQC,WACjD8/B,OAAQ,WACND,GAAY,GACZzvB,YAAW,WACTyvB,GAAY,KACX,MANP,SASE,cAAClkC,GAAA,EAAD,CACE7B,MACE,cAACtG,EAAA,EAAD,CAAY7B,QAAQ,YAApB,SACGiuC,EAAW,SAAW,sBAH7B,SAOE,cAACpsC,EAAA,EAAD,CAAY7B,QAAQ,UAAUouC,OAAO,EAArC,SACG3L,GAAmBA,EAAgB/jC,WAI1C,cAACgD,EAAA,EAAD,CAAKsrC,GAAI,CACPptC,QAAS,OACTiO,eAAgB,SAChB2Y,EAAG,EACHpd,EAAG,EACH4b,aAAc,U,o5LEv4BP,SAAS5lB,EAAT,GAMX,IALFd,EAKC,EALDA,KACAE,EAIC,EAJDA,QACAc,EAGC,EAHDA,SACAwG,EAEC,EAFDA,SACG+lB,EACF,iBACKpkB,EAAQ4mC,cACRC,EAAaxlB,YAAcrhB,EAAMK,YAAYwG,KAAK,OAExD,OACE,cAAC,IAAD,yBACEhQ,KAAMA,EACNyrC,WAAY,CACVj8B,UAAW,OACXxO,SAAU,SAACc,GACTA,EAAEo0B,iBACEl1B,GACFA,MAINd,QAASA,EACT8vC,WAAYA,GACRziB,GAbN,aAeG/lB,O,iOC3BDyoC,EAAe,IAAI37B,KAEnB47B,EAA6B,IAAIC,IACjCC,EAA4B,IAAID,IAiChCE,EAAc,I,iDA9BlBC,MAAQ,IAAIH,I,+CAEZ,SAAYloC,GACLu0B,KAAK8T,MAAMC,IAAItoC,EAASk5B,WAC3B3E,KAAK8T,MAAMtsB,IACT/b,EAASk5B,SACT,IAAIqP,EAAkBvoC,EAASk5B,SAAUl5B,EAASwoC,KAGtDjU,KAAK8T,MAAMvoC,IAAIE,EAASk5B,UAAU/4B,YAAYH,K,4BAGhD,SAAeA,GACb,IAAIyoC,EAAOlU,KAAK8T,MAAMvoC,IAAIE,EAASk5B,UACnCuP,EAAKroC,eAAeJ,GAChByoC,EAAKC,SACPnU,KAAK8T,MAAMM,OAAO3oC,EAASk5B,Y,qBAI/B,SAAQA,GACF3E,KAAK8T,MAAMC,IAAIpP,IACjB3E,KAAK8T,MAAMvoC,IAAIo5B,GAAU4I,Y,wBAI7B,WACE,OAAOrqB,QAAQC,IAAI,YAAI6c,KAAK8T,MAAM3xB,UAAU/Q,KAAI,SAAC8iC,GAAD,OAAUA,EAAK3G,kB,MAK7D8G,E,aAMJ,WACE1P,EACAsP,EACAK,EACAC,GACC,yBAVH5P,cAUE,OATFsP,QASE,OARFK,qBAQE,OAPFC,cAOE,EACAvU,KAAK2E,SAAWA,EAChB3E,KAAKiU,GAAKA,EACVjU,KAAKsU,gBAAkBA,EACvBtU,KAAKuU,SAAWA,KAIdP,E,WAOJ,WAAYrP,EAAesP,GAAuB,IAAD,gCANjDtP,cAMiD,OALjDsP,QAKiD,OAJjDO,eAIiD,OAHjDC,eAGiD,OAFjDC,YAEiD,OAwCjDnH,QAxCiD,sBAwCvC,gCAAAhkC,EAAA,yDACJ,EAAKirC,YACPjW,aAAa,EAAKiW,WAClB,EAAKA,UAAY,OAEf,EAAKL,QALD,0EAUa,EAAKF,KAVlB,cAUA3+B,EAVA,OAWNo+B,EAAYlsB,IAAI,EAAKmd,SAAUrvB,GAC/Bs+B,EAAWQ,OAAO,EAAKzP,UACvB,EAAK+P,OAAS,EAbR,kBAcCp/B,GAdD,oCAgBJ,EAAKo/B,OACPhB,EAAYU,OAAO,EAAKzP,UACxBiP,EAAWpsB,IAAI,EAAKmd,SAApB,MACAl8B,QAAQksC,KAAR,MAnBM,yBAqBN,EAAKC,kBACA,EAAKJ,WAAc,EAAKL,UACvBU,EAAW,EAAKP,gBAGhB,EAAKI,OAAS,IAChBG,EAAW9B,KAAK+B,IAAI,aAAO,EAAM,EAAKJ,OAAS,GAAI,OAI/CK,GAAqB,IAAIj9B,MAAU27B,GACjB,MACtBoB,GAAY,IAAOE,EAAoB,GAIR,WAA7BxkB,SAASykB,gBACXH,EAAW,IACDtkB,SAAS0kB,aACnBJ,GAAY,KAIdA,GAAY,GAAM,GAAM9B,KAAKmC,SAE7B,EAAKV,UAAY7wB,WAAW,EAAK4pB,QAASsH,IA9CtC,6EAvCR7U,KAAK2E,SAAWA,EAChB3E,KAAKiU,GAAKA,EACVjU,KAAKwU,UAAY,KACjBxU,KAAKyU,UAAY,IAAIpJ,IACrBrL,KAAK0U,OAAS,E,iDAGhB,WACE,OAAO3B,KAAK+B,IAAL,MAAA/B,KAAI,YACN,YAAI/S,KAAKyU,WAAWrjC,KAAI,SAAC3F,GAAD,OAAcA,EAAS6oC,uB,mBAItD,WACE,OAA+B,IAAxBtU,KAAKyU,UAAU9mB,O,yBAGxB,SAAYliB,GACV,IAAM0pC,EAA0BnV,KAAKsU,gBACrCtU,KAAKyU,UAAU9hB,IAAIlnB,GACfu0B,KAAKsU,gBAAkBa,GACzBnV,KAAKuN,Y,4BAIT,SAAe9hC,GACb0c,IAAO6X,KAAKyU,UAAUL,OAAO3oC,IACzBu0B,KAAKmU,SACHnU,KAAKwU,YACPjW,aAAayB,KAAKwU,WAClBxU,KAAKwU,UAAY,Q,6BAKvB,WACExU,KAAKyU,UAAU1yB,SAAQ,SAACtW,GAAD,OAAcA,EAAS8oC,kB,KAyD3C,SAASzR,EACdsS,EACAzQ,GAEuC,IAAD,yDADR,GACQ,IADpC2P,uBACoC,MADlB,IACkB,EACtC,EAAqBe,sBAAW,SAACpgC,GAAD,OAAOA,EAAI,IAAG,GAA9C,mBAASqgC,EAAT,KAkBA,GAjBA3Q,EAAW4Q,EAAe5Q,GAE1Bx8B,qBAAU,WACR,GAAKw8B,EAAL,CAGA,IAAMl5B,EAAW,IAAI4oC,EACnB1P,EACAyQ,EACAd,EACAgB,GAGF,OADAzB,EAAYjoC,YAAYH,GACjB,kBAAMooC,EAAYhoC,eAAeJ,OAEvC,CAACk5B,EAAU2P,KAET3P,EACH,MAAO,CAAC,MAAM,OAAOvgC,GAGvB,IAAM4+B,EAAS0Q,EAAYK,IAAIpP,GACzBj8B,EAAQkrC,EAAWG,IAAIpP,GAAYiP,EAAWroC,IAAIo5B,QAAYvgC,EAC9DkR,EAAO0tB,EAAS0Q,EAAYnoC,IAAIo5B,QAAYvgC,EAClD,MAAO,CAACkR,EAAM0tB,EAAQt6B,GAGjB,SAAS46B,EAAaqB,GAA+B,IAArBU,EAAoB,wDACzDV,EAAW4Q,EAAe5Q,GACtBU,GACFqO,EAAYU,OAAOzP,GAErB,IAAMuP,EAAOL,EAAYC,MAAMvoC,IAAIo5B,GAC/BuP,IACFA,EAAK3G,UACDlI,GACF6O,EAAKU,mBAKJ,SAAS5P,EAASL,EAAUv/B,GAAyC,IAAD,yDAAJ,GAAI,IAA/BkgC,sBAA+B,SAEzE,GADAX,EAAW4Q,EAAe5Q,IACtBW,IAAkBoO,EAAYK,IAAIpP,GAAtC,CAGA+O,EAAYlsB,IAAImd,EAAUv/B,GAC1B,IAAM8uC,EAAOL,EAAYC,MAAMvoC,IAAIo5B,GAC/BuP,GACFA,EAAKU,mBAIT,SAASW,EAAe5Q,GACtB,OAAIjgB,MAAM8wB,QAAQ7Q,GACTC,IAAK,WAAL,cAASD,IAEXA,I,wGC9NIxD,EAAb,gGACE,SAAmBr7B,EAAM25B,GACvB,MAAa,UAAT35B,EACK,IAAI2vC,IAA2BhW,GAG3B,WAAT35B,EACK,IAAI0D,IAAqBi2B,QADlC,MANJ,M,8eCKO,SAASv4B,EAAkBC,GAChC,OAAOA,EAAS3B,OAAO+lC,MAAM,QAAQzmB,KAAK,KAGrC,SAAegS,IAAtB,+B,4CAAO,gCAAAvtB,EAAA,sEACe,6CADf,cACCmsC,EADD,OAECvuC,EAAWuuC,EAAMC,iBAAiB,KAFnC,SAGcD,EAAMrb,eAAelzB,GAHnC,cAGC8X,EAHD,yBAIE,CAAE9X,WAAU8X,KAAMoV,EAAOvf,KAAKmK,GAAMpW,SAAS,SAJ/C,4C,sBAOA,SAAewxB,EAAtB,kC,4CAAO,WAA8BlzB,GAA9B,iBAAAoC,EAAA,sEACe,6CADf,WACCmsC,EADD,QAEMxb,iBAAiB/yB,GAFvB,sBAGG,IAAI4d,MAAM,sBAHb,uBAKc2wB,EAAMrb,eAAelzB,GALnC,cAKC8X,EALD,yBAMEoV,EAAOvf,KAAKmK,GAAMpW,SAAS,QAN7B,4C,+BASQ+sC,I,2EAAf,sBAAArsC,EAAA,yDACOqF,IADP,yCAEW,MAFX,gCAKS,IAAIsU,SAAQ,SAAC4a,GAClB1yB,OAAOqb,QAAQC,YAAY,CACzBC,QAAS,oCACTlB,OAAQ,OACPqY,OATP,4C,sBAaA,IAAM+X,EAAiB,CACrB1uC,SAAU,KACV8X,KAAM,KACNwiB,qBAAsB,KACtBh4B,eAAgB,MAGdqsC,EAA0B,sBAAC,8BAAAvsC,EAAA,6DACvBwsC,EAAqBlmB,aAAaC,QAAQ,wBAEtBkmB,OAAOD,GAAsBj+B,KAAKD,QAC1DgY,aAAauO,WAAW,YACxBvO,aAAauO,WAAW,uBALG,KAOdhnB,KAPc,SAQpBw+B,IARoB,gDAS3BK,eAAenmB,QAAQ,YATI,+CAUzBD,aAAaC,QAAQ,YAVI,gDAWzB,OAXyB,qBAad,QANTomB,EAPuB,KAOT1wB,MAPS,2DAcpBqwB,GAdoB,8CAiB3BpU,qBAAsB0U,EAA2BD,EAAOj3B,OACrDi3B,IAlBwB,2CAAD,GAsBjB1U,EAAoB,IAAI4U,eAE9B,SAASC,IACd,OAAOP,EAIF,SAASvvC,IACd,MAA8D5C,mBAAS,MAAvE,mBAAO2yC,EAAP,KAAgCC,EAAhC,KAUA,OARApuC,qBAAU,WAGR,OAFAq5B,EAAkB51B,YAAY,SAAU2qC,GACxCT,EAAwBxtC,KAAKiuC,GACtB,WACL/U,EAAkB31B,eAAe,SAAU0qC,MAE5C,IAEKD,EAEJ,CAACA,GAAyB,GAD1B,CAACT,GAAgB,GAIhB,SAASprB,IACd,MAAoClkB,IAApC,mBAAOiwC,EAAP,KAAyBC,EAAzB,KAEA,MAAO,EAAED,EAAiBv3B,QAAU4Q,aAAaC,QAAQ,UAAW2mB,GAGtE,SAASC,EACPvvC,EACA8X,EACAwiB,EACAh4B,GAEA,IAAM6L,EAAO,CACXnO,WACA8X,OACAwiB,uBACAh4B,kBAEFqsC,EAA0B5yB,QAAQ4a,QAAQxoB,GAC1CksB,EAAkBmV,KAAK,SAAUrhC,GAG5B,SAAe+hB,EAAtB,wC,4CAAO,WACLlwB,EACA8X,EACAmY,EACA3tB,GAJK,+BAAAF,EAAA,yDAMCm5B,EAAYtrB,KAAKC,UAAU,CAAElQ,WAAU8X,OAAMxV,oBAC/C2tB,EAPC,wBAQGwf,EAAOpU,sBAAY,IACnBqU,EAAM,SACNC,EAAa,IACbC,EAAS,SAXZ,SAYeC,EAAoB5f,EAAUwf,EAAME,EAAYC,GAZ/D,OAYGr4B,EAZH,OAaGqjB,EAAQS,sBAAYN,YAAUO,aAC9BwU,EAAY/U,oBAAU7N,EAAOvf,KAAK4tB,GAAYX,EAAOrjB,GAC3DmR,aAAa2L,QACX,SACApkB,KAAKC,UAAU,CACb4/B,UAAWvhC,IAAKsO,OAAOizB,GACvBlV,MAAOrsB,IAAKsO,OAAO+d,GACnB8U,MACAD,KAAMlhC,IAAKsO,OAAO4yB,GAClBE,aACAC,YAGJlnB,aAAauO,WAAW,YA1BrB,wBA4BHvO,aAAa2L,QAAQ,WAAYkH,GACjC7S,aAAauO,WAAW,UA7BrB,QA+BL6X,eAAe7X,WAAW,YACtBxvB,KACFxD,OAAOqb,QAAQC,YAAY,CACzBC,QAAS,oCACTlB,OAAQ,MACRnQ,KAAM,KAGJmsB,EAAuB0U,EAA2Bl3B,GACxDy3B,EACEvvC,EACA8X,EACAwiB,EACAh4B,GA5CG,6C,sBAgDA,SAAe8vB,EAAtB,oC,4CAAO,WAAmCnC,EAAUgC,GAA7C,+CAAA7vB,EAAA,+DAOD6N,KAAKoO,MAAMqK,aAAaC,QAAQ,WALvBonB,EAFR,EAEHD,UACOE,EAHJ,EAGHpV,MACMqV,EAJH,EAIHR,KACAE,EALG,EAKHA,WACAC,EANG,EAMHA,OAEIE,EAAYvhC,IAAKC,OAAOuhC,GACxBnV,EAAQrsB,IAAKC,OAAOwhC,GACpBP,EAAOlhC,IAAKC,OAAOyhC,GAVpB,SAWaJ,EAAoB5f,EAAUwf,EAAME,EAAYC,GAX7D,UAWCr4B,EAXD,OAYCgkB,EAAYR,YAAU1+B,KAAKyzC,EAAWlV,EAAOrjB,GAZ9C,uBAcG,IAAIqG,MAAM,sBAdb,eAgBCsyB,EAAmBhjB,EAAOvf,KAAK4tB,GAAW75B,WAhB3C,EAiBsCuO,KAAKoO,MAAM6xB,GAA9ClwC,EAjBH,EAiBGA,SAAU8X,EAjBb,EAiBaA,KAAMxV,EAjBnB,EAiBmBA,eACpB2vB,IACExqB,IACFxD,OAAOqb,QAAQC,YAAY,CACzBC,QAAS,oCACTlB,OAAQ,MACRnQ,KAAM+hC,IAGRpB,eAAeza,QAAQ,WAAY6b,IAGjC5V,EAAuB0U,EAA2Bl3B,GACxDy3B,EACEvvC,EACA8X,EACAwiB,EACAh4B,GAlCG,kBAoCE,CAAEtC,WAAU8X,OAAMxV,mBApCpB,6C,+BAuCQutC,E,oFAAf,WAAmC5f,EAAUwf,EAAME,EAAYC,GAA/D,SAAAxtC,EAAA,+EACS,IAAI2Z,SAAQ,SAAC4a,EAAS4N,GAAV,OACjB4L,iBACElgB,EACAwf,EACAE,EACA5U,YAAUqV,UACVR,GACA,SAACvuC,EAAKkW,GAAN,OAAelW,EAAMkjC,EAAOljC,GAAOs1B,EAAQpf,UARjD,4C,sBAkBA,SAASy3B,EAA2Bl3B,GAElC,OAAOu4B,WAAenjB,EAAOvf,KAAKmK,EAAM,QAAQw4B,WAAW,cACxDpY,WAGE,SAAS34B,IACdmpB,aAAa6nB,QACbzB,eAAe7X,WAAW,YACtBxvB,KACFxD,OAAOqb,QAAQC,YAAY,CACzBC,QAAS,oCACTlB,OAAQ,MACRnQ,KAAM,KAGVwgC,EAA0B,CACxB3uC,SAAU,KACV8X,KAAM,KACNwiB,qBAAsB,MAExBD,EAAkBmV,KAAK,SAAUb,GAC7BlnC,IAEFxD,OAAOC,QAAQC,MAAMosC,OAAM,kBAAMtoC,OAAOiW,SAASsyB,YAEjDvoC,OAAOiW,SAASsyB,Y,6CC/OpB,IAAWhuB,EAAMiuB,EAANjuB,EAKRqW,KALc4X,EAKR,SAAU3V,GACjB,IAAKA,EAAM,MAAM,IAAIld,MAAM,wBAI3B,IAAI8yB,EAAK,SAAUluC,GACjB,IAAIsL,EACF6iC,EAAI,IAAIC,aAAa,IACvB,GAAIpuC,EAAM,IAAKsL,EAAI,EAAGA,EAAItL,EAAKoG,OAAQkF,IAAK6iC,EAAE7iC,GAAKtL,EAAKsL,GACxD,OAAO6iC,GAGLE,EAAMH,IACRI,EAAMJ,EAAG,CAAC,IACVK,EAAIL,EAAG,CACL,MACA,KACA,MACA,MACA,MACA,MACA,KACA,IACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,QAEFM,EAAIN,EAAG,CACL,MACA,MACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,IACA,MACA,MACA,MACA,KACA,QAGJ,SAASO,EAASC,GAChB,IAAIC,EACArjC,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAClBojC,EAAEpjC,IAAM,MACRqjC,EAAIvF,KAAKwF,MAAMF,EAAEpjC,GAAK,OACtBojC,GAAGpjC,EAAI,IAAMA,EAAI,GAAK,EAAI,KACxBqjC,EAAI,EAAI,IAAMA,EAAI,IAAY,KAANrjC,EAAW,EAAI,GACzCojC,EAAEpjC,IAAU,MAAJqjC,EAIZ,SAASE,EAAS9sB,EAAG+sB,EAAGnH,GAGtB,IAFA,IAAIoH,EACFJ,IAAMhH,EAAI,GACHr8B,EAAI,EAAGA,EAAI,GAAIA,IACtByjC,EAAIJ,GAAK5sB,EAAEzW,GAAKwjC,EAAExjC,IAClByW,EAAEzW,IAAMyjC,EACRD,EAAExjC,IAAMyjC,EAWZ,SAASC,EAAEN,EAAG9uC,EAAG+nC,GACf,IAAIr8B,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKojC,EAAEpjC,GAAM1L,EAAE0L,GAAKq8B,EAAEr8B,GAAM,EAIlD,SAAS2jC,EAAEP,EAAG9uC,EAAG+nC,GACf,IAAIr8B,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKojC,EAAEpjC,GAAM1L,EAAE0L,GAAKq8B,EAAEr8B,GAAM,EAIlD,SAAS4jC,EAAER,EAAG9uC,EAAG+nC,GACf,IAAIr8B,EACF6jC,EACAJ,EAAI,IAAIX,aAAa,IACvB,IAAK9iC,EAAI,EAAGA,EAAI,GAAIA,IAAKyjC,EAAEzjC,GAAK,EAChC,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAClB,IAAK6jC,EAAI,EAAGA,EAAI,GAAIA,IAClBJ,EAAEzjC,EAAI6jC,IAAMvvC,EAAE0L,GAAKq8B,EAAEwH,GAGzB,IAAK7jC,EAAI,EAAGA,EAAI,GAAIA,IAClByjC,EAAEzjC,IAAM,GAAKyjC,EAAEzjC,EAAI,IAErB,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKojC,EAAEpjC,GAAKyjC,EAAEzjC,GAClCmjC,EAASC,GACTD,EAASC,GAIX,SAASU,EAAEV,EAAG9uC,GACZsvC,EAAER,EAAG9uC,EAAGA,GAeV,SAASyvC,EAAUX,EAAG9b,GACpB,IAAItnB,EAAG6jC,EAAGxH,EACNhjC,EAAIupC,IACNa,EAAIb,IACN,IAAK5iC,EAAI,EAAGA,EAAI,GAAIA,IAAKyjC,EAAEzjC,GAAKsnB,EAAEtnB,GAIlC,IAHAmjC,EAASM,GACTN,EAASM,GACTN,EAASM,GACJI,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAEtB,IADAxqC,EAAE,GAAKoqC,EAAE,GAAK,MACTzjC,EAAI,EAAGA,EAAI,GAAIA,IAClB3G,EAAE2G,GAAKyjC,EAAEzjC,GAAK,OAAW3G,EAAE2G,EAAI,IAAM,GAAM,GAC3C3G,EAAE2G,EAAI,IAAM,MAEd3G,EAAE,IAAMoqC,EAAE,IAAM,OAAWpqC,EAAE,KAAO,GAAM,GAC1CgjC,EAAKhjC,EAAE,KAAO,GAAM,EACpBA,EAAE,KAAO,MACTkqC,EAASE,EAAGpqC,EAAG,EAAIgjC,GAErB,IAAKr8B,EAAI,EAAGA,EAAI,GAAIA,IAClBojC,EAAE,EAAIpjC,GAAY,IAAPyjC,EAAEzjC,GACbojC,EAAE,EAAIpjC,EAAI,GAAKyjC,EAAEzjC,IAAM,EAqB3B,SAASgkC,EAAS1vC,EAAG+nC,GACnB,IAAIgH,EAAI,IAAI3yB,WAAW,IACrBriB,EAAI,IAAIqiB,WAAW,IAGrB,OAFAqzB,EAAUV,EAAG/uC,GACbyvC,EAAU11C,EAAGguC,GAff,SAAYzsB,EAAGq0B,EAAIC,EAAGC,EAAI7c,GACxB,IAAItnB,EACF3R,EAAI,EACN,IAAK2R,EAAI,EAAGA,EAAIsnB,EAAGtnB,IAAK3R,GAAKuhB,EAAEq0B,EAAKjkC,GAAKkkC,EAAEC,EAAKnkC,GAChD,OAAQ,EAAM3R,EAAI,IAAO,GAAM,EAIxB+1C,CAQiBf,EAAG,EAAGh1C,EAAG,EART,IA2B1B,SAASg2C,EAAUxB,EAAGpsB,GACpB,IAAIgtB,EAAIb,IACN0B,EAAM1B,IACN2B,EAAM3B,IACN4B,EAAM5B,IACN6B,EAAO7B,IACP8B,EAAO9B,IACP+B,EAAO/B,IA2BT,OAvCF,SAAkBC,EAAGvuC,GACnB,IAAI0L,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAK6iC,EAAE7iC,GAAY,EAAP1L,EAAE0L,GAYlC4kC,CAAS/B,EAAE,GAAIG,GAjIjB,SAAqBI,EAAG9b,GACtB,IAAItnB,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKojC,EAAEpjC,GAAKsnB,EAAE,EAAItnB,IAAMsnB,EAAE,EAAItnB,EAAI,IAAM,GAC5DojC,EAAE,KAAO,MA+HTyB,CAAYhC,EAAE,GAAIpsB,GAClBqtB,EAAES,EAAK1B,EAAE,IACTe,EAAEY,EAAKD,EAAKtB,GACZU,EAAEY,EAAKA,EAAK1B,EAAE,IACda,EAAEc,EAAK3B,EAAE,GAAI2B,GAEbV,EAAEW,EAAMD,GACRV,EAAEY,EAAMD,GACRb,EAAEe,EAAMD,EAAMD,GACdb,EAAEH,EAAGkB,EAAMJ,GACXX,EAAEH,EAAGA,EAAGe,GApCV,SAAiBpB,EAAGpjC,GAClB,IACI1L,EADA+uC,EAAIT,IAER,IAAKtuC,EAAI,EAAGA,EAAI,GAAIA,IAAK+uC,EAAE/uC,GAAK0L,EAAE1L,GAClC,IAAKA,EAAI,IAAKA,GAAK,EAAGA,IACpBwvC,EAAET,EAAGA,GACK,IAAN/uC,GAASsvC,EAAEP,EAAGA,EAAGrjC,GAEvB,IAAK1L,EAAI,EAAGA,EAAI,GAAIA,IAAK8uC,EAAE9uC,GAAK+uC,EAAE/uC,GA8BlCwwC,CAAQrB,EAAGA,GACXG,EAAEH,EAAGA,EAAGc,GACRX,EAAEH,EAAGA,EAAGe,GACRZ,EAAEH,EAAGA,EAAGe,GACRZ,EAAEf,EAAE,GAAIY,EAAGe,GAEXV,EAAEQ,EAAKzB,EAAE,IACTe,EAAEU,EAAKA,EAAKE,GACRR,EAASM,EAAKC,IAAMX,EAAEf,EAAE,GAAIA,EAAE,GAAIK,GAEtCY,EAAEQ,EAAKzB,EAAE,IACTe,EAAEU,EAAKA,EAAKE,GACRR,EAASM,EAAKC,IAAc,GA3ElC,SAAkBjwC,GAChB,IAAIjG,EAAI,IAAIqiB,WAAW,IAEvB,OADAqzB,EAAU11C,EAAGiG,GACC,EAAPjG,EAAE,GA0EL02C,CAASlC,EAAE,MAAQpsB,EAAE,KAAO,GAAGktB,EAAEd,EAAE,GAAIE,EAAKF,EAAE,IAElDe,EAAEf,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACT,GAOT,SAASmC,EAAiB1J,GACxB,IAAI2J,EAAI,IAAIv0B,WAAW,IACrB8yB,EAAI,CAACZ,IAAMA,IAAMA,IAAMA,KACvBtuC,EAAIsuC,IACJvG,EAAIuG,IAEN,GAAIyB,EAAUb,EAAGlI,GAAK,OAAO,KAE7B,IAAI4I,EAAIV,EAAE,GAQV,OANAE,EAAEpvC,EAAG0uC,EAAKkB,GACVP,EAAEtH,EAAG2G,EAAKkB,GAtIZ,SAAkBd,EAAGpjC,GACnB,IACI1L,EADA+uC,EAAIT,IAER,IAAKtuC,EAAI,EAAGA,EAAI,GAAIA,IAAK+uC,EAAE/uC,GAAK0L,EAAE1L,GAClC,IAAKA,EAAI,IAAKA,GAAK,EAAGA,IACpBwvC,EAAET,EAAGA,GACK,IAAN/uC,GAAiB,IAANA,GAASsvC,EAAEP,EAAGA,EAAGrjC,GAElC,IAAK1L,EAAI,EAAGA,EAAI,GAAIA,IAAK8uC,EAAE9uC,GAAK+uC,EAAE/uC,GA+HlC4wC,CAAS7I,EAAGA,GACZuH,EAAEtvC,EAAGA,EAAG+nC,GAER0H,EAAUkB,EAAG3wC,GACN2wC,EAIT,SAASE,EAAiBC,GACxB,IAEEplC,EAFE3R,EAAI,IAAIqiB,WAAW,IACrB0yB,EAAI,IAAI1yB,WAAW,IAMrB,IAJAsc,EAAKqY,SAASC,YAAYj3C,EAAG+2C,EAAI,IACjC/2C,EAAE,IAAM,IACRA,EAAE,KAAO,IACTA,EAAE,KAAO,GACJ2R,EAAI,EAAGA,EAAI,GAAIA,IAAKojC,EAAEpjC,GAAK3R,EAAE2R,GAClC,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAK3R,EAAE2R,GAAK,EAChC,OAAOojC,EAYT,MAAO,CACL4B,iBAAkBA,EAClBG,iBAAkBA,EAClBnyB,eAZF,SAAwBuyB,GACtB,IAAI5xC,EAAYqxC,EAAiBO,EAAU5xC,WAC3C,OAAKA,EACE,CACLA,UAAWA,EACXmf,UAAWqyB,EAAiBI,EAAUzyB,YAHjB,QArRY0yB,EAAOC,QAC1CD,EAAOC,QAAU9C,EAAElc,EAAQ,KACxB/R,EAAK3B,SAAW4vB,EAAEjuB,EAAKsY,O,2aCJjB9rB,EAAmB,IAAIjC,YAClC,+CAGWymC,EAAmB,IAAIzmC,YAClC,+CAGW0mC,EAAkB,IAAI1mC,YACjC,+CAGI2mC,EAASC,QAAmBA,KAAgB,gBAClDD,EAAOE,WACL,EACAD,SAAoB,CAClBA,KAAgB,YAChBA,OAAkB,GAAI,iBACtBA,KAAgB,yBAChBA,OAAkB,GAAI,qBAExB,kBAEFD,EAAOE,WAAW,EAAGD,SAAoB,IAAK,qBAC9CD,EAAOE,WACL,EACAD,SAAoB,CAACA,OAAkB,YACvC,UAEFD,EAAOE,WACL,EACAD,SAAoB,CAACA,OAAkB,YACvC,QAEFD,EAAOE,WAAW,EAAGD,SAAoB,IAAK,gBAC9CD,EAAOE,WACL,GACAD,SAAoB,CAACA,OAAkB,UAAWA,KAAgB,cAClE,mBAGF,IAAME,EAAqBjI,KAAKkI,IAAL,MAAAlI,KAAI,YAC1BljC,OAAOsS,OAAO04B,EAAOK,UAAU9pC,KAAI,SAAC0mC,GAAD,OAAOA,EAAE5kB,UAGjD,SAASioB,EAA2B/lC,GAClC,IAAIk8B,EAAIjd,EAAOuI,MAAMoe,GACjB9nB,EAAO2nB,EAAO72B,OAAO5O,EAAak8B,GACtC,OAAOA,EAAE10B,MAAM,EAAGsW,GAGb,SAASlT,EAAT,GAKH,IAJFY,EAIC,EAJDA,KACAH,EAGC,EAHDA,SACAI,EAEC,EAFDA,cACAu6B,EACC,EADDA,gBAEItrC,EAAO,CACT,CAAE4I,OAAQkI,EAAMoT,UAAU,EAAO9c,YAAY,GAC7C,CAAEwB,OAAQwb,qBAAoBF,UAAU,EAAO9c,YAAY,IAE7D,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAM6lC,EAA2B,CAC/Bn7B,eAAgB,CACdS,WACAI,cAAeA,EAAc2T,WAC7B6mB,wBAAyBD,EACzBA,iBAAkBA,GAAmBlnC,YAAUkG,SAASoa,cAG5D5e,UAAWO,IAIR,SAAS8J,EAAT,GAAsD,IACvDnQ,EAAO,CACT,CAAE4I,OAFsD,EAAxB7Q,QAEbmsB,UAAU,EAAO9c,YAAY,GAChD,CAAEwB,OAHsD,EAAfkI,KAGzBoT,UAAU,EAAO9c,YAAY,GAC7C,CAAEwB,OAJsD,EAATqI,MAI9BiT,UAAU,EAAO9c,YAAY,GAC9C,CAAEwB,OAAQwb,qBAAoBF,UAAU,EAAO9c,YAAY,IAE7D,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAM6lC,EAA2B,CAC/Bl7B,kBAAmB,KAErBrK,UAAWO,IAIR,SAASkf,EAAT,GAAkF,IAAvDrU,EAAsD,EAAtDA,OAAQJ,EAA8C,EAA9CA,KAAMD,EAAwC,EAAxCA,YAAaxB,EAA2B,EAA3BA,OAAQsB,EAAmB,EAAnBA,SAC/D3Q,EAAO,CACT,CAAE4I,OAAQsI,EAAQgT,UAAU,EAAO9c,YAAY,GAC/C,CAAEwB,OAAQkI,EAAMoT,UAAU,EAAO9c,YAAY,GAC7C,CAAEwB,OAAQiI,EAAaqT,UAAU,EAAO9c,YAAY,GACpD,CAAEwB,OALkF,EAATqI,MAK1DiT,UAAU,EAAM9c,YAAY,IAE/C,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAM6lC,EAA2B,CAC/B9lB,gBAAiB,CAAElW,SAAQsB,cAE7B7K,UAAWO,IAIR,SAASkK,EAAT,GAA+D,IAA7CO,EAA4C,EAA5CA,KAAMD,EAAsC,EAAtCA,YAAaxB,EAAyB,EAAzBA,OACtCrP,EAAO,CACT,CAAE4I,OAAQkI,EAAMoT,UAAU,EAAO9c,YAAY,GAC7C,CAAEwB,OAAQiI,EAAaqT,UAAU,EAAO9c,YAAY,GACpD,CAAEwB,OAJ+D,EAAjBmI,cAIvBmT,UAAU,EAAM9c,YAAY,IAEvD,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAM6lC,EAA2B,CAC/B96B,OAAQ,CACNlB,YAGJvJ,UAAWO,IAIR,SAASmK,EAAT,GAAuD,IACtDxQ,EAAO,CACX,CAAE4I,OAFuD,EAA9BsI,OAETgT,UAAU,EAAO9c,YAAY,GAC/C,CAAEwB,OAHuD,EAAtBiI,YAGZqT,UAAU,EAAO9c,YAAY,GACpD,CAAEwB,OAJuD,EAATqI,MAI/BiT,UAAU,EAAM9c,YAAY,IAE/C,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAM6lC,EAA2B,CAC/B76B,aAAc,KAEhB1K,UAAWO,IAIR,SAASmf,EAAgBV,GAC9B,OAAO,IAAIT,yBAAuB,CAChCrkB,KAAM,GACNwF,KAAM+e,EAAOvf,KAAK8f,EAAM,SACxBhf,UAAWglC,I,IAITU,E,kDACJ,WAAYC,GAAW,uCACf,GAAIA,G,0CAGZ,SAAOjK,EAAGzU,GACR,OAAO,IAAI3oB,YAAJ,8DAA2Bo9B,EAAGzU,M,oBAGvC,SAAO/P,EAAKwkB,EAAGzU,GACb,OAAO,8DAAa/P,EAAI0H,WAAY8c,EAAGzU,O,GAVbie,QAkBvB,IAJkBS,EAIZC,EAA8B,IAAItnC,YAC7C,gDAGWunC,EAA0BX,SAAoB,EARlCS,EASP,UART,IAAID,EAAgBC,MAWtB,SAASG,EAAiCtmC,GAC/C,IAAMk8B,EAAIjd,EAAOuI,MAAM6e,EAAwBvoB,MACzCA,EAAOuoB,EAAwBz3B,OAAO5O,EAAak8B,GACzD,OAAOA,EAAE10B,MAAM,EAAGsW,GAGb,SAASuC,EAAT,GAA0C,IAAnB5tB,EAAkB,EAAlBA,QAASkZ,EAAS,EAATA,MAC/BjR,EAAO,CAAC,CAAE4I,OAAQ7Q,EAASmsB,UAAU,EAAO9c,YAAY,IAC9D,OAAO,IAAIid,yBAAuB,CAChCrkB,OACAwF,KAAMomC,EAAiC,CAAE7zC,QAASkZ,IAClDnL,UAAW4lC,O,mYCzLR,SAAShS,IACd,IAAM/0B,EAAaoO,cACnB,EAA2C1Z,cAAnCD,EAAR,EAAQA,gBAAiByyC,EAAzB,EAAyBA,cACzB,EAA8Bh4C,oBAAS,GAAvC,mBAAO+lC,EAAP,KAAgBkS,EAAhB,KAHmC,4CAKnC,WACEC,GADF,mCAAAtyC,EAAA,8FAE2B,GAAvB6gC,EAFJ,EAEIA,UAAWrd,EAFf,EAEeA,QAET7F,EAAKhe,EAAgB,yBAA0B,CACjDhE,QAAS,OACT42C,SAAS,IAEXF,GAAW,GARb,kBAU0BC,EAV1B,cAUQh0B,EAVR,OAWI8zB,EAAcz0B,GACdA,EAAKhe,EAAgB,4BAA6B,CAChDhE,QAAS,OACT42C,SAAS,EACTpyB,OAAQ,cAACqyB,EAAD,CAAiCl0B,UAAWA,MAf1D,UAiBUqX,YAAmBzqB,EAAYoT,GAjBzC,QAkBI8zB,EAAcz0B,GACd00B,GAAW,GACX1yC,EAAgB,wBAAyB,CACvChE,QAAS,UACT0qB,iBAAkB,KAClBlG,OAAQ,cAACqyB,EAAD,CAAiCl0B,UAAWA,MAElDuiB,GACFA,EAAUviB,GA1BhB,kDA6BI8zB,EAAcz0B,GACd00B,GAAW,GACXnzC,QAAQksC,KAAR,MACAzrC,EAAgB,KAAEyL,QAAS,CAAEzP,QAAS,UAClC6nB,GACFA,EAAQ,EAAD,IAlCb,0DALmC,wBA4CnC,MAAO,CA5C4B,4CA4CV2c,GAG3B,SAASqS,EAAT,GAAyD,IAAdl0B,EAAa,EAAbA,UACnCigB,EAAYllB,cAClB,OACE,cAAC,IAAD,CACE1c,MAAM,UACN8M,UAAU,IACVzN,OAAO,SACP0N,IAAI,WACJC,KAAM,gCAAyB2U,GAAcigB,EAL/C,6BAYG,SAAS5Q,IACd,MAA2C/tB,cAAnCD,EAAR,EAAQA,gBAAiByyC,EAAzB,EAAyBA,cACzB,8CAAO,WACLK,GADK,2CAAAzyC,EAAA,8FAOD,GAPC,IAGHiuB,uBAHG,MAGe,gBAHf,MAIHC,sBAJG,MAIc,UAJd,EAKH2S,EALG,EAKHA,UACArd,EANG,EAMHA,QAGE7F,EAAKhe,EAAgBsuB,EAAiB,CACxCtyB,QAAS,OACT42C,SAAS,IAXN,kBAcgBE,EAdhB,OAcCxwC,EAdD,OAeHmwC,EAAcz0B,GACVuQ,GACFvuB,EAAgBuuB,EAAgB,CAAEvyB,QAAS,YAEzCklC,GACFA,EAAU5+B,GApBT,kDAuBH/C,QAAQksC,KAAR,MACAgH,EAAcz0B,GACdhe,EAAgB,KAAEyL,QAAS,CAAEzP,QAAS,UAClC6nB,GACFA,EAAQ,EAAD,IA3BN,0DAAP,wD,yQC/DWuK,EAAkB,CAC7Bpb,gBAAY9X,EACZ22B,MAAO,QACPxD,YAAa,cACbyD,UAAW,aAGN,SAASR,EACdvb,EACAxM,GAGC,IAFDwpC,EAEA,4DAFQ73C,EACRqU,EACA,uDADe,EAETyjC,EAAcC,EAAWl9B,EAAMxM,EAAawpC,EAAOxjC,GACzD,OAAO,IAAIsoB,UAAQkB,IAAKma,KAAKC,QAAQC,SAASJ,GAAan0B,WAG7D,SAASo0B,EAAWl9B,EAAMxM,EAAahJ,EAAgBgP,GACrD,OAAQhP,GACN,KAAK6tB,EAAgBpb,WACnB,IAAMqhB,EAAI,iBAAa9qB,EAAb,eAA+BgG,GACzC,OAAO++B,WAAev4B,GAAMw4B,WAAWla,GAAM8B,WAC/C,KAAK/H,EAAgByD,MACnB,IAAMwhB,EAAM,qBAAiB9pC,EAAjB,KACZ,OAAOglC,qBAAW8E,EAAQt9B,GAAMP,IAClC,KAAK4Y,EAAgBC,YACnB,IAAMilB,EAAY,qBAAiB/pC,EAAjB,QAClB,OAAOglC,qBAAW+E,EAAcv9B,GAAMP,IACxC,QACE,MAAM,IAAIqG,MAAJ,mCAAsCtb,KAI3C,IAAMgsC,EAAb,aACE,WAAYhW,GAAO,IAAD,gCAKlB91B,KALkB,sBAKX,8BAAAJ,EAAA,sEACkB8sC,cADlB,uBACGp3B,EADH,EACGA,KACR,EAAK6gB,cAAL,uCAAqB,WAAOC,GAAP,eAAAx2B,EAAA,6DACb+4B,EAAajO,EAAOvf,KAAKmK,EAAM,OADlB,kBAEZ,YAAIyF,MAAMqb,GAAajwB,QAAQsB,KAAI,SAACqB,GAGzC,MAAO,CAAE8C,MAAO9C,EAAaa,QAFfknB,EAAmB8H,EAAY7vB,GAAa7J,UAEpBhF,KAD3BisB,aAAaC,QAAb,cAA4Brd,SAJtB,2CAArB,kCAAAutB,KAAA,eAFK,kBAUE,GAVF,2CALW,KAkBlB7N,gBAlBkB,uCAkBA,WAAO5J,GAAP,SAAAhf,EAAA,6DAChBgf,EAAY2J,YAAY,EAAKrqB,SADb,kBAET0gB,GAFS,2CAlBA,2DAuBlBX,gBAAkB,SAACjT,GACjB,OAAOe,IAAKsO,OAAOie,IAAKma,KAAKK,SAAS9nC,EAAS,EAAK9M,QAAQkgB,aAvB5DiY,KAAKn4B,QAAU43B,EAAK53B,QACpBm4B,KAAKp3B,UAAYo3B,KAAKn4B,QAAQe,e,iLC3ClC,6LAGaqqB,EAAiB6nB,SAAoB,CAChDA,OAAkB,GAAI,QACtBA,OAAkB,GAAI,SACtBA,OAAkB,UAClBA,OAAkB,MAGP4B,EAAc5B,SAAoB,CAC7CA,OAAkB,IAClBA,KAAgB,YAChBA,OAAkB,MAGb,SAASta,EAAsBlrB,GACpC,MAA8B2d,EAAetd,OAAOL,GAA9CsL,EAAN,EAAMA,KAAMG,EAAZ,EAAYA,MAAO5B,EAAnB,EAAmBA,OACnB,MAAO,CACLyB,KAAM,IAAI1M,YAAU0M,GACpBG,MAAO,IAAI7M,YAAU6M,GACrB5B,UAIG,SAAS8kB,EAAc3uB,GAE5B,MAAO,CAAEmL,SADUi8B,EAAY/mC,OAAOL,GAAhCmL,UAID,SAAS4Q,EAAwBzoB,GACtC,MAAO,CACL,CACE+zC,OAAQ,CACN9f,OAAQ5J,EAAe2pB,SAAS,SAChCC,MAAOj0C,EAAU2K,aAGrB,CACEupC,SAAU7pB,EAAeC,S,ueCnBzB6pB,EAAc,eACjB7hB,IAAc,CACb,CACE2O,YAAa,8CACb3F,UAAW,QACXC,YAAa,MACb6Y,KACE,+IAEJ,CACEnT,YAAa,8CACb3F,UAAW,YACXC,YAAa,OACb6Y,KACE,+IAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,kBACX8Y,KACE,iGAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,mBACX8Y,KACE,+IAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,cACX8Y,KACE,iLAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,cACX8Y,KACE,+IAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,oBACX8Y,KACE,+IAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,cACX8Y,KACE,gGAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,OACX8Y,KACE,2EAEJ,CACE7Y,YAAa,QACb0F,YAAa,+CACb3F,UAAW,qBACX8Y,KACE,iLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,WACX8Y,KACE,iLAEJ,CACE7Y,YAAa,QACb0F,YAAa,+CACb3F,UAAW,eACX8Y,KACE,gLACF9gC,YAAY,GAEd,CACEioB,YAAa,QACb0F,YAAa,+CACb3F,UAAW,gBACX8Y,KACE,+IAEJ,CACE7Y,YAAa,QACb0F,YAAa,+CACb3F,UAAW,gBACX8Y,KACE,wKAEJ,CACE7Y,YAAa,MACb0F,YAAa,8CACb3F,UAAW,cACX8Y,KACE,sKAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,gBAEb,CACEC,YAAa,QACb0F,YAAa,+CACb3F,UAAW,gBACX8Y,KACE,mLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,gBAEb,CACEC,YAAa,MACb0F,YAAa,+CACb3F,UAAW,eAEb,CACEC,YAAa,QACb0F,YAAa,+CACb3F,UAAW,gBACX8Y,KACE,iLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,eACX8Y,KACE,iLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,gBAEb,CACEC,YAAa,MACb0F,YAAa,+CACb3F,UAAW,cACX8Y,KACE,iLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,gBAEb,CACEC,YAAa,OACb0F,YAAa,+CACb3F,UAAW,eACX8Y,KACE,qIAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,cACX8Y,KACE,iLAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,gBACX8Y,KACE,uFAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,OACX8Y,KACE,uFAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,8BAEb,CACEC,YAAa,OACb0F,YAAa,+CACb3F,UAAW,qBAEb,CACEC,YAAa,MACb0F,YAAa,8CACb3F,UAAW,MACX8Y,KACE,6FAEJ,CACE7Y,YAAa,OACb0F,YAAa,8CACb3F,UAAW,iBAEb,CACEC,YAAa,MACb0F,YAAa,+CACb3F,UAAW,UACX8Y,KACE,6EAEJ,CACE7Y,YAAa,MACb0F,YAAa,8CACb3F,UAAW,kBACX8Y,KACE,+FAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,OACX8Y,KACE,2HAEJ,CACE7Y,YAAa,MACb0F,YAAa,+CACb3F,UAAW,0BACX8Y,KACE,0EAEJ,CACE7Y,YAAa,OACb0F,YAAa,8CACb3F,UAAW,OACX8Y,KACE,0HAEJ,CACE7Y,YAAa,OACb0F,YAAa,8CACb3F,UAAW,kBACX8Y,KACE,yCAEJ,CACE7Y,YAAa,OACb0F,YAAa,+CACb3F,UAAW,eACX8Y,KACE,sIAEJ,CACE7Y,YAAa,QACb0F,YAAa,+CACb3F,UAAW,kBACX8Y,KACE,wIAKFC,EAAmBhvB,IAAMnjB,cAAc,IAEtC,SAAS8hC,IAEd,OADuB5gC,qBAAWixC,GAA1BtQ,WAIH,SAASuQ,EAAsB/V,GACpC,IAAQh3B,EAAaD,cAAbC,SACR,EAAoCxM,mBAAS,MAA7C,mBAAOgpC,EAAP,KAAmBwQ,EAAnB,KAkBA,OAjBAh1C,qBAAU,WACJgI,IAAairB,KAAsBjrB,IAAa+qB,MAC1B,IAAIkiB,KACZtf,UAAUx1B,MAAK,SAAC+0C,GAChC,IAAMhtC,EAAUE,YAAmBJ,GAE7BmtC,EAA0B,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAoBE,oBAApB,OACjCltC,QADiC,IACjCA,OADiC,EACjCA,EAAS8qB,aAELwR,EACJ0Q,IAAuBC,EAAvB,OACIA,QADJ,IACIA,OADJ,EACIA,EAA4BE,UAC5B,KACNL,EAAcxQ,QAEf,CAACx8B,IAGF,cAAC8sC,EAAiBnxC,SAAlB,CAA2B1G,MAAO,CAAEunC,cAApC,SACGxF,EAAMn8B,WAKb,IAAMyyC,EAA4BrmC,KAAKoO,MAAL,UAChCqK,aAAaC,QAAQ,qBADW,QACM,MAGlC4tB,EAAc,IAAItH,IAGjB,SAAStS,EAAaljB,GAC3B,IAAQzQ,EAAaD,cAAbC,SAGR,OAFAquB,YAAYkf,EAAa,UAElBrQ,EAAazsB,EAAMzQ,EADPy8B,KAId,SAASS,EAAazsB,EAAMzQ,EAAUw8B,GAAa,IAAD,EACvD,IAAK/rB,EACH,MAAO,CAAEhd,KAAM,KAAMmgC,OAAQ,MAG/B,IAAIgB,EAAI,OAAG0Y,QAAH,IAAGA,GAAH,UAAGA,EAA4BttC,UAA/B,aAAG,EAAwCyQ,EAAKrN,YACpD4c,EAAK,OAAGwc,QAAH,IAAGA,OAAH,EAAGA,EAAYp1B,MACtB,SAAC2wB,GAAD,OAAeA,EAAU50B,UAAYsN,EAAKrN,cAY5C,OATI4c,IAMA4U,EALGA,EAKC,uCAAQ5U,GAAU4U,GAAlB,IAAwBf,QAAS7T,EAAMwtB,UAJvC,2BAAQxtB,GAAR,IAAe6T,QAAS7T,EAAMwtB,WAO/B,eAAK5Y,GAGP,SAASwE,IACd,IAAQp5B,EAAaD,cAAbC,SACR,OAAOqW,uBACL,SAAyB5F,EAAMhd,EAAMmgC,GACnC,IAAKngC,IAASmgC,EACZ,GAAIngC,EACFmgC,EAASngC,MACJ,KAAImgC,EAGT,OAFAngC,EAAOmgC,EAKN0Z,EAA0BttC,KAC7BstC,EAA0BttC,GAAY,IAExCstC,EAA0BttC,GAAUyQ,EAAKrN,YAAc,CAAE3P,OAAMmgC,UAC/DlU,aAAa2L,QACX,aACApkB,KAAKC,UAAUomC,IAEjBC,EAAY/G,KAAK,YAEnB,CAACxmC,IAIE,SAASu3B,IACd,IAAMiF,EAAaC,IACXz8B,EAAaD,cAAbC,SACR,OAAS4sC,EAAe5sC,GAEpB4sC,EAAe5sC,GADf,IAEFiB,KAAI,SAACwsC,GAAD,OACJvQ,EAAa,IAAIn5B,YAAU0pC,EAAI/T,aAAc15B,EAAUw8B,MAjE3D+Q,EAAYG,gBAAgB,O","file":"static/js/main.4d8cab67.chunk.js","sourcesContent":["import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default function SolanaIcon() {\n  return (\n    <SvgIcon viewBox=\"0 0 450 450\">\n      <path d=\"m374.393945,136.203008c-2.518,2.519 -5.934,3.934 -9.496,3.934l-336.443,0c-11.891,0 -17.914,-14.315 -9.601,-22.817l55.186,-56.441c2.527,-2.584 5.988,-4.041 9.602,-4.041l337.697,0c11.964,0 17.955,14.465 9.496,22.925l-56.441,56.44z\" />\n      <path d=\"m374.393945,392.628008c-2.518,2.518 -5.934,3.933 -9.496,3.933l-336.443,0c-11.891,0 -17.914,-14.315 -9.601,-22.817l55.186,-56.441c2.527,-2.584 5.988,-4.041 9.602,-4.041l337.697,0c11.964,0 17.955,14.465 9.496,22.925l-56.441,56.441z\" />\n      <path d=\"m374.393945,188.933008c-2.518,-2.518 -5.934,-3.933 -9.496,-3.933l-336.443,0c-11.891,0 -17.914,14.315 -9.601,22.817l55.186,56.441c2.527,2.584 5.988,4.04 9.602,4.04l337.697,0c11.964,0 17.955,-14.464 9.496,-22.924l-56.441,-56.441z\" />\n    </SvgIcon>\n  );\n}\n","import React, { useState } from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Switch from '@material-ui/core/Switch';\nimport { decodeAccount } from '../utils/utils';\nimport DialogForm from './DialogForm';\n\nexport default function AddAccountDialog({ open, onAdd, onClose }) {\n  const [name, setName] = useState('');\n  const [isImport, setIsImport] = useState(false);\n  const [importedPrivateKey, setPrivateKey] = useState('');\n\n  const importedAccount = isImport\n    ? decodeAccount(importedPrivateKey)\n    : undefined;\n  const isAddEnabled = isImport ? name && importedAccount !== undefined : name;\n\n  return (\n    <DialogForm\n      open={open}\n      onEnter={() => {\n        setName('');\n        setIsImport(false);\n        setPrivateKey('');\n      }}\n      onClose={onClose}\n      onSubmit={() => onAdd({ name, importedAccount })}\n      fullWidth\n    >\n      <DialogTitle>Add account</DialogTitle>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <TextField\n            label=\"Name\"\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={name}\n            onChange={(e) => setName(e.target.value.trim())}\n          />\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={isImport}\n                  onChange={() => setIsImport(!isImport)}\n                />\n              }\n              label=\"Import private key\"\n            />\n          </FormGroup>\n          {isImport && (\n            <TextField\n              label=\"Paste your private key here\"\n              fullWidth\n              type=\"password\"\n              value={importedPrivateKey}\n              variant=\"outlined\"\n              margin=\"normal\"\n              onChange={(e) => setPrivateKey(e.target.value.trim())}\n            />\n          )}\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n        <Button type=\"submit\" color=\"primary\" disabled={!isAddEnabled}>\n          Add\n        </Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n","import React, { useState } from 'react';\nimport DialogForm from './DialogForm';\nimport { forgetWallet, normalizeMnemonic, useUnlockedMnemonicAndSeed } from '../utils/wallet-seed';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { DialogContentText, Box, Typography } from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nexport default function DeleteMnemonicDialog({ open, onClose }) {\n  const [seedCheck, setSeedCheck] = useState('');\n  const [mnemKey] = useUnlockedMnemonicAndSeed();\n  return (\n    <>\n      <DialogForm\n        open={open}\n        onClose={onClose}\n        maxWidth='xs'\n        onSubmit={() => {\n          forgetWallet();\n          onClose();\n        }}\n        fullWidth\n      >\n        <DialogTitle>{'Delete Mnemonic & Log Out'}</DialogTitle>\n        <DialogContentText>\n          <Box align=\"center\" my={2}>\n            <Typography variant=\"paragraph\" >\n              <b>This action will delete all current accounts from your browser.</b>\n            </Typography>\n            <br/>\n            <Typography variant=\"paragraph\">\n              You will not be able to recover the current accounts without the\n              seed phrase, and the account private key.\n            </Typography>            \n          </Box>\n          <Box align=\"center\" my={2}>\n            <Typography variant=\"paragraph\">\n                To prevent loss of funds, please ensure you have the seed phrase\n                and the private key for all current accounts. You can view it by selecting\n                \"Export Mnemonic\" in the user menu.\n            </Typography>\n          </Box>\n          <TextField\n            label={`Please type your seed phrase to confirm`}\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={seedCheck}\n            multiline\n            rows={4}\n            onChange={(e) => setSeedCheck(e.target.value)}\n          />\n        </DialogContentText>\n        <DialogActions>\n          <Button onClick={onClose}>Close</Button>\n          <Button\n            type=\"submit\"\n            color=\"secondary\"\n            disabled={normalizeMnemonic(seedCheck) !== mnemKey.mnemonic}\n          >\n            Delete\n          </Button>\n        </DialogActions>\n      </DialogForm>\n    </>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Card from '@material-ui/core/Card';\nimport DialogForm from './DialogForm';\nimport { LedgerWalletProvider } from '../utils/walletProvider/ledger';\nimport {\n  AccountsSelector,\n  DerivationPathMenuItem,\n  toDerivationPath,\n} from '../pages/WelcomePage.js';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useSnackbar } from 'notistack';\n\nconst AddHardwareView = {\n  Splash: 0,\n  Accounts: 1,\n  Confirm: 2,\n};\n\nexport default function AddHardwareWalletDialog({ open, onAdd, onClose }) {\n  const [view, setView] = useState(AddHardwareView.Splash);\n  const [hardwareAccount, setHardwareAccount] = useState(null);\n  return (\n    <DialogForm onClose={onClose} open={open} onEnter={() => {}} fullWidth>\n      {view === AddHardwareView.Splash ? (\n        <AddHardwareWalletSplash\n          onClose={onClose}\n          onContinue={() => setView(AddHardwareView.Accounts)}\n        />\n      ) : view === AddHardwareView.Accounts ? (\n        <LedgerAccounts\n          onContinue={(account) => {\n            setHardwareAccount(account);\n            setView(AddHardwareView.Confirm);\n          }}\n          open={open}\n          onClose={onClose}\n        />\n      ) : (\n        <ConfirmHardwareWallet\n          account={hardwareAccount}\n          onDone={() => {\n            onAdd(hardwareAccount);\n            onClose();\n            setView(AddHardwareView.Splash);\n          }}\n          onBack={() => {\n            setView(AddHardwareView.Accounts);\n          }}\n        />\n      )}\n    </DialogForm>\n  );\n}\n\nfunction ConfirmHardwareWallet({ account, onDone, onBack }) {\n  const [didConfirm, setDidConfirm] = useState(false);\n  useEffect(() => {\n    if (!didConfirm) {\n      account.provider\n        .confirmPublicKey()\n        .then(() => setDidConfirm(true))\n        .catch((err) => {\n          console.error('Error confirming', err);\n          onBack();\n        });\n    }\n  });\n  return (\n    <>\n      <DialogTitle>Confirm your wallet address</DialogTitle>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n          <Typography fontWeight=\"fontWeightBold\">\n            Check your ledger and confirm the address displayed is the address\n            chosen. Then click \"done\".\n          </Typography>\n          <Typography>{account.publicKey.toString()}</Typography>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={onBack}>\n          Back\n        </Button>\n        <Button color=\"primary\" onClick={onDone} disabled={!didConfirm}>\n          Done\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction AddHardwareWalletSplash({ onContinue, onClose }) {\n  return (\n    <>\n      <DialogTitle>Add hardware wallet</DialogTitle>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <b>\n            Connect your ledger and open the Solana application. When you are\n            ready, click \"continue\".\n          </b>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={onClose}>\n          Cancel\n        </Button>\n        <Button color=\"primary\" onClick={onContinue}>\n          Continue\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction LedgerAccounts({ onContinue, onClose, open }) {\n  const [dPathMenuItem, setDPathMenuItem] = useState(\n    DerivationPathMenuItem.Bip44Root,\n  );\n  const { enqueueSnackbar } = useSnackbar();\n  const [accounts, setAccounts] = useState(null);\n  const onClick = (provider) => {\n    onContinue({\n      provider,\n      publicKey: provider.pubKey,\n      derivationPath: provider.derivationPath,\n      account: provider.account,\n      change: provider.change,\n    });\n  };\n  useEffect(() => {\n    if (open) {\n      const fetch = async () => {\n        let accounts = [];\n        if (dPathMenuItem === DerivationPathMenuItem.Bip44Root) {\n          let provider = new LedgerWalletProvider({\n            derivationPath: toDerivationPath(dPathMenuItem),\n          });\n          accounts.push(await provider.init());\n        } else {\n          setAccounts(null);\n          // Loading in parallel makes the ledger upset. So do it serially.\n          for (let k = 0; k < 10; k += 1) {\n            let provider = new LedgerWalletProvider({\n              derivationPath: toDerivationPath(dPathMenuItem),\n              account: k,\n            });\n            accounts.push(await provider.init());\n          }\n        }\n        setAccounts(accounts);\n      };\n      fetch().catch((err) => {\n        console.log(`received error when attempting to connect ledger: ${err}`);\n        if (err && err.statusCode === 0x6804) {\n          enqueueSnackbar('Unlock ledger device', { variant: 'error' });\n        }\n        onClose();\n      });\n    }\n  }, [dPathMenuItem, enqueueSnackbar, open, onClose]);\n  return (\n    <Card elevation={0}>\n      {accounts === null ? (\n        <div style={{ padding: '24px' }}>\n          <Typography align=\"center\">\n            Loading accounts from your hardware wallet\n          </Typography>\n          <CircularProgress\n            style={{\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n            }}\n          />\n        </div>\n      ) : (\n        <AccountsSelector\n          showRoot={true}\n          onClick={onClick}\n          accounts={accounts}\n          setDPathMenuItem={setDPathMenuItem}\n          dPathMenuItem={dPathMenuItem}\n        />\n      )}\n    </Card>\n  );\n}\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default function ConnectionIcon() {\n  return (\n    <SvgIcon style={{ height: 28, width: 28, margin: -2 }} viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n      <path d=\"M7.76 16.24C6.67 15.16 6 13.66 6 12s.67-3.16 1.76-4.24l1.42 1.42C8.45 9.9 8 10.9 8 12c0 1.1.45 2.1 1.17 2.83l-1.41 1.41zm8.48 0C17.33 15.16 18 13.66 18 12s-.67-3.16-1.76-4.24l-1.42 1.42C15.55 9.9 16 10.9 16 12c0 1.1-.45 2.1-1.17 2.83l1.41 1.41zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm8 2c0 2.21-.9 4.21-2.35 5.65l1.42 1.42C20.88 17.26 22 14.76 22 12s-1.12-5.26-2.93-7.07l-1.42 1.42A7.94 7.94 0 0120 12zM6.35 6.35L4.93 4.93C3.12 6.74 2 9.24 2 12s1.12 5.26 2.93 7.07l1.42-1.42C4.9 16.21 4 14.21 4 12s.9-4.21 2.35-5.65z\" />\n    </SvgIcon>\n  );\n}\n","import { createContext, useContext, useEffect, useState } from 'react';\n\nconst ConnectedWalletsContext = createContext({});\n\nexport const ConnectedWalletsProvider = ({ children }) => {\n  const [connectedWallets, setConnectedWallets] = useState({});\n\n  useEffect(() => {\n    const updateConnectionAmount = () => {\n      chrome.storage.local.get('connectedWallets', (result) => {\n        setConnectedWallets(result.connectedWallets || {});\n      });\n    };\n    const listener = (changes) => {\n      if ('connectedWallets' in changes) {\n        updateConnectionAmount();\n      }\n    };\n    updateConnectionAmount();\n    chrome.storage.local.onChanged.addListener(listener);\n    return () => chrome.storage.local.onChanged.removeListener(listener);\n  }, []);\n\n  return (\n    <ConnectedWalletsContext.Provider value={connectedWallets}>\n      {children}\n    </ConnectedWalletsContext.Provider>\n  );\n};\n\nexport const useConnectedWallets = () => useContext(ConnectedWalletsContext);\n","import { createContext, useContext, useState } from 'react';\n\nconst PageContext = createContext(['wallet', () => {}]);\n\nexport const PageProvider = ({ children }) => {\n  const [page, setPage] = useState('wallet');\n\n  return (\n    <PageContext.Provider value={[page, setPage]}>\n      {children}\n    </PageContext.Provider>\n  );\n};\n\nexport const usePage = () => useContext(PageContext);\n","import React, { useState } from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport DialogForm from './DialogForm';\n\nexport default function AddCustomClusterDialog({ open, onAdd, onClose }) {\n  const [name, setName] = useState('');\n  const [apiUrl, setApiUrl] = useState('');\n\n  return (\n    <DialogForm\n      open={open}\n      onEnter={() => {\n        setName('');\n        setApiUrl('');\n      }}\n      onClose={onClose}\n      onSubmit={() => onAdd({ name, apiUrl })}\n      fullWidth\n    >\n      <DialogTitle>Add Custom Network</DialogTitle>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <TextField\n            label=\"Name\"\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={name}\n            onChange={(e) => setName(e.target.value.trim())}\n          />\n          <TextField\n            label=\"Url\"\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={apiUrl}\n            onChange={(e) => setApiUrl(e.target.value.trim())}\n          />\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n        <Button type=\"submit\" color=\"primary\">\n          Add\n        </Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n","import React, { useState, useMemo } from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useConnectionConfig } from '../utils/connection';\nimport {\n  clusterForEndpoint,\n  getClusters,\n  addCustomCluster,\n  customClusterExists,\n} from '../utils/clusters';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { useWalletSelector } from '../utils/wallet';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport CheckIcon from '@material-ui/icons/Check';\nimport AddIcon from '@material-ui/icons/Add';\nimport ExitToApp from '@material-ui/icons/ExitToApp';\nimport AccountIcon from '@material-ui/icons/AccountCircle';\nimport UsbIcon from '@material-ui/icons/Usb';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport SolanaIcon from './SolanaIcon';\nimport CodeIcon from '@material-ui/icons/Code';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\nimport AddAccountDialog from './AddAccountDialog';\nimport DeleteMnemonicDialog from './DeleteMnemonicDialog';\nimport AddHardwareWalletDialog from './AddHarwareWalletDialog';\nimport { ExportMnemonicDialog } from './ExportAccountDialog.js';\nimport {\n  isExtension,\n  isExtensionPopup,\n  useIsExtensionWidth,\n} from '../utils/utils';\nimport ConnectionIcon from './ConnectionIcon';\nimport { Badge } from '@material-ui/core';\nimport { useConnectedWallets } from '../utils/connected-wallets';\nimport { usePage } from '../utils/page';\nimport { MonetizationOn, OpenInNew } from '@material-ui/icons';\nimport AddCustomClusterDialog from './AddCustomClusterDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  content: {\n    flexGrow: 1,\n    paddingBottom: theme.spacing(3),\n    [theme.breakpoints.up(theme.ext)]: {\n      paddingTop: theme.spacing(3),\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1),\n    },\n  },\n  title: {\n    flexGrow: 1,\n  },\n  button: {\n    marginLeft: theme.spacing(1),\n  },\n  menuItemIcon: {\n    minWidth: 32,\n  },\n  badge: {\n    backgroundColor: theme.palette.success.main,\n    color: theme.palette.text.main,\n    height: 16,\n    width: 16,\n  },\n}));\n\nexport default function NavigationFrame({ children }) {\n  const classes = useStyles();\n  const isExtensionWidth = useIsExtensionWidth();\n  return (\n    <>\n      \n        <Grid container justify=\"flex-end\">\n          <Box m={1}>\n            <NavigationButtons />     \n          </Box>\n        </Grid>      \n      <main className={classes.content}>{children}</main>\n      {!isExtensionWidth && <Footer />}\n    </>\n  );\n}\n\nfunction NavigationButtons() {\n  const isExtensionWidth = useIsExtensionWidth();\n  const [page] = usePage();\n\n  if (isExtensionPopup) {\n    return null;\n  }\n\n  let elements = [];\n  if (page === 'wallet') {\n    elements = [\n      isExtension && <ConnectionsButton />,\n      <WalletSelector />,\n      <NetworkSelector />,\n    ];\n  } else if (page === 'connections') {\n    elements = [<WalletButton />];\n  }\n\n  if (isExtension && isExtensionWidth) {\n    elements.push(<ExpandButton />);\n  }\n\n  return elements;\n}\n\nfunction ExpandButton() {\n  const onClick = () => {\n    window.open(chrome.extension.getURL('index.html'), '_blank');\n  };\n\n  return (\n    <Tooltip title=\"Expand View\">\n      <IconButton color=\"inherit\" onClick={onClick}>\n        <OpenInNew />\n      </IconButton>\n    </Tooltip>\n  );\n}\n\nfunction WalletButton() {\n  const classes = useStyles();\n  const setPage = usePage()[1];\n  const onClick = () => setPage('wallet');\n\n  return (\n    <>\n      <Hidden smUp>\n        <Tooltip title=\"Wallet Balances\">\n          <IconButton color=\"inherit\" onClick={onClick}>\n            <MonetizationOn />\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Hidden xsDown>\n        <Button color=\"inherit\" onClick={onClick} className={classes.button}>\n          Wallet\n        </Button>\n      </Hidden>\n    </>\n  );\n}\n\nfunction ConnectionsButton() {\n  const classes = useStyles();\n  const setPage = usePage()[1];\n  const onClick = () => setPage('connections');\n  const connectedWallets = useConnectedWallets();\n\n  const connectionAmount = Object.keys(connectedWallets).length;\n\n  return (\n    <>\n      <Hidden smUp>\n        <Tooltip title=\"Manage Connections\">\n          <IconButton color=\"inherit\" onClick={onClick}>\n            <Badge\n              badgeContent={connectionAmount}\n              classes={{ badge: classes.badge }}\n            >\n              <ConnectionIcon />\n            </Badge>\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Hidden xsDown>\n        <Badge\n          badgeContent={connectionAmount}\n          classes={{ badge: classes.badge }}\n        >\n          <Button color=\"inherit\" onClick={onClick} className={classes.button}>\n            Connections\n          </Button>\n        </Badge>\n      </Hidden>\n    </>\n  );\n}\n\nfunction NetworkSelector() {\n  const { endpoint, setEndpoint } = useConnectionConfig();\n  const cluster = useMemo(() => clusterForEndpoint(endpoint), [endpoint]);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [addCustomNetworkOpen, setCustomNetworkOpen] = useState(false);\n  const classes = useStyles();\n\n  return (\n    <>\n      <AddCustomClusterDialog\n        open={addCustomNetworkOpen}\n        onClose={() => setCustomNetworkOpen(false)}\n        onAdd={({ name, apiUrl }) => {\n          addCustomCluster(name, apiUrl);\n          setCustomNetworkOpen(false);\n        }}\n      />\n      <Hidden xsDown>        \n        <Button\n          color=\"primary\"\n          variant=\"outlined\"\n          onClick={(e) => setAnchorEl(e.target)}\n          className={classes.button}\n        >\n          Network: {cluster?.label ?? 'Network'}\n        </Button>\n      </Hidden>\n      <Hidden smUp>\n        <Tooltip title=\"Select Network\" arrow>\n          <IconButton color=\"inherit\" onClick={(e) => setAnchorEl(e.target)}>\n            <SolanaIcon />\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Menu\n        anchorEl={anchorEl}\n        open={!!anchorEl}\n        onClose={() => setAnchorEl(null)}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        getContentAnchorEl={null}\n      >\n        {getClusters().map((cluster) => (\n          <MenuItem\n            key={cluster.apiUrl}\n            onClick={() => {\n              setAnchorEl(null);\n              setEndpoint(cluster.apiUrl);\n            }}\n            selected={cluster.apiUrl === endpoint}\n          >\n            <ListItemIcon className={classes.menuItemIcon}>\n              {cluster.apiUrl === endpoint ? (\n                <CheckIcon fontSize=\"small\" />\n              ) : null}\n            </ListItemIcon>\n            {cluster.name === 'mainnet-beta-backup'\n              ? 'Mainnet Beta Backup'\n              : cluster.apiUrl}\n          </MenuItem>\n        ))}\n        <MenuItem\n          onClick={() => {\n            setCustomNetworkOpen(true);\n          }}\n        >\n          <ListItemIcon className={classes.menuItemIcon}></ListItemIcon>\n          {customClusterExists()\n            ? 'Edit Custom Endpoint'\n            : 'Add Custom Endpoint'}\n        </MenuItem>\n      </Menu>\n    </>\n  );\n}\n\nfunction WalletSelector() {\n  const {\n    accounts,\n    derivedAccounts,\n    hardwareWalletAccount,\n    setHardwareWalletAccount,\n    setWalletSelector,\n    addAccount,\n  } = useWalletSelector();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [addAccountOpen, setAddAccountOpen] = useState(false);\n  const [\n    addHardwareWalletDialogOpen,\n    setAddHardwareWalletDialogOpen,\n  ] = useState(false);\n  const [deleteMnemonicOpen, setDeleteMnemonicOpen] = useState(false);\n  const [exportMnemonicOpen, setExportMnemonicOpen] = useState(false);\n  const classes = useStyles();\n\n  if (accounts.length === 0) {\n    return null;\n  }\n  return (\n    <>\n      <AddHardwareWalletDialog\n        open={addHardwareWalletDialogOpen}\n        onClose={() => setAddHardwareWalletDialogOpen(false)}\n        onAdd={({ publicKey, derivationPath, account, change }) => {\n          setHardwareWalletAccount({\n            name: 'Hardware wallet',\n            publicKey,\n            importedAccount: publicKey.toString(),\n            ledger: true,\n            derivationPath,\n            account,\n            change,\n          });\n          setWalletSelector({\n            walletIndex: undefined,\n            importedPubkey: publicKey.toString(),\n            ledger: true,\n            derivationPath,\n            account,\n            change,\n          });\n        }}\n      />\n      <AddAccountDialog\n        open={addAccountOpen}\n        onClose={() => setAddAccountOpen(false)}\n        onAdd={({ name, importedAccount }) => {\n          addAccount({ name, importedAccount });\n          setWalletSelector({\n            walletIndex: importedAccount ? undefined : derivedAccounts.length,\n            importedPubkey: importedAccount\n              ? importedAccount.publicKey.toString()\n              : undefined,\n            ledger: false,\n          });\n          setAddAccountOpen(false);\n        }}\n      />\n      <ExportMnemonicDialog\n        open={exportMnemonicOpen}\n        onClose={() => setExportMnemonicOpen(false)}\n      />\n      <DeleteMnemonicDialog\n        open={deleteMnemonicOpen}\n        onClose={() => setDeleteMnemonicOpen(false)}\n      />\n      <Hidden xsDown>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={(e) => setAnchorEl(e.target)}\n          className={classes.button}\n        >\n          Account\n        </Button>\n      </Hidden>\n      <Hidden smUp>\n        <Tooltip title=\"Select Account\" arrow>\n          <IconButton color=\"inherit\" onClick={(e) => setAnchorEl(e.target)}>\n            <AccountIcon />\n          </IconButton>\n        </Tooltip>\n      </Hidden>\n      <Menu\n        anchorEl={anchorEl}\n        open={!!anchorEl}\n        onClose={() => setAnchorEl(null)}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        getContentAnchorEl={null}\n      >\n        {accounts.map((account) => (\n          <AccountListItem\n            account={account}\n            classes={classes}\n            setAnchorEl={setAnchorEl}\n            setWalletSelector={setWalletSelector}\n          />\n        ))}\n        {hardwareWalletAccount && (\n          <>\n            <Divider />\n            <AccountListItem\n              account={hardwareWalletAccount}\n              classes={classes}\n              setAnchorEl={setAnchorEl}\n              setWalletSelector={setWalletSelector}\n            />\n          </>\n        )}\n        <Divider />\n        <MenuItem onClick={() => setAddHardwareWalletDialogOpen(true)}>\n          <ListItemIcon className={classes.menuItemIcon}>\n            <UsbIcon fontSize=\"small\" />\n          </ListItemIcon>\n          Import Hardware Wallet\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            setAnchorEl(null);\n            setAddAccountOpen(true);\n          }}\n        >\n          <ListItemIcon className={classes.menuItemIcon}>\n            <AddIcon fontSize=\"small\" />\n          </ListItemIcon>\n          Add Account\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            setAnchorEl(null);\n            setExportMnemonicOpen(true);\n          }}\n        >\n          <ListItemIcon className={classes.menuItemIcon}>\n            <ImportExportIcon fontSize=\"small\" />\n          </ListItemIcon>\n          Export Mnemonic\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            setAnchorEl(null);\n            setDeleteMnemonicOpen(true);\n          }}\n        >\n          <ListItemIcon className={classes.menuItemIcon}>\n            <ExitToApp fontSize=\"small\" />\n          </ListItemIcon>\n          {'Delete Mnemonic & Log Out'}\n        </MenuItem>\n      </Menu>\n    </>\n  );\n}\n\nconst useFooterStyles = makeStyles((theme) => ({\n  footer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: theme.spacing(2),\n  },\n}));\n\nfunction Footer() {\n  const classes = useFooterStyles();\n  return (\n    <footer className={classes.footer}>\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        component=\"a\"\n        target=\"_blank\"\n        rel=\"noopener\"\n        href=\"https://github.com/serum-foundation/spl-token-wallet\"\n        startIcon={<CodeIcon />}\n      >\n        View Source\n      </Button>\n    </footer>\n  );\n}\n\nfunction AccountListItem({ account, classes, setAnchorEl, setWalletSelector }) {\n  return (\n    <MenuItem\n      key={account.address.toBase58()}\n      onClick={() => {\n        setAnchorEl(null);\n        setWalletSelector(account.selector);\n      }}\n      selected={account.isSelected}\n      component=\"div\"\n    >\n      <ListItemIcon className={classes.menuItemIcon}>\n        {account.isSelected ? <CheckIcon fontSize=\"small\" /> : null}\n      </ListItemIcon>\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\n        <Typography>{account.name}</Typography>\n        <Typography color=\"textSecondary\">\n          {account.address.toBase58()}\n        </Typography>\n      </div>\n    </MenuItem>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport BalancesList from '../components/BalancesList';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core';\nimport { useIsExtensionWidth } from '../utils/utils';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    [theme.breakpoints.down(theme.ext)]: {\n      padding: 0,\n    },\n    [theme.breakpoints.up(theme.ext)]: {\n      maxWidth: 'md',\n    }    \n  },\n  balancesContainer: {\n    [theme.breakpoints.down(theme.ext)]: {\n      marginBottom: 24,\n    }    \n  },\n}));\n\nexport default function WalletPage() {\n  const classes = useStyles();\n  const isExtensionWidth = useIsExtensionWidth();\n  return (\n    <Container             \n      fixed maxWidth=\"xs\" \n      className={classes.container}\n    >\n      <Grid container spacing={isExtensionWidth ? 0 : 3}>\n        <Grid item xs={12} className={classes.balancesContainer}>\n          <BalancesList style=\"border-radius:20\"/>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n","import bs58 from 'bs58';\nimport { Connection, Message, StakeInstruction, StakeProgram, SystemInstruction, SystemProgram } from '@solana/web3.js';\nimport {\n  decodeInstruction,\n  Market,\n  MARKETS,\n  SETTLE_FUNDS_BASE_WALLET_INDEX,\n  SETTLE_FUNDS_QUOTE_WALLET_INDEX,\n  NEW_ORDER_OPEN_ORDERS_INDEX,\n  NEW_ORDER_OWNER_INDEX,\n  NEW_ORDER_V3_OPEN_ORDERS_INDEX,\n  NEW_ORDER_V3_OWNER_INDEX,\n} from '@project-serum/serum';\nimport { decodeTokenInstruction } from '@project-serum/token';\nimport { PublicKey } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from './tokens/instructions';\nimport { Wallet } from './wallet';\n\nconst RAYDIUM_STAKE_PROGRAM_ID = new PublicKey(\n  'EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q',\n);\nconst RAYDIUM_LP_PROGRAM_ID = new PublicKey(\n  'RVKd61ztZW9GUwhRbbLoYVRE5Xf1B2tVscKqwZqXgEr',\n);\n\nconst MANGO_PROGRAM_ID = new PublicKey(\n  'JD3bq9hGdy38PuWQ4h2YJpELmHVGPPfFSuFkpzAd9zfu',\n);\nconst MANGO_PROGRAM_ID_V2 = new PublicKey(\n  '5fNfvyp5czQVX77yoACa3JJVEhdRaWjPuazuWgjhTqEH',\n);\n\nconst marketCache = {};\nlet marketCacheConnection = null;\nconst cacheDuration = 15 * 1000;\n\nexport const decodeMessage = async (connection: Connection, wallet: Wallet, message: Buffer) => {\n  // get message object\n  const transactionMessage = Message.from(message);\n  if (!transactionMessage?.instructions || !transactionMessage?.accountKeys) {\n    return;\n  }\n\n  // get owned keys (used for security checks)\n  const publicKey = wallet.publicKey;\n\n  // get instructions\n  const instructions: any[] = [];\n  for (var i = 0; i < transactionMessage.instructions.length; i++) {\n    let transactionInstruction = transactionMessage.instructions[i];\n    const instruction = await toInstruction(\n      connection,\n      publicKey,\n      transactionMessage?.accountKeys,\n      transactionInstruction,\n      transactionMessage,\n      i,\n    );\n    instructions.push({\n      ...instruction,\n      rawData: transactionInstruction?.data,\n    });\n  }\n  return instructions;\n};\n\nconst toInstruction = async (\n  connection: Connection,\n  publicKey: PublicKey,\n  accountKeys,\n  instruction,\n  transactionMessage: Message,\n  index: number,\n) => {\n  if (\n    instruction?.data == null ||\n    !instruction?.accounts ||\n    !instruction?.programIdIndex\n  ) {\n    return;\n  }\n\n  // get instruction data\n  const decoded = bs58.decode(instruction.data);\n\n  const programId = getAccountByIndex(\n    [instruction.programIdIndex],\n    accountKeys,\n    0,\n  );\n  if (!programId) {\n    return null;\n  }\n\n  try {\n    if (programId.equals(SystemProgram.programId)) {\n      console.log('[' + index + '] Handled as system instruction');\n      return handleSystemInstruction(publicKey, instruction, accountKeys);\n    } else if (programId.equals(StakeProgram.programId)) {\n      console.log('[' + index + '] Handled as stake instruction');\n      return handleStakeInstruction(publicKey, instruction, accountKeys);\n    } else if (programId.equals(TOKEN_PROGRAM_ID)) {\n      console.log('[' + index + '] Handled as token instruction');\n      return handleTokenInstruction(publicKey, instruction, accountKeys);\n    } else if (\n      MARKETS.some(\n        (market) => market.programId && market.programId.equals(programId),\n      )\n    ) {\n      console.log('[' + index + '] Handled as dex instruction');\n      let decodedInstruction = decodeInstruction(decoded);\n      return await handleDexInstruction(\n        connection,\n        instruction,\n        accountKeys,\n        decodedInstruction,\n      );\n    } else if (programId.equals(RAYDIUM_STAKE_PROGRAM_ID)) {\n      console.log('[' + index + '] Handled as raydium stake instruction');\n      // @ts-ignore\n      const decodedInstruction = decodeStakeInstruction(decoded);\n      return await handleRayStakeInstruction(\n        connection,\n        instruction,\n        accountKeys,\n        decodedInstruction,\n      );\n    } else if (programId.equals(RAYDIUM_LP_PROGRAM_ID)) {\n      console.log('[' + index + '] Handled as raydium lp instruction');\n      // @ts-ignore\n      const decodedInstruction = decodeLpInstruction(decoded);\n      return await handleRayLpInstruction(\n        connection,\n        instruction,\n        accountKeys,\n        decodedInstruction,\n      );\n    } else if (programId.equals(MANGO_PROGRAM_ID) || programId.equals(MANGO_PROGRAM_ID_V2)) {\n      console.log('[' + index + '] Handled as mango markets instruction');\n      // @ts-ignore\n      let decodedInstruction = decodeMangoInstruction(decoded);\n      return await handleMangoInstruction(\n        connection,\n        instruction,\n        accountKeys,\n        decodedInstruction,\n      );\n    } else {\n      return {\n        type: 'Unknown',\n        accountMetas: instruction.accounts.map((index) => ({\n          publicKey: accountKeys[index],\n          isWritable: transactionMessage.isAccountWritable(index),\n        })),\n        programId,\n      };\n    }\n  } catch (e) {\n    console.log(`Failed to decode instruction: ${e}`);\n  }\n\n  // all decodings failed\n  console.log('[' + index + '] Failed, data: ' + JSON.stringify(decoded));\n\n  return;\n};\n\nconst handleMangoInstruction = async (\n  connection,\n  instruction,\n  accountKeys,\n  decodedInstruction,\n) => {\n  // TODO\n  return {\n    type: 'mango',\n  };\n};\n\nconst handleRayStakeInstruction = async (\n  connection,\n  instruction,\n  accountKeys,\n  decodedInstruction,\n) => {\n  // TODO\n  return {\n    type: 'raydium',\n  };\n};\n\nconst handleRayLpInstruction = async (\n  connection,\n  instruction,\n  accountKeys,\n  decodedInstruction,\n) => {\n  // TODO\n  return {\n    type: 'raydium',\n  };\n};\n\nconst decodeMangoInstruction = () => {\n  // TODO\n  return undefined;\n};\n\nconst decodeStakeInstruction = () => {\n  // TODO\n  return undefined;\n};\n\nconst decodeLpInstruction = () => {\n  // TODO\n  return undefined;\n};\n\nconst handleDexInstruction = async (\n  connection,\n  instruction,\n  accountKeys,\n  decodedInstruction,\n) => {\n  if (!decodedInstruction || Object.keys(decodedInstruction).length > 1) {\n    return;\n  }\n\n  const { accounts, programIdIndex } = instruction;\n\n  // get market info\n  const marketInfo =\n    accountKeys &&\n    MARKETS.find(\n      (market) =>\n        accountKeys.findIndex((accountKey) =>\n          accountKey.equals(market.address),\n        ) > -1,\n    );\n\n  // get market\n  let market, programIdAddress;\n  try {\n    const marketAddress =\n      marketInfo?.address || getAccountByIndex(accounts, accountKeys, 0);\n    programIdAddress =\n      marketInfo?.programId ||\n      getAccountByIndex([programIdIndex], accountKeys, 0);\n    const strAddress = marketAddress.toBase58();\n    const now = new Date().getTime();\n    if (\n      !(\n        connection === marketCacheConnection &&\n        strAddress in marketCache &&\n        now - marketCache[strAddress].ts < cacheDuration\n      )\n    ) {\n      marketCacheConnection = connection;\n      console.log('Loading market', strAddress);\n      marketCache[strAddress] = {\n        market: await Market.load(\n          connection,\n          marketAddress,\n          {},\n          programIdAddress,\n        ),\n        ts: now,\n      };\n    }\n    market = marketCache[strAddress].market;\n  } catch (e) {\n    console.log('Error loading market: ' + e.message);\n  }\n\n  // get data\n  const type = Object.keys(decodedInstruction)[0];\n  let data = decodedInstruction[type];\n  if (type === 'settleFunds') {\n    const settleFundsData = getSettleFundsData(accounts, accountKeys);\n    if (!settleFundsData) {\n      return;\n    } else {\n      data = { ...data, ...settleFundsData };\n    }\n  } else if (type === 'newOrder') {\n    const newOrderData = getNewOrderData(accounts, accountKeys);\n    data = { ...data, ...newOrderData };\n  } else if (type === 'newOrderV3') {\n    const newOrderData = getNewOrderV3Data(accounts, accountKeys);\n    data = { ...data, ...newOrderData };\n  }\n  return {\n    type,\n    data,\n    market,\n    marketInfo,\n  };\n};\n\nconst handleSystemInstruction = (publicKey, instruction, accountKeys) => {\n  const { programIdIndex, accounts, data } = instruction;\n  if (!programIdIndex || !accounts || !data) {\n    return;\n  }\n\n  // construct system instruction\n  const systemInstruction = {\n    programId: accountKeys[programIdIndex],\n    keys: accounts.map((accountIndex) => ({\n      pubkey: accountKeys[accountIndex],\n    })),\n    data: bs58.decode(data),\n  };\n\n  // get layout\n  let decoded;\n  const type = SystemInstruction.decodeInstructionType(systemInstruction);\n  switch (type) {\n    case 'Create':\n      decoded = SystemInstruction.decodeCreateAccount(systemInstruction);\n      break;\n    case 'CreateWithSeed':\n      decoded = SystemInstruction.decodeCreateWithSeed(systemInstruction);\n      break;\n    case 'Allocate':\n      decoded = SystemInstruction.decodeAllocate(systemInstruction);\n      break;\n    case 'AllocateWithSeed':\n      decoded = SystemInstruction.decodeAllocateWithSeed(systemInstruction);\n      break;\n    case 'Assign':\n      decoded = SystemInstruction.decodeAssign(systemInstruction);\n      break;\n    case 'AssignWithSeed':\n      decoded = SystemInstruction.decodeAssignWithSeed(systemInstruction);\n      break;\n    case 'Transfer':\n      decoded = SystemInstruction.decodeTransfer(systemInstruction);\n      break;\n    case 'AdvanceNonceAccount':\n      decoded = SystemInstruction.decodeNonceAdvance(systemInstruction);\n      break;\n    case 'WithdrawNonceAccount':\n      decoded = SystemInstruction.decodeNonceWithdraw(systemInstruction);\n      break;\n    case 'InitializeNonceAccount':\n      decoded = SystemInstruction.decodeNonceInitialize(systemInstruction);\n      break;\n    case 'AuthorizeNonceAccount':\n      decoded = SystemInstruction.decodeNonceAuthorize(systemInstruction);\n      break;\n    default:\n      return;\n  }\n\n  if (\n    !decoded ||\n    (decoded.fromPubkey && !publicKey.equals(decoded.fromPubkey))\n  ) {\n    return;\n  }\n\n  return {\n    type: 'system' + type,\n    data: decoded,\n  };\n};\n\nconst handleStakeInstruction = (publicKey, instruction, accountKeys) => {\n  const { programIdIndex, accounts, data } = instruction;\n  if (!programIdIndex || !accounts || !data) {\n    return;\n  }\n\n  // construct stake instruction\n  const stakeInstruction = {\n    programId: accountKeys[programIdIndex],\n    keys: accounts.map((accountIndex) => ({\n      pubkey: accountKeys[accountIndex],\n    })),\n    data: bs58.decode(data),\n  };\n\n  let decoded;\n  const type = StakeInstruction.decodeInstructionType(stakeInstruction);\n  switch (type) {\n    case 'AuthorizeWithSeed':\n      decoded = StakeInstruction.decodeAuthorizeWithSeed(stakeInstruction);\n      break;\n    case 'Authorize':\n      decoded = StakeInstruction.decodeAuthorize(stakeInstruction);\n      break;\n    case 'Deactivate':\n      decoded = StakeInstruction.decodeDeactivate(stakeInstruction);\n      break;\n    case 'Delegate':\n      decoded = StakeInstruction.decodeDelegate(stakeInstruction);\n      break;\n    case 'Initialize':\n      decoded = StakeInstruction.decodeInitialize(stakeInstruction);\n      // Lockup inactive if all zeroes\n      const lockup = decoded.lockup;\n      if (lockup && lockup.unixTimestamp === 0 && lockup.epoch === 0 && lockup.custodian.equals(PublicKey.default)) {\n        decoded.lockup = 'Inactive';\n      }\n      else {\n        decoded.lockup = `unixTimestamp: ${lockup.unixTimestamp}, custodian: ${lockup.epoch}, custodian: ${lockup.custodian.toBase58()}`;\n      }\n      // flatten authorized to allow address render\n      decoded.authorizedStaker = decoded.authorized.staker\n      decoded.authorizedWithdrawer = decoded.authorized.withdrawer\n      delete decoded.authorized\n      break;\n    case 'Split':\n      decoded = StakeInstruction.decodeSplit(stakeInstruction);\n      break;\n    case 'Withdraw':\n      decoded = StakeInstruction.decodeWithdraw(stakeInstruction);\n      break;\n    default:\n      return;\n  }\n\n  if (\n    !decoded ||\n    (decoded.fromPubkey && !publicKey.equals(decoded.fromPubkey))\n  ) {\n    return;\n  }\n\n  return {\n    type: 'stake' + type,\n    data: decoded,\n  };\n};\n\nconst handleTokenInstruction = (\n  publicKey: PublicKey,\n  instruction,\n  accountKeys,\n) => {\n  const { programIdIndex, accounts, data } = instruction;\n  if (!programIdIndex || !accounts || !data) {\n    return;\n  }\n\n  // construct token instruction\n  const tokenInstruction = {\n    programId: accountKeys[programIdIndex],\n    keys: accounts.map((accountIndex) => ({\n      pubkey: accountKeys[accountIndex],\n    })),\n    data: bs58.decode(data),\n  };\n\n  let decoded = decodeTokenInstruction(tokenInstruction);\n\n  return {\n    type: decoded.type,\n    data: decoded.params,\n  }\n};\n\nconst getNewOrderData = (accounts, accountKeys) => {\n  const openOrdersPubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    NEW_ORDER_OPEN_ORDERS_INDEX,\n  );\n  const ownerPubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    NEW_ORDER_OWNER_INDEX,\n  );\n  return { openOrdersPubkey, ownerPubkey };\n};\n\nconst getNewOrderV3Data = (accounts, accountKeys) => {\n  const openOrdersPubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    NEW_ORDER_V3_OPEN_ORDERS_INDEX,\n  );\n  const ownerPubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    NEW_ORDER_V3_OWNER_INDEX,\n  );\n  return { openOrdersPubkey, ownerPubkey };\n};\n\nconst getSettleFundsData = (accounts, accountKeys) => {\n  const basePubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    SETTLE_FUNDS_BASE_WALLET_INDEX,\n  );\n\n  const quotePubkey = getAccountByIndex(\n    accounts,\n    accountKeys,\n    SETTLE_FUNDS_QUOTE_WALLET_INDEX,\n  );\n\n  if (!basePubkey || !quotePubkey) {\n    return;\n  }\n\n  return { basePubkey, quotePubkey };\n};\n\nconst getAccountByIndex = (accounts, accountKeys, accountIndex) => {\n  const index = accounts.length > accountIndex && accounts[accountIndex];\n  return accountKeys?.length > index && accountKeys[index];\n};\n","import React from 'react';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function LabelValue({\n  label,\n  value,\n  link = false,\n  onClick,\n  gutterBottom,\n}) {\n  return (\n    <Typography gutterBottom={gutterBottom}>\n      {label}:{' '}\n      {link ? (\n        <Link href=\"#\" onClick={onClick}>\n          {value}\n        </Link>\n      ) : (\n        <span style={{ color: '#7B7B7B' }}>{value}</span>\n      )}\n    </Typography>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\nimport { useWallet } from '../../utils/wallet';\n\nexport default function Neworder({ instruction, onOpenAddress, v3 = false }) {\n  const wallet = useWallet();\n  const { data, market, marketInfo } = instruction;\n  const marketLabel =\n    (marketInfo &&\n      marketInfo?.name + (marketInfo?.deprecated ? ' (deprecated)' : '')) ||\n    market?._decoded?.ownAddress?.toBase58() ||\n    'Unknown';\n\n  const getAddressValue = (address) => {\n    const isOwner = wallet.publicKey.equals(address);\n    return isOwner ? 'This wallet' : address?.toBase58() || 'Unknown';\n  };\n\n  const { side, limitPrice, orderType, ownerPubkey } = data;\n  const maxQuantity = v3 ? data.maxBaseQuantity : data.maxQuantity;\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        Place an order\n      </Typography>\n      <LabelValue\n        label=\"Market\"\n        value={marketLabel}\n        link={true}\n        onClick={() =>\n          onOpenAddress(\n            (marketInfo?.address || market?._decoded?.ownAddress)?.toBase58(),\n          )\n        }\n      />\n      <LabelValue\n        label=\"Side\"\n        value={side.charAt(0).toUpperCase() + side.slice(1)}\n      />\n      <LabelValue\n        label=\"Price\"\n        value={market?.priceLotsToNumber(limitPrice) || '' + limitPrice}\n      />\n      <LabelValue\n        label=\"Quantity\"\n        value={market?.baseSizeLotsToNumber(maxQuantity) || '' + maxQuantity}\n      />\n      <LabelValue\n        label=\"Type\"\n        value={orderType.charAt(0).toUpperCase() + orderType.slice(1)}\n      />\n      <LabelValue\n        label=\"Owner\"\n        link={ownerPubkey}\n        value={ownerPubkey ? getAddressValue(ownerPubkey) : ownerPubkey}\n        onOpenAddress={() =>\n          ownerPubkey && onOpenAddress(ownerPubkey?.toBase58())\n        }\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport LabelValue from './LabelValue';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function UnknownInstruction({ instruction, onOpenAddress }) {\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        Unknown instruction:\n      </Typography>\n      <LabelValue\n        key=\"Program\"\n        label=\"Program\"\n        value={instruction.programId?.toBase58()}\n        link={true}\n        gutterBottom={true}\n        onClick={() => onOpenAddress(instruction.programId.toBase58())}\n      />\n      {instruction.accountMetas &&\n        instruction.accountMetas.map((accountMeta, index) => {\n          return (\n            <>\n              <LabelValue\n                key={index + ''}\n                label={'Account #' + (index + 1)}\n                value={accountMeta.publicKey.toBase58()}\n                link={true}\n                onClick={() => onOpenAddress(accountMeta.publicKey.toBase58())}\n              />\n              <Typography gutterBottom>\n                Writable: {accountMeta.isWritable.toString()}\n              </Typography>\n            </>\n          );\n        })}\n      <Typography style={{ wordBreak: 'break-all' }}>\n        Data: {instruction.rawData}\n      </Typography>\n    </>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\n\nconst TYPE_LABELS = {\n  stakeAuthorizeWithSeed: 'Stake authorize with seed',\n  stakeAuthorize: 'Stake authorize',\n  stakeDeactivate: 'Deactivate stake',\n  stakeDelegate: 'Delegate stake',\n  stakeInitialize: 'Initialize stake',\n  stakeSplit: 'Split stake',\n  stakeWithdraw: 'Withdraw stake',\n};\n\nconst DATA_LABELS = {\n  stakePubkey: { label: 'Stake', address: true },\n  authorizedStaker: { label: 'Authorized staker', address: true },\n  authorizedWithdrawer: { label: 'Authorized withdrawer', address: true },\n  lockup: { label: 'Lockup', address: false },\n  authorizedPubkey: { label: 'Authorized', address: true },\n  votePubkey: { label: 'Vote', address: true },\n  authorizedSeed: { label: 'Seed', address: false },\n  noncePubkey: { label: 'Nonce', address: true },\n  authorityBase: { label: 'Authority base', address: true },\n  authoritySeed: { label: 'Authority seed', address: false },\n  authorityOwner: { label: 'Authority owner', address: true },\n  newAuthorizedPubkey: { label: 'New authorized', address: true },\n  stakeAuthorizationType: { label: 'Stake authorization type', address: false, transform: () => JSON.stringify },\n  custodianPubkey: { label: 'Custodian', address: true },\n  splitStakePubkey: { label: 'Split to', address: true },\n  lamports: { label: 'Lamports', address: false },\n};\n\nexport default function StakeInstruction({ instruction, onOpenAddress }) {\n  const { type, data } = instruction;\n\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {TYPE_LABELS[type]}\n      </Typography>\n      {data &&\n        Object.entries(data).map(([key, value]) => {\n          const dataLabel = DATA_LABELS[key];\n          if (!dataLabel) {\n            return null;\n          }\n          const { label, address, transform } = dataLabel;\n          return (\n            <LabelValue\n              key={key}\n              label={label + ''}\n              value={address ? value?.toBase58() : (transform ? transform(value) : value)}\n              link={address}\n              onClick={() => address && onOpenAddress(value?.toBase58())}\n            />\n          );\n        })}\n    </>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\n\nconst TYPE_LABELS = {\n  systemCreate: 'Create account',\n  systemCreateWithSeed: 'Create account with seed',\n  systemTransfer: 'Transfer SOL',\n};\n\nconst DATA_LABELS = {\n  toPubkey: { label: 'To', address: true },\n  accountPubkey: { label: 'Account', address: true },\n  basePubkey: { label: 'Base', address: true },\n  seed: { label: 'Seed', address: false },\n  noncePubkey: { label: 'Nonce', address: true },\n  authorizedPubkey: { label: 'Authorized', address: true },\n  newAuthorizedPubkey: { label: 'New authorized', address: true },\n  newAccountPubkey: { label: 'New account', address: true },\n  amount: { label: 'Amount', address: false },\n  lamports: { label: 'Lamports', address: false },\n};\n\nexport default function SystemInstruction({ instruction, onOpenAddress }) {\n  const { type, data } = instruction;\n\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {TYPE_LABELS[type]}\n      </Typography>\n      {data &&\n        Object.entries(data).map(([key, value]) => {\n          const dataLabel = DATA_LABELS[key];\n          if (!dataLabel) {\n            return null;\n          }\n          const { label, address } = dataLabel;\n          return (\n            <LabelValue\n              key={key}\n              label={label + ''}\n              value={address ? value?.toBase58() : value}\n              link={address}\n              onClick={() => address && onOpenAddress(value?.toBase58())}\n            />\n          );\n        })}\n    </>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\nimport { useWallet, useWalletPublicKeys } from '../../utils/wallet';\n\nconst TYPE_LABELS = {\n  cancelOrder: 'Cancel order',\n  newOrder: 'Place order',\n  settleFunds: 'Settle funds',\n  matchOrders: 'Match orders',\n};\n\nconst DATA_LABELS = {\n  side: { label: 'Side', address: false },\n  orderId: { label: 'Order Id', address: false },\n  limit: { label: 'Limit', address: false },\n  basePubkey: { label: 'Base wallet', address: true },\n  quotePubkey: { label: 'Quote wallet', address: true },\n};\n\nexport default function DexInstruction({ instruction, onOpenAddress }) {\n  const wallet = useWallet();\n  const [publicKeys] = useWalletPublicKeys();\n  const { type, data, market, marketInfo } = instruction;\n\n  const marketLabel =\n    (marketInfo &&\n      marketInfo?.name + (marketInfo?.deprecated ? ' (deprecated)' : '')) ||\n    market?._decoded?.ownAddress?.toBase58() ||\n    'Unknown';\n\n  const getAddressValue = (address) => {\n    const isOwned = publicKeys.some((ownedKey) => ownedKey.equals(address));\n    const isOwner = wallet.publicKey.equals(address);\n    return isOwner\n      ? 'This wallet'\n      : (isOwned ? '(Owned) ' : '') + address?.toBase58();\n  };\n\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {TYPE_LABELS[type]}\n      </Typography>\n      <LabelValue\n        label=\"Market\"\n        value={marketLabel}\n        link={true}\n        onClick={() =>\n          onOpenAddress(\n            (marketInfo?.address || market?._decoded?.ownAddress)?.toBase58(),\n          )\n        }\n      />\n      {data &&\n        Object.entries(data).map(([key, value]) => {\n          const dataLabel = DATA_LABELS[key];\n          if (!dataLabel) {\n            return null;\n          }\n          const { label, address } = dataLabel;\n          return (\n            <LabelValue\n              key={key}\n              label={label + ''}\n              value={address ? getAddressValue(value) : value + ''}\n              link={address}\n              onClick={() => address && onOpenAddress(value?.toBase58())}\n            />\n          );\n        })}\n    </>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\nimport { useWallet, useWalletPublicKeys } from '../../utils/wallet';\nimport { TOKEN_MINTS } from '@project-serum/serum';\n\nconst TYPE_LABELS = {\n  initializeMint: 'Initialize mint',\n  initializeAccount: 'Initialize account',\n  transfer: 'Transfer',\n  approve: 'Approve',\n  revoke: 'Revoke',\n  mintTo: 'Mint to',\n  closeAccount: 'Close account',\n};\n\nconst DATA_LABELS = {\n  amount: { label: 'Amount', address: false, transform: (amount) => amount.toString()},\n  authorityType: { label: 'Authority type', address: false },\n  currentAuthority: { label: 'Current authority', address: true },\n  decimals: { label: 'Decimals', address: false },\n  delegate: { label: 'Delegate', address: true },\n  destination: { label: 'Destination', address: true },\n  mint: { label: 'Mint', address: true },\n  mintAuthority: { label: 'Mint authority', address: true },\n  newAuthority: { label: 'New authority', address: true },\n  owner: { label: 'Owner', address: true },\n  source: { label: 'Source', address: true },\n};\n\nexport default function TokenInstruction({ instruction, onOpenAddress }) {\n  const wallet = useWallet();\n  const [publicKeys] = useWalletPublicKeys();\n  const { type, data } = instruction;\n\n  const getAddressValue = (address) => {\n    const tokenMint = TOKEN_MINTS.find((token) =>\n      token.address.equals(address),\n    );\n    const isOwned = publicKeys.some((ownedKey) => ownedKey.equals(address));\n    const isOwner = wallet.publicKey.equals(address);\n    return tokenMint\n      ? tokenMint.name\n      : isOwner\n      ? 'This wallet'\n      : (isOwned ? '(Owned) ' : '') + address?.toBase58();\n  };\n\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {TYPE_LABELS[type]}\n      </Typography>\n      {data &&\n        Object.entries(data).map(([key, value]) => {\n          const dataLabel = DATA_LABELS[key];\n          if (!dataLabel) {\n            return null;\n          }\n          const { label, address, transform } = dataLabel;\n          return (\n            <LabelValue\n              key={key}\n              label={label + ''}\n              value={address ? getAddressValue(value) : transform ? transform(value) : value}\n              link={address}\n              onClick={() => address && onOpenAddress(value?.toBase58())}\n            />\n          );\n        })}\n    </>\n  );\n}\n","import React, { useEffect, useMemo, useState } from 'react';\nimport bs58 from 'bs58';\nimport { Divider, Typography } from '@material-ui/core';\nimport CardContent from '@material-ui/core/CardContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Box from '@material-ui/core/Box';\nimport { decodeMessage } from '../utils/transactions';\nimport { useConnection, useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport { useWallet, useWalletPublicKeys } from '../utils/wallet';\nimport NewOrder from './instructions/NewOrder';\nimport UnknownInstruction from './instructions/UnknownInstruction';\nimport StakeInstruction from '../components/instructions/StakeInstruction';\nimport SystemInstruction from '../components/instructions/SystemInstruction';\nimport DexInstruction from '../components/instructions/DexInstruction';\nimport TokenInstruction from '../components/instructions/TokenInstruction';\n\nfunction isSafeInstruction(publicKeys, owner, txInstructions) {\n  let unsafe = false;\n  const states = {\n    CREATED: 0,\n    OWNED: 1,\n    CLOSED_TO_OWNED_DESTINATION: 2,\n  };\n  const accountStates = {};\n\n  function isOwned(pubkey) {\n    if (!pubkey) {\n      return false;\n    }\n    if (\n      publicKeys?.some((ownedAccountPubkey) =>\n        ownedAccountPubkey.equals(pubkey),\n      )\n    ) {\n      return true;\n    }\n    return accountStates[pubkey.toBase58()] === states.OWNED;\n  }\n\n  txInstructions.forEach((instructions) => {\n    instructions.forEach((instruction) => {\n      if (!instruction) {\n        unsafe = true;\n      } else {\n        if (instruction.type === 'raydium') {\n          // Whitelist raydium for now.\n        } else if (instruction.type === 'mango') {\n          // Whitelist mango for now.\n        } else if (\n          ['cancelOrder', 'matchOrders', 'cancelOrderV3'].includes(\n            instruction.type,\n          )\n        ) {\n          // It is always considered safe to cancel orders, match orders\n        } else if (instruction.type === 'systemCreate') {\n          let { newAccountPubkey } = instruction.data;\n          if (!newAccountPubkey) {\n            unsafe = true;\n          } else {\n            accountStates[newAccountPubkey.toBase58()] = states.CREATED;\n          }\n        } else if (['newOrder', 'newOrderV3'].includes(instruction.type)) {\n          // New order instructions are safe if the owner is this wallet\n          let { openOrdersPubkey, ownerPubkey } = instruction.data;\n          if (ownerPubkey && owner.equals(ownerPubkey)) {\n            accountStates[openOrdersPubkey.toBase58()] = states.OWNED;\n          } else {\n            unsafe = true;\n          }\n        } else if (instruction.type === 'initializeAccount') {\n          // New SPL token accounts are only considered safe if they are owned by this wallet and newly created\n          let { ownerPubkey, accountPubkey } = instruction.data;\n          if (\n            owner &&\n            ownerPubkey &&\n            owner.equals(ownerPubkey) &&\n            accountPubkey &&\n            accountStates[accountPubkey.toBase58()] === states.CREATED\n          ) {\n            accountStates[accountPubkey.toBase58()] = states.OWNED;\n          } else {\n            unsafe = true;\n          }\n        } else if (instruction.type === 'settleFunds') {\n          // Settling funds is only safe if the destinations are owned\n          let { basePubkey, quotePubkey } = instruction.data;\n          if (!isOwned(basePubkey) || !isOwned(quotePubkey)) {\n            unsafe = true;\n          }\n        } else if (instruction.type === 'closeAccount') {\n          // Closing is only safe if the destination is owned\n          let { sourcePubkey, destinationPubkey } = instruction.data;\n          if (isOwned(destinationPubkey)) {\n            accountStates[sourcePubkey.toBase58()] =\n              states.CLOSED_TO_OWNED_DESTINATION;\n          } else {\n            unsafe = true;\n          }\n        } else {\n          unsafe = true;\n        }\n      }\n    });\n  });\n\n  // Check that all accounts are owned\n  if (\n    Object.values(accountStates).some(\n      (state) =>\n        ![states.CLOSED_TO_OWNED_DESTINATION, states.OWNED].includes(state),\n    )\n  ) {\n    unsafe = true;\n  }\n\n  return !unsafe;\n}\n\nexport default function SignTransactionFormContent({\n  origin,\n  messages,\n  onApprove,\n  autoApprove,\n  buttonRef,\n}) {\n  const explorerUrlSuffix = useSolanaExplorerUrlSuffix();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [publicKeys] = useWalletPublicKeys();\n\n  const [parsing, setParsing] = useState(true);\n  // An array of arrays, where each element is the set of instructions for a\n  // single transaction.\n  const [txInstructions, setTxInstructions] = useState(null);\n\n  const isMultiTx = messages.length > 1;\n\n  useEffect(() => {\n    Promise.all(messages.map((m) => decodeMessage(connection, wallet, m))).then(\n      (txInstructions) => {\n        setTxInstructions(txInstructions);\n        setParsing(false);\n      },\n    );\n  }, [messages, connection, wallet]);\n\n  const validator = useMemo(() => {\n    return {\n      safe:\n        publicKeys &&\n        txInstructions &&\n        isSafeInstruction(publicKeys, wallet.publicKey, txInstructions),\n    };\n  }, [publicKeys, txInstructions, wallet]);\n\n  useEffect(() => {\n    if (validator.safe && autoApprove) {\n      console.log('Auto approving safe transaction');\n      onApprove();\n    } else {\n      // brings window to front when we receive new instructions\n      // this needs to be executed from wallet instead of adapter\n      // to ensure chrome brings window to front\n      window.focus();\n\n      // Scroll to approve button and focus it to enable approve with enter.\n      // Keep currentButtonRef in local variable, so the reference can't become\n      // invalid until the timeout is over. this was happening to all auto-\n      // approvals for unknown reasons.\n      let currentButtonRef = buttonRef.current;\n      if (currentButtonRef) {\n        currentButtonRef.scrollIntoView({ behavior: 'smooth' });\n        setTimeout(() => currentButtonRef.focus(), 50);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [validator, autoApprove, buttonRef]);\n\n  const onOpenAddress = (address) => {\n    address &&\n      window.open(\n        'https://solscan.io/account/' + address + explorerUrlSuffix,\n        '_blank',\n      );\n  };\n\n  const getContent = (instruction) => {\n    switch (instruction?.type) {\n      case 'cancelOrder':\n      case 'cancelOrderV2':\n      case 'matchOrders':\n      case 'settleFunds':\n        return (\n          <DexInstruction\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n          />\n        );\n      case 'closeAccount':\n      case 'initializeAccount':\n      case 'transfer':\n      case 'approve':\n      case 'revoke':\n      case 'mintTo':\n        return (\n          <TokenInstruction\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n          />\n        );\n      case 'systemCreateWithSeed':\n      case 'systemCreate':\n      case 'systemTransfer':\n        return (\n          <SystemInstruction\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n          />\n        );\n      case 'stakeAuthorizeWithSeed':\n      case 'stakeAuthorize':\n      case 'stakeDeactivate':\n      case 'stakeDelegate':\n      case 'stakeInitialize':\n      case 'stakeSplit':\n      case 'stakeWithdraw':\n        return (\n          <StakeInstruction\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n          />\n        );\n      case 'newOrder':\n        return (\n          <NewOrder instruction={instruction} onOpenAddress={onOpenAddress} />\n        );\n      case 'newOrderV3':\n        return (\n          <NewOrder\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n            v3={true}\n          />\n        );\n      default:\n        return (\n          <UnknownInstruction\n            instruction={instruction}\n            onOpenAddress={onOpenAddress}\n          />\n        );\n    }\n  };\n\n  const txLabel = (idx) => {\n    return (\n      <>\n        <Typography variant=\"h6\" gutterBottom>\n          Transaction {idx.toString()}\n        </Typography>\n        <Divider style={{ marginTop: 20 }} />\n      </>\n    );\n  };\n\n  const txListItem = (instructions, txIdx) => {\n    const ixs = instructions.map((instruction, i) => (\n      <Box style={{ marginTop: 20 }} key={i}>\n        {getContent(instruction)}\n        <Divider style={{ marginTop: 20 }} />\n      </Box>\n    ));\n\n    if (!isMultiTx) {\n      return ixs;\n    }\n\n    return (\n      <Box style={{ marginTop: 20 }} key={txIdx}>\n        {txLabel(txIdx)}\n        {ixs}\n      </Box>\n    );\n  };\n\n  return (\n    <CardContent>\n      {parsing ? (\n        <>\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'flex-end',\n              marginBottom: 20,\n            }}\n          >\n            <CircularProgress style={{ marginRight: 20 }} />\n            <Typography\n              variant=\"subtitle1\"\n              style={{ fontWeight: 'bold' }}\n              gutterBottom\n            >\n              Parsing transaction{isMultiTx > 0 ? 's' : ''}:\n            </Typography>\n          </div>\n          {messages.map((message, idx) => (\n            <Typography key={idx} style={{ wordBreak: 'break-all' }}>\n              {bs58.encode(message)}\n            </Typography>\n          ))}\n        </>\n      ) : (\n        <>\n          <Typography variant=\"h6\" gutterBottom>\n            {txInstructions\n              ? `${origin} wants to:`\n              : `Unknown transaction data`}\n          </Typography>\n          {txInstructions ? (\n            txInstructions.map((instructions, txIdx) =>\n              txListItem(instructions, txIdx),\n            )\n          ) : (\n            <>\n              <Typography\n                variant=\"subtitle1\"\n                style={{ fontWeight: 'bold' }}\n                gutterBottom\n              >\n                Unknown transaction{isMultiTx > 0 ? 's' : ''}:\n              </Typography>\n              {messages.map((message) => (\n                <Typography style={{ wordBreak: 'break-all' }}>\n                  {bs58.encode(message)}\n                </Typography>\n              ))}\n            </>\n          )}\n        </>\n      )}\n    </CardContent>\n  );\n}\n","import React, { useEffect } from 'react';\nimport CardContent from '@material-ui/core/CardContent';\nimport Warning from '@material-ui/icons/Warning';\nimport { Tooltip, Typography, Divider } from '@material-ui/core';\nimport { useWallet } from '../utils/wallet';\n\nfunction toHex(buffer) {\n  return Array.prototype.map\n    .call(buffer, (x) => ('00' + x.toString(16)).slice(-2))\n    .join('');\n}\n\nexport default function SignFormContent({\n  origin,\n  message,\n  messageDisplay,\n  buttonRef,\n}) {\n  useEffect(() => {\n    // brings window to front when we receive new instructions\n    // this needs to be executed from wallet instead of adapter\n    // to ensure chrome brings window to front\n    window.focus();\n\n    // Scroll to approve button and focus it to enable approve with enter.\n    // Keep currentButtonRef in local variable, so the reference can't become\n    // invalid until the timeout is over. this was happening to all auto-\n    // approvals for unknown reasons.\n    let currentButtonRef = buttonRef.current;\n    if (currentButtonRef) {\n      currentButtonRef.scrollIntoView({ behavior: 'smooth' });\n      setTimeout(() => currentButtonRef.focus(), 50);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [buttonRef]);\n\n  const wallet = useWallet();\n\n  let messageTxt;\n  switch (messageDisplay) {\n    case 'utf8':\n      messageTxt = new TextDecoder().decode(message);\n      break;\n    case 'hex':\n      messageTxt = '0x' + toHex(message);\n      break;\n    case 'diffieHellman':\n      messageTxt = 'Create Diffie-Hellman keys';\n      break;\n    default:\n      throw new Error('Unexpected message type: ' + messageDisplay);\n  }\n\n  const renderAction = () => {\n    switch (messageDisplay) {\n      case 'utf8':\n        return `Sign message with account ${wallet.publicKey}`;\n      case 'hex':\n        return (\n          <>\n            <Tooltip\n              title=\"Be especially cautious when signing arbitrary data, you must trust the requester.\"\n              arrow\n            >\n              <Warning style={{ marginBottom: '-7px' }} />\n            </Tooltip>{' '}\n            {`Sign data with account ${wallet.publicKey}`}\n          </>\n        );\n      case 'diffieHellman':\n        return `Create Diffie-Hellman keys`;\n      default:\n        throw new Error('Unexpected message display type: ' + messageDisplay);\n    }\n  };\n\n  return (\n    <CardContent>\n      <Typography variant=\"h6\" gutterBottom>\n        {`${origin} wants to:`}\n      </Typography>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {renderAction()}\n      </Typography>\n      <Divider style={{ margin: 20 }} />\n      <Typography style={{ wordBreak: 'break-all' }}>{messageTxt}</Typography>\n      <Divider style={{ margin: 20 }} />\n    </CardContent>\n  );\n}\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useWallet, useWalletSelector } from '../utils/wallet';\nimport { PublicKey } from '@solana/web3.js';\nimport {\n  Divider,\n  FormControlLabel,\n  SnackbarContent,\n  Switch,\n  Typography,\n} from '@material-ui/core';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\nimport { makeStyles } from '@material-ui/core/styles';\nimport assert from 'assert';\nimport bs58 from 'bs58';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { useLocalStorageState, isExtension } from '../utils/utils';\nimport SignTransactionFormContent from '../components/SignTransactionFormContent';\nimport SignFormContent from '../components/SignFormContent';\nimport { generateDiffieHelllman } from '../utils/diffie-hellman';\n\nconst AUTHORIZED_METHODS = [\n  'signTransaction',\n  'signAllTransactions',\n  'sign',\n  'diffieHellman',\n];\n\nfunction getInitialRequests() {\n  if (!isExtension) {\n    return [];\n  }\n\n  // TODO CHECK OPENER (?)\n\n  const urlParams = new URLSearchParams(window.location.hash.slice(1));\n  const request = JSON.parse(urlParams.get('request'));\n\n  if (request.method === 'sign') {\n    const dataObj = request.params.data;\n    // Deserialize `data` into a Uint8Array\n    if (!dataObj) {\n      throw new Error('Missing \"data\" params for \"sign\" request');\n    }\n\n    const data = new Uint8Array(Object.keys(dataObj).length);\n    for (const [index, value] of Object.entries(dataObj)) {\n      data[index] = value;\n    }\n    request.params.data = data;\n  }\n\n  return [request];\n}\n\nexport default function PopupPage({ opener }) {\n  const origin = useMemo(() => {\n    let params = new URLSearchParams(window.location.hash.slice(1));\n    return params.get('origin');\n  }, []);\n  const selectedWallet = useWallet();\n  const selectedWalletAddress =\n    selectedWallet && selectedWallet.publicKey.toBase58();\n  const { accounts, setWalletSelector } = useWalletSelector();\n  const [wallet, setWallet] = useState(isExtension ? null : selectedWallet);\n\n  const [connectedAccount, setConnectedAccount] = useState(null);\n  const hasConnectedAccount = !!connectedAccount;\n  const [requests, setRequests] = useState(getInitialRequests);\n  const [autoApprove, setAutoApprove] = useState(false);\n  const postMessage = useCallback(\n    (message) => {\n      if (isExtension) {\n        chrome.runtime.sendMessage({\n          channel: 'sollet_extension_background_channel',\n          data: message,\n        });\n      } else {\n        opener.postMessage({ jsonrpc: '2.0', ...message }, origin);\n      }\n    },\n    [opener, origin],\n  );\n\n  // Keep selectedWallet and wallet in sync.\n  useEffect(() => {\n    if (!isExtension) {\n      setWallet(selectedWallet);\n    }\n    // using stronger condition here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedWalletAddress]);\n\n  // (Extension only) Fetch connected wallet for site from local storage.\n  useEffect(() => {\n    if (isExtension) {\n      chrome.storage.local.get('connectedWallets', (result) => {\n        const connectedWallet = (result.connectedWallets || {})[origin];\n        if (connectedWallet) {\n          setWalletSelector(connectedWallet.selector);\n          setConnectedAccount(new PublicKey(connectedWallet.publicKey));\n          setAutoApprove(connectedWallet.autoApprove);\n        } else {\n          setConnectedAccount(selectedWallet.publicKey);\n        }\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [origin]);\n\n  // (Extension only) Set wallet once connectedWallet is retrieved.\n  useEffect(() => {\n    if (isExtension && connectedAccount) {\n      setWallet(selectedWallet);\n    }\n    // using stronger condition here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [connectedAccount, selectedWalletAddress]);\n\n  // Send a disconnect event if this window is closed, this component is\n  // unmounted, or setConnectedAccount(null) is called.\n  useEffect(() => {\n    if (hasConnectedAccount && !isExtension) {\n      function unloadHandler() {\n        postMessage({ method: 'disconnected' });\n      }\n      window.addEventListener('beforeunload', unloadHandler);\n      return () => {\n        unloadHandler();\n        window.removeEventListener('beforeunload', unloadHandler);\n      };\n    }\n  }, [hasConnectedAccount, postMessage, origin]);\n\n  // Disconnect if the user switches to a different wallet.\n  useEffect(() => {\n    if (\n      !isExtension &&\n      wallet &&\n      connectedAccount &&\n      !connectedAccount.equals(wallet.publicKey)\n    ) {\n      setConnectedAccount(null);\n    }\n  }, [connectedAccount, wallet]);\n\n  // Push requests from the parent window into a queue.\n  useEffect(() => {\n    function messageHandler(e) {\n      if (e.origin === origin && e.source === window.opener) {\n        if (!AUTHORIZED_METHODS.includes(e.data.method)) {\n          postMessage({ error: 'Unsupported method', id: e.data.id });\n        }\n\n        setRequests((requests) => [...requests, e.data]);\n      }\n    }\n    window.addEventListener('message', messageHandler);\n    return () => window.removeEventListener('message', messageHandler);\n  }, [origin, postMessage]);\n\n  const request = requests[0];\n  const popRequest = () => setRequests((requests) => requests.slice(1));\n\n  const { messages, messageDisplay } = useMemo(() => {\n    if (!request || request.method === 'connect') {\n      return { messages: [], messageDisplay: 'tx' };\n    }\n    switch (request.method) {\n      case 'diffieHellman':\n        return {\n          messages: [request.params.publicKey],\n          messageDisplay: 'diffieHellman',\n        };\n      case 'signTransaction':\n        return {\n          messages: [bs58.decode(request.params.message)],\n          messageDisplay: 'tx',\n        };\n      case 'signAllTransactions':\n        return {\n          messages: request.params.messages.map((m) => bs58.decode(m)),\n          messageDisplay: 'tx',\n        };\n      case 'sign':\n        if (!(request.params.data instanceof Uint8Array)) {\n          throw new Error('Data must be an instance of Uint8Array');\n        }\n        return {\n          messages: [request.params.data],\n          messageDisplay: request.params.display === 'utf8' ? 'utf8' : 'hex',\n        };\n      default:\n        throw new Error('Unexpected method: ' + request.method);\n    }\n  }, [request]);\n\n  if (hasConnectedAccount && requests.length === 0) {\n    if (isExtension) {\n      window.close();\n    } else {\n      focusParent();\n    }\n\n    return (\n      <Typography>\n        {isExtension\n          ? 'Submitting...'\n          : 'Please keep this window open in the background.'}\n      </Typography>\n    );\n  }\n\n  if (!wallet) {\n    return <Typography>Loading wallet...</Typography>;\n  }\n\n  const mustConnect =\n    !connectedAccount || !connectedAccount.equals(wallet.publicKey);\n  // We must detect when to show the connection form on the website as it is not sent as a request.\n  if (\n    (isExtension && request.method === 'connect') ||\n    (!isExtension && mustConnect)\n  ) {\n    // Approve the parent page to connect to this wallet.\n    function connect(autoApprove) {\n      setConnectedAccount(wallet.publicKey);\n      if (isExtension) {\n        chrome.storage.local.get('connectedWallets', (result) => {\n          // TODO better way to do this\n          const account = accounts.find((account) =>\n            account.address.equals(wallet.publicKey),\n          );\n          const connectedWallets = {\n            ...(result.connectedWallets || {}),\n            [origin]: {\n              publicKey: wallet.publicKey.toBase58(),\n              selector: account.selector,\n              autoApprove,\n            },\n          };\n          chrome.storage.local.set({ connectedWallets });\n        });\n      }\n      postMessage({\n        method: 'connected',\n        params: { publicKey: wallet.publicKey.toBase58(), autoApprove },\n        id: isExtension ? request.id : undefined,\n      });\n      setAutoApprove(autoApprove);\n      if (!isExtension) {\n        focusParent();\n      } else {\n        popRequest();\n      }\n    }\n\n    return <ApproveConnectionForm origin={origin} onApprove={connect} />;\n  }\n\n  assert(AUTHORIZED_METHODS.includes(request.method) && wallet);\n\n  async function onApprove() {\n    popRequest();\n    switch (request.method) {\n      case 'diffieHellman':\n        return diffieHellman(messages[0]);\n      case 'signTransaction':\n      case 'sign':\n        sendSignature(messages[0]);\n        break;\n      case 'signAllTransactions':\n        sendAllSignatures(messages);\n        break;\n      default:\n        throw new Error('Unexpected method: ' + request.method);\n    }\n  }\n\n  async function sendSignature(message) {\n    postMessage({\n      result: {\n        signature: await wallet.createSignature(message),\n        publicKey: wallet.publicKey.toBase58(),\n      },\n      id: request.id,\n    });\n  }\n\n  async function sendAllSignatures(messages) {\n    let signatures;\n    // Ledger must sign one by one.\n    if (wallet.type === 'ledger') {\n      signatures = [];\n      for (let k = 0; k < messages.length; k += 1) {\n        signatures.push(await wallet.createSignature(messages[k]));\n      }\n    } else {\n      signatures = await Promise.all(\n        messages.map((m) => wallet.createSignature(m)),\n      );\n    }\n    postMessage({\n      result: {\n        signatures,\n        publicKey: wallet.publicKey.toBase58(),\n      },\n      id: request.id,\n    });\n  }\n\n  function diffieHellman(publicKey) {\n    const keys = generateDiffieHelllman(\n      publicKey,\n      wallet.provider.account.secretKey,\n    );\n    postMessage({\n      result: keys,\n      id: request.id,\n    });\n  }\n\n  function sendReject() {\n    popRequest();\n    postMessage({\n      error: 'Transaction cancelled',\n      id: request.id,\n    });\n  }\n\n  return (\n    <ApproveSignatureForm\n      key={request.id}\n      autoApprove={autoApprove}\n      origin={origin}\n      messages={messages}\n      messageDisplay={messageDisplay}\n      onApprove={onApprove}\n      onReject={sendReject}\n    />\n  );\n}\n\n/**\n * Switch focus to the parent window. This requires that the parent runs\n * `window.name = 'parent'` before opening the popup.\n */\nfunction focusParent() {\n  try {\n    window.open('', 'parent');\n  } catch (err) {\n    console.log('err', err);\n  }\n}\n\nconst useStyles = makeStyles((theme) => ({\n  connection: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    textAlign: 'center',\n  },\n  transaction: {\n    wordBreak: 'break-all',\n  },\n  approveButton: {\n    backgroundColor: '#43a047',\n    color: 'white',\n  },\n  actions: {\n    justifyContent: 'space-between',\n  },\n  snackbarRoot: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  warningMessage: {\n    margin: theme.spacing(1),\n    color: theme.palette.text.primary,\n  },\n  warningIcon: {\n    marginRight: theme.spacing(1),\n    fontSize: 24,\n  },\n  warningTitle: {\n    color: theme.palette.warning.light,\n    fontWeight: 600,\n    fontSize: 16,\n    alignItems: 'center',\n    display: 'flex',\n  },\n  warningContainer: {\n    marginTop: theme.spacing(1),\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nfunction ApproveConnectionForm({ origin, onApprove }) {\n  const wallet = useWallet();\n  const { accounts, hardwareWalletAccount } = useWalletSelector();\n  // TODO better way to do this\n  const account = accounts\n    .concat([hardwareWalletAccount])\n    .find((account) => account && account.address.equals(wallet.publicKey));\n  const classes = useStyles();\n  const [autoApprove, setAutoApprove] = useState(false);\n  let [dismissed, setDismissed] = useLocalStorageState(\n    'dismissedAutoApproveWarning',\n    false,\n  );\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h1\" gutterBottom>\n          Allow this site to access your Solana account?\n        </Typography>\n        <div className={classes.connection}>\n          <Typography>{origin}</Typography>\n          <ImportExportIcon fontSize=\"large\" />\n          <Typography>{account.name}</Typography>\n          <Typography variant=\"caption\">\n            ({wallet.publicKey.toBase58()})\n          </Typography>\n        </div>\n        <Typography>Only connect with sites you trust.</Typography>\n        <Divider className={classes.divider} />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={autoApprove}\n              onChange={() => setAutoApprove(!autoApprove)}\n              color=\"primary\"\n            />\n          }\n          label={`Automatically approve transactions from ${origin}`}\n        />\n        {!dismissed && autoApprove && (\n          <SnackbarContent\n            className={classes.warningContainer}\n            message={\n              <div>\n                <span className={classes.warningTitle}>\n                  <WarningIcon className={classes.warningIcon} />\n                  Use at your own risk.\n                </span>\n                <Typography className={classes.warningMessage}>\n                  This setting allows sending some transactions on your behalf\n                  without requesting your permission for the remainder of this\n                  session.\n                </Typography>\n              </div>\n            }\n            action={[\n              <Button onClick={() => setDismissed('1')}>I understand</Button>,\n            ]}\n            classes={{ root: classes.snackbarRoot }}\n          />\n        )}\n      </CardContent>\n      <CardActions className={classes.actions}>\n        <Button onClick={window.close}>Cancel</Button>\n        <Button\n          color=\"primary\"\n          onClick={() => onApprove(autoApprove)}\n          disabled={!dismissed && autoApprove}\n        >\n          Connect\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction ApproveSignatureForm({\n  origin,\n  messages,\n  messageDisplay,\n  onApprove,\n  onReject,\n  autoApprove,\n}) {\n  const classes = useStyles();\n  const buttonRef = useRef();\n\n  const isMultiTx = messageDisplay === 'tx' && messages.length > 1;\n\n  const renderFormContent = () => {\n    if (messageDisplay === 'tx') {\n      return (\n        <SignTransactionFormContent\n          autoApprove={autoApprove}\n          origin={origin}\n          messages={messages}\n          onApprove={onApprove}\n          buttonRef={buttonRef}\n        />\n      );\n    } else {\n      return (\n        <SignFormContent\n          origin={origin}\n          message={messages[0]}\n          messageDisplay={messageDisplay}\n          buttonRef={buttonRef}\n        />\n      );\n    }\n  };\n\n  return (\n    <Card>\n      {renderFormContent()}\n      <CardActions className={classes.actions}>\n        <Button onClick={onReject}>Cancel</Button>\n        <Button\n          ref={buttonRef}\n          className={classes.approveButton}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={onApprove}\n        >\n          Approve{isMultiTx ? ' All' : ''}\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import ed2curve from './ed2curve';\n\n/**\n * Generate Diffie-Hellman keys\n * publicKey is a Uint8Array\n * secretKey is a Uint8Array\n * Returns { publicKey: Uint8Array, secretKey: Uint8Array }\n */\nexport const generateDiffieHelllman = (publicKey, secretKey) => {\n  return ed2curve.convertKeyPair({\n    publicKey: publicKey,\n    secretKey: new Uint8Array(secretKey),\n  });\n};\n","import React, { useEffect, useState } from 'react';\nimport Container from '@material-ui/core/Container';\nimport {\n  useHasLockedMnemonicAndSeed,\n} from '../utils/wallet-seed';\nimport { DialogActions, Button, Card, Typography, CardMedia, Box, MobileStepper } from '@material-ui/core';\nimport WelcomePage from './WelcomePage';\n\nconst styles = ({\n  welcomeCard: {\n    width : '80%',\n    margin: '40px auto',    \n  },\n  textContainer: {\n    backgroundColor: '#222',\n    borderRadius: '20px 20px 0 0',\n\n  },\n  button: {\n    fontSize: \"19px\",\n    fontWeight: \"600\",\n    padding: \"5px 20px\",\n    lineHeight: \"24px\",\n    textTransform: \"unset\",    \n  },\n  text: {\n    height:'120px',\n    display: 'flex',\n    alignItems: 'center', \n    justifyContent: 'center',\n    flexDirection: 'column',   \n  },\n  buttonSkip: {\n    fontSize: \"19px\",\n    fontWeight: \"600\",    \n    lineHeight: \"24px\",\n    textTransform: \"unset\",   \n    color: \"#347AF0\"\n  },\n  buttonStack: {\n    width: '100%',\n    maxWidth: '300px',\n    margin: 'auto'\n  },\n  stepper: {\n    backgroundColor: 'unset',\n    maxWidth: 300,\n    justifyContent: 'center'\n  }\n})\n\nexport default function OnboardingPage() {\n  const [hasLockedMnemonicAndSeed, loading] = useHasLockedMnemonicAndSeed();\n\n  \n  const [step, setStep] = useState(0);\n  const [skip, setSkip] = useState(false);\n\n\n  const text = [\n    {\n      title : \"Welcome to Salmon\",\n      paragraph: \"The Solana OpenSource Wallet\"\n    },\n    {\n      title : \"Non-custodial\",\n      paragraph: \"Salmon doesn't store any data about the wallet. Everything you see is in your browser or your mobile app at a local level. There are no email addresses associated with accounts.\"\n    },\n    {\n      title : \"Seed phrase\",\n      paragraph: \"Its VERY IMPORTANT to keep the seed-phrase youre about to see in a safe place. Loosing it may prevent you from accesing your funds.\"\n    }\n  ]\n\n  if(hasLockedMnemonicAndSeed)\n    return (<WelcomePage/>)\n\n  if(step >= 3){\n    return (\n      <WelcomePage/>\n    )\n  }\n\n  if(skip){\n    return (\n      <WelcomePage/>\n    )\n  }\n\n  if(step < 3){\n    return (\n      <Container maxWidth=\"xs\">\n        <Card>\n          <Box px={2} py={6}>\n            <Box align=\"right\" py={1}>\n              <Button style={styles.buttonSkip} align=\"right\" variant=\"text\" color=\"primary\" px={5} onClick={() => setSkip(true)}>\n                Skip\n              </Button>\n            </Box>\n            <CardMedia style={styles.welcomeCard} image=\"images/logo.png\" component=\"img\"/>      \n          </Box>\n          <Box style={styles.textContainer} align=\"center\" px={2} py={2}>\n            \n\n          <MobileStepper\n            variant=\"dots\"\n            steps={3}\n            position=\"static\"\n            activeStep={step}\n            style={styles.stepper}            \n          />\n\n\n            <Box py={3} px={5}>    \n              <Typography variant=\"h1\">{text[step].title}</Typography>\n            </Box>\n            <Box pb={2} px={4} style={styles.text}>    \n              <Typography align='center' variant=\"paragraph\">{text[step].paragraph}</Typography>\n            </Box>\n          \n            <Box align=\"center\" p={4}>\n              <Button style={styles.button} variant=\"outlined\" color=\"primary\" px={5} onClick={() => setStep(step+1)}>\n                Next\n              </Button>\n            </Box>\n          </Box>\n        </Card>\n      </Container>\n    );\n  }\n\n}","import React, { useState } from 'react';\nimport {\n  AppBar,\n  Button,\n  Collapse,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Paper,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { DoneAll, ExpandLess, ExpandMore } from '@material-ui/icons';\nimport { useConnectedWallets } from '../utils/connected-wallets';\nimport { useIsExtensionWidth } from '../utils/utils';\nimport { useWalletSelector } from '../utils/wallet';\n\nexport default function ConnectionsList() {\n  const isExtensionWidth = useIsExtensionWidth();\n  const connectedWallets = useConnectedWallets();\n\n  return (\n    <Paper>\n      <AppBar position=\"static\" color=\"default\" elevation={1}>\n        <Toolbar>\n          <Typography\n            variant=\"h6\"\n            style={{ flexGrow: 1, fontSize: isExtensionWidth && '1rem' }}\n            component=\"h2\"\n          >\n            Connected Dapps\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <List disablePadding>\n        {Object.entries(connectedWallets).map(([origin, connectedWallet]) => (\n          <ConnectionsListItem\n            origin={origin}\n            connectedWallet={connectedWallet}\n            key={origin}\n          />\n        ))}\n      </List>\n    </Paper>\n  );\n}\n\nconst ICON_SIZE = 28;\nconst IMAGE_SIZE = 24;\n\nconst useStyles = makeStyles((theme) => ({\n  itemDetails: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  listItemIcon: {\n    backgroundColor: 'white',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: ICON_SIZE,\n    width: ICON_SIZE,\n    borderRadius: ICON_SIZE / 2,\n  },\n  listItemImage: {\n    height: IMAGE_SIZE,\n    width: IMAGE_SIZE,\n    borderRadius: IMAGE_SIZE / 2,\n  },\n}));\n\nfunction ConnectionsListItem({ origin, connectedWallet }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  // TODO better way to get high res icon?\n  const appleIconUrl = origin + '/apple-touch-icon.png';\n  const faviconUrl = origin + '/favicon.ico';\n  const [iconUrl, setIconUrl] = useState(appleIconUrl);\n  const { accounts } = useWalletSelector();\n  // TODO better way to do this\n  const account = accounts.find(\n    (account) => account.address.toBase58() === connectedWallet.publicKey,\n  );\n\n  const setAutoApprove = (autoApprove) => {\n    chrome.storage.local.get('connectedWallets', (result) => {\n      result.connectedWallets[origin].autoApprove = autoApprove;\n      chrome.storage.local.set({ connectedWallets: result.connectedWallets });\n    });\n  };\n\n  const disconnectWallet = () => {\n    chrome.storage.local.get('connectedWallets', (result) => {\n      delete result.connectedWallets[origin];\n      chrome.storage.local.set({ connectedWallets: result.connectedWallets });\n    });\n  };\n\n  return (\n    <>\n      <ListItem button onClick={() => setOpen((open) => !open)}>\n        <ListItemIcon>\n          <div className={classes.listItemIcon}>\n            <img\n              src={iconUrl}\n              onError={() => setIconUrl(faviconUrl)}\n              className={classes.listItemImage}\n              alt=\"\"\n            />\n          </div>\n        </ListItemIcon>\n        <div style={{ display: 'flex', flex: 1 }}>\n          <ListItemText primary={origin} secondary={account.name} />\n        </div>\n        {open ? <ExpandLess /> : <ExpandMore />}\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <div class={classes.itemDetails}>\n          <div class={classes.buttonContainer}>\n            <Button\n              variant={connectedWallet.autoApprove ? 'contained' : 'outlined'}\n              color=\"primary\"\n              size=\"small\"\n              startIcon={<DoneAll />}\n              onClick={() => setAutoApprove(!connectedWallet.autoApprove)}\n            >\n              {connectedWallet.autoApprove ? 'Auto-Approved' : 'Auto-Approve'}\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              size=\"small\"\n              startIcon={<DeleteIcon />}\n              onClick={disconnectWallet}\n            >\n              Disconnect\n            </Button>\n          </div>\n        </div>\n      </Collapse>\n    </>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core';\nimport { useIsExtensionWidth } from '../utils/utils';\nimport ConnectionsList from '../components/ConnectionsList';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    [theme.breakpoints.down(theme.ext)]: {\n      padding: 0,\n    },\n    [theme.breakpoints.up(theme.ext)]: {\n      maxWidth: 'md',\n    },\n  },\n}));\n\nexport default function ConnectionsPage() {\n  const classes = useStyles();\n  const isExtensionWidth = useIsExtensionWidth();\n  return (\n    <Container fixed maxWidth=\"md\" className={classes.container}>\n      <Grid container spacing={isExtensionWidth ? 0 : 3}>\n        <Grid item xs={12}>\n          <ConnectionsList />\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n","import React, { Suspense, useState } from 'react';\nimport { makeStyles, List, ListItem } from '@material-ui/core';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {\n  ThemeProvider,\n  unstable_createMuiStrictModeTheme as createMuiTheme,\n} from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogForm from './components/DialogForm';\nimport NavigationFrame from './components/NavigationFrame';\nimport { ConnectionProvider } from './utils/connection';\nimport WalletPage from './pages/WalletPage';\nimport { useWallet, WalletProvider } from './utils/wallet';\nimport { ConnectedWalletsProvider } from './utils/connected-wallets';\nimport { TokenRegistryProvider } from './utils/tokens/names';\nimport LoadingIndicator from './components/LoadingIndicator';\nimport { SnackbarProvider } from 'notistack';\nimport PopupPage from './pages/PopupPage';\nimport OnboardingPage from './pages/OnboardingPage';\nimport ConnectionsPage from './pages/ConnectionsPage';\nimport { isExtension } from './utils/utils';\nimport { PageProvider, usePage } from './utils/page';\n\nexport default function App() {\n  // TODO: add toggle for dark mode\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const lightTheme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          text: {\n            primary: '#485068',\n            secondary: '#78839C',\n          },\n          background: {\n            default: '#EEE',\n            paper: '#FFEDE8',\n          },\n          primary: {\n            light: '#757ce8',\n            main: '#FF855F',\n            dark: '#D25C37',\n            contrastText: '#fff',\n          },\n          secondary: {\n            light: '#ff7961',\n            main: '#FFF',\n            dark: '#FFDFD7',\n            contrastText: '#FF855F',\n          },\n        },\n        typography: {\n          fontFamily: ['Montserrat', 'sans-serif'],\n          h1: {\n            fontSize: '36px',\n            fontWeight: 'bold',\n            color: '#0D1F3C',\n          },\n          h2: {\n            fontSize: '32px',\n            fontWeight: '600',\n          },\n          h3: {\n            fontSize: '26px',\n            fontWeight: '600',\n          },\n          paragraph: {\n            fontSize: '15px',\n            fontWeight: 'normal',\n            lineHeight: '24px',\n            color: '#485068',\n          },\n        },\n        shape: {\n          borderRadius: 2,\n        },\n        overrides: {\n          MuiButton: {\n            root: {\n              borderRadius: 20,\n            },\n          },\n        },\n        // TODO consolidate popup dimensions\n        ext: '450',\n      }),\n    [prefersDarkMode],\n  );\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          text: {\n            primary: '#FFF',\n            secondary: '#FF855F',\n          },\n          background: {\n            default: '#111',\n            paper: '#333',\n            tokens: '#222',\n            token: '#363E48',\n          },\n          primary: {\n            light: '#757ce8',\n            main: '#FF855F',\n            dark: '#D25C37',\n            contrastText: '#fff',\n          },\n          secondary: {\n            light: '#ff7961',\n            main: '#FFF',\n            dark: '#FFDFD7',\n            contrastText: '#FF855F',\n          },\n        },\n        typography: {\n          fontFamily: ['Montserrat', 'sans-serif'],\n          h1: {\n            fontSize: '36px',\n            fontWeight: 'bold',\n          },\n          h2: {\n            fontSize: '32px',\n            fontWeight: '600',\n          },\n          h3: {\n            fontSize: '26px',\n            fontWeight: '600',\n            color: '#FFF',\n          },\n          h4: {\n            fontWeight: 600,\n            fontSize: '15px',\n            color: '#FFF',\n          },\n          caption: {\n            fontSize: '15px',\n            fontWeight: '300',\n            lineHeight: '24px',\n          },\n        },\n        shape: {\n          borderRadius: 2,\n        },\n        overrides: {\n          MuiButton: {\n            root: {\n              borderRadius: 20,\n            },\n          },\n          MuiDialogContentText: {\n            root: {\n              fontSize: '13px',\n              color: '#FFEDE8',\n              lineHeight: '18.5px',\n              fontWeight: '400',\n            },\n          },\n          MuiDialogTitle: {\n            root: {\n              '& h2': {\n                fontSize: '15px',\n                fontWeight: '600',\n                lineHeight: '24px',\n                color: '#FFF',\n              },\n            },\n          },\n          MuiTextField: {\n            root: {\n              '& label': {\n                color: '#FFF',\n              },\n            },\n          },\n        },\n        // TODO consolidate popup dimensions\n        ext: '450',\n      }),\n    [prefersDarkMode],\n  );\n\n  // Disallow rendering inside an iframe to prevent clickjacking.\n  if (window.self !== window.top) {\n    return null;\n  }\n\n  let appElement = (\n    <NavigationFrame>\n      <Suspense fallback={<LoadingIndicator />}>\n        <PageContents />\n      </Suspense>\n    </NavigationFrame>\n  );\n\n  if (isExtension) {\n    appElement = (\n      <ConnectedWalletsProvider>\n        <PageProvider>{appElement}</PageProvider>\n      </ConnectedWalletsProvider>\n    );\n  }\n\n  return (\n    <Suspense fallback={<LoadingIndicator />}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n\n        <ConnectionProvider>\n          <TokenRegistryProvider>\n            <SnackbarProvider maxSnack={5} autoHideDuration={8000}>\n              <WalletProvider>{appElement}</WalletProvider>\n            </SnackbarProvider>\n          </TokenRegistryProvider>\n        </ConnectionProvider>\n      </ThemeProvider>\n    </Suspense>\n  );\n}\n\nfunction PageContents() {\n  const wallet = useWallet();\n  const [page] = usePage();\n  const suggestionKey = 'private-irgnore-wallet-suggestion';\n  const ignoreSuggestion = window.localStorage.getItem(suggestionKey);\n  if (!wallet) {\n    return (\n      <>\n        <OnboardingPage />\n      </>\n    );\n  }\n  if (window.opener) {\n    return <PopupPage opener={window.opener} />;\n  }\n  if (page === 'wallet') {\n    return <WalletPage />;\n  } else if (page === 'connections') {\n    return <ConnectionsPage />;\n  }\n}\n\nconst useStyles = makeStyles(() => ({\n  walletButton: {\n    width: '100%',\n    padding: '16px',\n    '&:hover': {\n      cursor: 'pointer',\n    },\n  },\n}));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useState } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useEffectAfterTimeout } from '../utils/utils';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: '100%',\n    padding: theme.spacing(2),\n  },\n}));\n\nexport default function LoadingIndicator({\n  height = null,\n  delay = 500,\n  ...rest\n}) {\n  const classes = useStyles();\n  const [visible, setVisible] = useState(false);\n\n  useEffectAfterTimeout(() => setVisible(true), delay);\n\n  let style = {};\n  if (height) {\n    style.height = height;\n  }\n\n  if (!visible) {\n    return height ? <div style={style} /> : null;\n  }\n\n  return (\n    <div className={classes.root} style={style} {...rest}>\n      <CircularProgress />\n    </div>\n  );\n}\n","import {\n  PublicKey,\n  SystemProgram,\n  Transaction,\n  TransactionInstruction,\n  SYSVAR_RENT_PUBKEY,\n} from '@solana/web3.js';\nimport { TokenInstructions } from '@project-serum/serum';\nimport {\n  assertOwner,\n  closeAccount,\n  initializeAccount,\n  initializeMint,\n  memoInstruction,\n  mintTo,\n  TOKEN_PROGRAM_ID,\n  transferChecked,\n} from './instructions';\nimport { ACCOUNT_LAYOUT, getOwnedAccountsFilters, MINT_LAYOUT } from './data';\n\nexport async function getOwnedTokenAccounts(connection, publicKey) {\n  let filters = getOwnedAccountsFilters(publicKey);\n  let resp = await connection.getProgramAccounts(\n    TOKEN_PROGRAM_ID,\n    {\n      filters,\n    },\n  );\n  return resp\n    .map(({ pubkey, account: { data, executable, owner, lamports } }) => ({\n      publicKey: new PublicKey(pubkey),\n      accountInfo: {\n        data,\n        executable,\n        owner: new PublicKey(owner),\n        lamports,\n      },\n    }))\n}\n\nexport async function signAndSendTransaction(\n  connection,\n  transaction,\n  wallet,\n  signers,\n  skipPreflight = false,\n) {\n  transaction.recentBlockhash = (\n    await connection.getRecentBlockhash('max')\n  ).blockhash;\n  transaction.setSigners(\n    // fee payed by the wallet owner\n    wallet.publicKey,\n    ...signers.map((s) => s.publicKey),\n  );\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n\n  transaction = await wallet.signTransaction(transaction);\n  const rawTransaction = transaction.serialize();\n  return await connection.sendRawTransaction(rawTransaction, {\n    skipPreflight,\n    preflightCommitment: 'single',\n  });\n}\n\nexport async function nativeTransfer(connection, wallet, destination, amount) {\n  const tx = new Transaction().add(\n    SystemProgram.transfer({\n      fromPubkey: wallet.publicKey,\n      toPubkey: destination,\n      lamports: amount,\n    }),\n  );\n  return await signAndSendTransaction(connection, tx, wallet, []);\n}\n\nexport async function createAndInitializeMint({\n  connection,\n  owner, // Wallet for paying fees and allowed to mint new tokens\n  mint, // Account to hold token information\n  amount, // Number of tokens to issue\n  decimals,\n  initialAccount, // Account to hold newly issued tokens, if amount > 0\n}) {\n  let transaction = new Transaction();\n  transaction.add(\n    SystemProgram.createAccount({\n      fromPubkey: owner.publicKey,\n      newAccountPubkey: mint.publicKey,\n      lamports: await connection.getMinimumBalanceForRentExemption(\n        MINT_LAYOUT.span,\n      ),\n      space: MINT_LAYOUT.span,\n      programId: TOKEN_PROGRAM_ID,\n    }),\n  );\n  transaction.add(\n    initializeMint({\n      mint: mint.publicKey,\n      decimals,\n      mintAuthority: owner.publicKey,\n    }),\n  );\n  let signers = [mint];\n  if (amount > 0) {\n    transaction.add(\n      SystemProgram.createAccount({\n        fromPubkey: owner.publicKey,\n        newAccountPubkey: initialAccount.publicKey,\n        lamports: await connection.getMinimumBalanceForRentExemption(\n          ACCOUNT_LAYOUT.span,\n        ),\n        space: ACCOUNT_LAYOUT.span,\n        programId: TOKEN_PROGRAM_ID,\n      }),\n    );\n    signers.push(initialAccount);\n    transaction.add(\n      initializeAccount({\n        account: initialAccount.publicKey,\n        mint: mint.publicKey,\n        owner: owner.publicKey,\n      }),\n    );\n    transaction.add(\n      mintTo({\n        mint: mint.publicKey,\n        destination: initialAccount.publicKey,\n        amount,\n        mintAuthority: owner.publicKey,\n      }),\n    );\n  }\n\n  return await signAndSendTransaction(connection, transaction, owner, signers);\n}\n\nexport async function createAndInitializeTokenAccount({\n  connection,\n  payer,\n  mintPublicKey,\n  newAccount,\n}) {\n  let transaction = new Transaction();\n  transaction.add(\n    SystemProgram.createAccount({\n      fromPubkey: payer.publicKey,\n      newAccountPubkey: newAccount.publicKey,\n      lamports: await connection.getMinimumBalanceForRentExemption(\n        ACCOUNT_LAYOUT.span,\n      ),\n      space: ACCOUNT_LAYOUT.span,\n      programId: TOKEN_PROGRAM_ID,\n    }),\n  );\n  transaction.add(\n    initializeAccount({\n      account: newAccount.publicKey,\n      mint: mintPublicKey,\n      owner: payer.publicKey,\n    }),\n  );\n\n  let signers = [newAccount];\n  return await signAndSendTransaction(connection, transaction, payer, signers);\n}\n\nexport async function createAssociatedTokenAccount({\n  connection,\n  wallet,\n  splTokenMintAddress,\n}) {\n  const [ix, address] = await createAssociatedTokenAccountIx(\n    wallet.publicKey,\n    wallet.publicKey,\n    splTokenMintAddress,\n  );\n  const tx = new Transaction();\n  tx.add(ix);\n  tx.feePayer = wallet.publicKey;\n  const txSig = await signAndSendTransaction(connection, tx, wallet, []);\n\n  return [address, txSig];\n}\nasync function createAssociatedTokenAccountIx(\n  fundingAddress,\n  walletAddress,\n  splTokenMintAddress,\n) {\n  const associatedTokenAddress = await findAssociatedTokenAddress(\n    walletAddress,\n    splTokenMintAddress,\n  );\n  const systemProgramId = new PublicKey('11111111111111111111111111111111');\n  const keys = [\n    {\n      pubkey: fundingAddress,\n      isSigner: true,\n      isWritable: true,\n    },\n    {\n      pubkey: associatedTokenAddress,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: walletAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: splTokenMintAddress,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: systemProgramId,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: TokenInstructions.TOKEN_PROGRAM_ID,\n      isSigner: false,\n      isWritable: false,\n    },\n    {\n      pubkey: SYSVAR_RENT_PUBKEY,\n      isSigner: false,\n      isWritable: false,\n    },\n  ];\n  const ix = new TransactionInstruction({\n    keys,\n    programId: ASSOCIATED_TOKEN_PROGRAM_ID,\n    data: Buffer.from([]),\n  });\n  return [ix, associatedTokenAddress];\n}\n\nexport async function findAssociatedTokenAddress(\n  walletAddress,\n  tokenMintAddress,\n) {\n  return (\n    await PublicKey.findProgramAddress(\n      [\n        walletAddress.toBuffer(),\n        TokenInstructions.TOKEN_PROGRAM_ID.toBuffer(),\n        tokenMintAddress.toBuffer(),\n      ],\n      ASSOCIATED_TOKEN_PROGRAM_ID,\n    )\n  )[0];\n}\n\nexport const ASSOCIATED_TOKEN_PROGRAM_ID = new PublicKey(\n  'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL',\n);\n\nexport async function transferTokens({\n  connection,\n  owner,\n  sourcePublicKey,\n  destinationPublicKey,\n  amount,\n  memo,\n  mint,\n  decimals,\n  overrideDestinationCheck,\n}) {\n  let destinationAccountInfo = await connection.getAccountInfo(\n    destinationPublicKey,\n  );\n  if (\n    !!destinationAccountInfo &&\n    destinationAccountInfo.owner.equals(TOKEN_PROGRAM_ID)\n  ) {\n    return await transferBetweenSplTokenAccounts({\n      connection,\n      owner,\n      mint,\n      decimals,\n      sourcePublicKey,\n      destinationPublicKey,\n      amount,\n      memo,\n    });\n  }\n\n  if (\n    (!destinationAccountInfo || destinationAccountInfo.lamports === 0) &&\n    !overrideDestinationCheck\n  ) {\n    throw new Error('Cannot send to address with zero SOL balances');\n  }\n\n  const destinationAssociatedTokenAddress = await findAssociatedTokenAddress(\n    destinationPublicKey,\n    mint,\n  );\n  destinationAccountInfo = await connection.getAccountInfo(\n    destinationAssociatedTokenAddress,\n  );\n  if (\n    !!destinationAccountInfo &&\n    destinationAccountInfo.owner.equals(TOKEN_PROGRAM_ID)\n  ) {\n    return await transferBetweenSplTokenAccounts({\n      connection,\n      owner,\n      mint,\n      decimals,\n      sourcePublicKey,\n      destinationPublicKey: destinationAssociatedTokenAddress,\n      amount,\n      memo,\n    });\n  }\n  return await createAndTransferToAccount({\n    connection,\n    owner,\n    sourcePublicKey,\n    destinationPublicKey,\n    amount,\n    memo,\n    mint,\n    decimals,\n  });\n}\n\nfunction createTransferBetweenSplTokenAccountsInstruction({\n  ownerPublicKey,\n  mint,\n  decimals,\n  sourcePublicKey,\n  destinationPublicKey,\n  amount,\n  memo,\n}) {\n  let transaction = new Transaction().add(\n    transferChecked({\n      source: sourcePublicKey,\n      mint,\n      decimals,\n      destination: destinationPublicKey,\n      owner: ownerPublicKey,\n      amount,\n    }),\n  );\n  if (memo) {\n    transaction.add(memoInstruction(memo));\n  }\n  return transaction;\n}\n\nasync function transferBetweenSplTokenAccounts({\n  connection,\n  owner,\n  mint,\n  decimals,\n  sourcePublicKey,\n  destinationPublicKey,\n  amount,\n  memo,\n}) {\n  const transaction = createTransferBetweenSplTokenAccountsInstruction({\n    ownerPublicKey: owner.publicKey,\n    mint,\n    decimals,\n    sourcePublicKey,\n    destinationPublicKey,\n    amount,\n    memo,\n  });\n  let signers = [];\n  return await signAndSendTransaction(connection, transaction, owner, signers);\n}\n\nasync function createAndTransferToAccount({\n  connection,\n  owner,\n  sourcePublicKey,\n  destinationPublicKey,\n  amount,\n  memo,\n  mint,\n  decimals,\n}) {\n  const [\n    createAccountInstruction,\n    newAddress,\n  ] = await createAssociatedTokenAccountIx(\n    owner.publicKey,\n    destinationPublicKey,\n    mint,\n  );\n  let transaction = new Transaction();\n  transaction.add(\n    assertOwner({\n      account: destinationPublicKey,\n      owner: SystemProgram.programId,\n    }),\n  );\n  transaction.add(createAccountInstruction);\n  const transferBetweenAccountsTxn = createTransferBetweenSplTokenAccountsInstruction(\n    {\n      ownerPublicKey: owner.publicKey,\n      mint,\n      decimals,\n      sourcePublicKey,\n      destinationPublicKey: newAddress,\n      amount,\n      memo,\n    },\n  );\n  transaction.add(transferBetweenAccountsTxn);\n  let signers = [];\n  return await signAndSendTransaction(connection, transaction, owner, signers);\n}\n\nexport async function closeTokenAccount({\n  connection,\n  owner,\n  sourcePublicKey,\n  skipPreflight,\n}) {\n  let transaction = new Transaction().add(\n    closeAccount({\n      source: sourcePublicKey,\n      destination: owner.publicKey,\n      owner: owner.publicKey,\n    }),\n  );\n  let signers = [];\n  return await signAndSendTransaction(\n    connection,\n    transaction,\n    owner,\n    signers,\n    skipPreflight,\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n  generateMnemonicAndSeed,\n  useHasLockedMnemonicAndSeed,\n  loadMnemonicAndSeed,\n  mnemonicToSeed,\n  storeMnemonicAndSeed,\n  normalizeMnemonic,\n} from '../utils/wallet-seed';\nimport {\n  getAccountFromSeed,\n  DERIVATION_PATH,\n} from '../utils/walletProvider/localStorage.js';\nimport Container from '@material-ui/core/Container';\nimport LoadingIndicator from '../components/LoadingIndicator';\nimport { BalanceListItem } from '../components/BalancesList.js';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport { DialogActions, DialogContentText, DialogTitle, Typography, CardMedia, CardHeader, Box } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { useCallAsync } from '../utils/notifications';\nimport Link from '@material-ui/core/Link';\nimport { validateMnemonic } from 'bip39';\nimport DialogForm from '../components/DialogForm';\nimport './login-page.css';\n\n\nconst styles = ({\n  welcomeCard: {\n    width : '80%',\n    margin: '40px auto',    \n  },\n  button: {\n    fontSize: '19px',\n    fontWeight: 600,\n    textTransform: 'unset',\n    lineHeight: '24px',\n    padding: '11px 13.5px',\n    margin: '10px',\n  },\n  buttonStack: {\n    width: '100%',\n    maxWidth: '300px',\n    margin: 'auto'\n  },\n  welcomeFirst: {\n    color: '#979797',\n    fontWeight: '300',\n    fontSize: '28px',\n    lineHieght: '54px'\n  },\n  welcomeSecond: {\n    color: '#FF855F',\n    fontWeight: '300',\n    fontSize: '48px',\n    lineHieght: '54px'\n  }\n})\n\nexport default function WelcomePage() {\n  const [restore, setRestore] = useState(false);\n  const [hasLockedMnemonicAndSeed, loading] = useHasLockedMnemonicAndSeed();\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      {restore ? (\n        <RestoreWalletForm goBack={() => setRestore(false)} />\n      ) : (\n        <>\n          {hasLockedMnemonicAndSeed ? <LoginForm /> : <WelcomeForm />}\n        </>\n      )}\n    </Container>\n  );\n}\n\nfunction WelcomeForm() {\n  const [createWallet, setCreateWallet] = useState(false);\n  const [restoreWallet, setRestoreWallet] = useState(false);\n\n  if(createWallet)\n    return <CreateWalletMessagges/>\n\n  if(restoreWallet)\n    return <RestoreWalletForm/>\n\n  if(!createWallet)\n    return (\n      <Card>\n        <Box px={8} py={14}>        \n          <Box px={4} py={1}>\n            <CardMedia style={styles.welcomeCard} image=\"images/logo.png\" component=\"img\"/>      \n          </Box>\n          <Box mb={8}>\n            <Typography style={styles.welcomeFirst} align=\"center\" variant=\"h1\" gutterBottom>\n              Welcome to\n            </Typography>          \n            <Typography style={styles.welcomeSecond} align=\"center\" variant=\"h1\" gutterBottom>\n              SALMON\n            </Typography>\n          </Box>          \n          <Box style={styles.buttonStack} display=\"flex\" flexDirection=\"column\">\n            <Button variant=\"contained\" style={styles.button} color=\"primary\" onClick={() => setCreateWallet(true)}>\n                Create Wallet\n              </Button>\n            <Button variant=\"contained\" style={styles.button} color=\"secondary\" onClick={() => setRestoreWallet(true)}>\n                Recover Wallet\n            </Button>\n          </Box>\n        </Box>\n      </Card>  \n    );\n}\n\nfunction CreateWalletMessagges() {\n  const [createWallet, setCreateWallet] = useState(false);\n\n  if(createWallet)\n    return <CreateWalletForm/>\n\n  return (\n    <Card>\n      <Box p={8}>         \n        <CardMedia style={styles.welcomeCard} image=\"images/logo.png\" component=\"img\"/>      \n        <Box m={3}> \n          <Typography align=\"center\" variant=\"h1\">Keep your seed safe!</Typography>\n        </Box>\n        <Box m={2}> \n          <Typography align=\"center\" variant=\"paragraph\">\n                Your private keys are only stored on your current computer or device.\n                You will need these words to restore your wallet if your browser's\n                storage is cleared or your device is damaged or lost.          \n          </Typography>\n        </Box>\n        <Box style={styles.buttonStack} display=\"flex\" flexDirection=\"column\">\n          <Button variant=\"contained\" style={styles.button} color=\"primary\" onClick={() => setCreateWallet(true)}>\n              Continue\n            </Button>\n          \n        </Box>\n      </Box>\n    </Card>\n  )\n}\n\n\nfunction CreateWalletForm() {\n  const [mnemonicAndSeed, setMnemonicAndSeed] = useState(null);\n  useEffect(() => {\n    generateMnemonicAndSeed().then(setMnemonicAndSeed);\n  }, []);\n  const [savedWords, setSavedWords] = useState(false);\n  const callAsync = useCallAsync();\n\n  function submit(password) {\n    const { mnemonic, seed } = mnemonicAndSeed;\n    callAsync(\n      storeMnemonicAndSeed(\n        mnemonic,\n        seed,\n        password,\n        DERIVATION_PATH.bip44Change,\n      ),\n      {\n        progressMessage: 'Creating wallet...',\n        successMessage: 'Wallet created',\n      },\n    );\n  }\n\n  if (!savedWords) {\n    return (\n      <SeedWordsForm\n        mnemonicAndSeed={mnemonicAndSeed}\n        goForward={() => setSavedWords(true)}\n      />\n    );\n  }\n\n  return (\n    <ChoosePasswordForm\n      mnemonicAndSeed={mnemonicAndSeed}\n      goBack={() => setSavedWords(false)}\n      onSubmit={submit}\n    />\n  );\n}\n\nfunction SeedWordsForm({ mnemonicAndSeed, goForward }) {\n  const [confirmed, setConfirmed] = useState(false);\n  const [downloaded, setDownloaded] = useState(false);\n  const [showDialog, setShowDialog] = useState(false);\n  const [seedCheck, setSeedCheck] = useState('');\n\n  const downloadMnemonic = (mnemonic) => {\n    const url = window.URL.createObjectURL(new Blob([mnemonic]));\n    const link = document.createElement('a');\n    link.href = url;\n    link.setAttribute('download', 'sollet.bak');\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  return (\n    <>    \n      <Card>\n        <Box p={4}>\n        <CardMedia style={styles.welcomeCard} image=\"images/logo.png\" component=\"img\"/>\n          <Typography align=\"center\" variant=\"h1\" gutterBottom>\n            Create New Wallet\n          </Typography>        \n          <Typography>\n            Please write down the following twenty four words and keep them in a\n            safe place:\n          </Typography>\n          {mnemonicAndSeed ? (\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              multiline\n              margin=\"normal\"\n              value={mnemonicAndSeed.mnemonic}\n              label=\"Seed Words\"\n              onFocus={(e) => e.currentTarget.select()}\n            />\n          ) : (\n            <LoadingIndicator />\n          )}\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={confirmed}\n                disabled={!mnemonicAndSeed}\n                onChange={(e) => setConfirmed(e.target.checked)}\n              />\n            }\n            label=\"I have saved these words in a safe place.\"\n          />\n          \n          <Box mt={4} align=\"center\">\n            <Button variant=\"contained\" color=\"primary\" style={styles.button} onClick={() => {\n              downloadMnemonic(mnemonicAndSeed?.mnemonic);\n              setDownloaded(true);\n            }}>\n              Download File (Required)\n            </Button>\n          </Box>\n          \n        </Box>\n        <CardActions style={{ justifyContent: 'flex-end' }}>\n          <Button color=\"primary\" disabled={!confirmed || !downloaded} onClick={() => setShowDialog(true)}>\n            Continue\n          </Button>\n        </CardActions>\n      </Card>\n      <DialogForm\n        open={showDialog}\n        onClose={() => setShowDialog(false)}\n        onSubmit={goForward}\n        fullWidth\n      >\n        <DialogTitle>{'Confirm Mnemonic'}</DialogTitle>\n        <DialogContentText style={{ margin: 20 }}>\n          <div\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n          >\n            Please re-enter your seed phrase to confirm that you have saved it.\n          </div>\n          <TextField\n            label={`Please type your seed phrase to confirm`}\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={seedCheck}\n            onChange={(e) => setSeedCheck(e.target.value)}\n          />\n        </DialogContentText>\n        <DialogActions>\n          <Button variant=\"outlined\" color=\"secondary\" onClick={() => setShowDialog(false)}>Close</Button>\n          <Button\n            type=\"submit\"\n            color=\"primary\"\n            variant=\"contained\"\n            disabled={normalizeMnemonic(seedCheck) !== mnemonicAndSeed?.mnemonic}\n          >\n            Continue\n          </Button>\n        </DialogActions>\n      </DialogForm>\n    </>\n  );\n}\n\nfunction ChoosePasswordForm({ goBack, onSubmit }) {\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Choose a Password (Optional)\n        </Typography>\n        <Typography>\n          Optionally pick a password to protect your wallet.\n        </Typography>\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"New Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Confirm Password\"\n          type=\"password\"\n          autoComplete=\"new-password\"\n          value={passwordConfirm}\n          onChange={(e) => setPasswordConfirm(e.target.value)}\n        />\n        <Typography>\n          If you forget your password you will need to restore your wallet using\n          your seed words.\n        </Typography>\n      </CardContent>\n      <CardActions style={{ justifyContent: 'space-between' }}>\n        <Button onClick={goBack}>Back</Button>\n        <Button\n          color=\"primary\"\n          disabled={password !== passwordConfirm}\n          onClick={() => onSubmit(password)}\n        >\n          Create Wallet\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction LoginForm() {\n  const [password, setPassword] = useState('');\n  const [stayLoggedIn, setStayLoggedIn] = useState(false);\n  const callAsync = useCallAsync();\n\n  const submit = () => {\n    callAsync(loadMnemonicAndSeed(password, stayLoggedIn), {\n      progressMessage: 'Unlocking wallet...',\n      successMessage: 'Wallet unlocked',\n    });\n  }\n  const submitOnEnter = (e) => {\n    if (e.code === \"Enter\" || e.code === \"NumpadEnter\") {\n      e.preventDefault();\n      e.stopPropagation();\n      submit();\n    }\n  }\n  const setPasswordOnChange = (e) => setPassword(e.target.value);\n  const toggleStayLoggedIn = (e) => setStayLoggedIn(e.target.checked);\n\n  return (\n    <Card className=\"card\">\n      <CardContent>\n        <Typography align=\"center\" variant=\"h1\" gutterBottom>\n          Unlock Wallet\n        </Typography>\n        <TextField\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          label=\"Password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n          value={password}\n          onChange={setPasswordOnChange}\n          onKeyDown={submitOnEnter}\n        />\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={stayLoggedIn}\n              onChange={toggleStayLoggedIn}\n            />\n          }\n          label=\"Keep wallet unlocked\"\n        />\n      </CardContent>\n      <CardActions style={{ justifyContent: 'flex-end' }}>\n        <Button color=\"primary\" onClick={submit}>\n          Unlock\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nfunction RestoreWalletForm({ goBack }) {\n  const [rawMnemonic, setRawMnemonic] = useState('');\n  const [seed, setSeed] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n  const [next, setNext] = useState(false);\n\n  const mnemonic = normalizeMnemonic(rawMnemonic);\n  const isNextBtnEnabled =\n    password === passwordConfirm && validateMnemonic(mnemonic);\n  const displayInvalidMnemonic = validateMnemonic(mnemonic) === false && mnemonic.length > 0;\n  return (\n    <>\n      {next ? (\n        <DerivedAccounts\n          goBack={() => setNext(false)}\n          mnemonic={mnemonic}\n          password={password}\n          seed={seed}\n        />\n      ) : (\n        <Card>\n          <CardContent>\n            <Box mb={4}>\n              <Typography align=\"center\" variant=\"h3\" gutterBottom>\n                Restore Existing Wallet\n              </Typography>\n            </Box>\n            <Box align=\"center\" my={2}>\n              <Typography variant=\"paragraph\">\n                Restore your wallet using your twelve or twenty-four seed words.\n                Note that this will delete any existing wallet on this device.\n              </Typography>\n            </Box>\n            <Box align=\"center\">\n              <Typography variant=\"paragraph\" fontWeight=\"fontWeightBold\">\n                <b>Do not enter your hardware wallet seedphrase here.</b>\n              </Typography>\n            </Box>\n            <Box align=\"center\" mb={4}>\n              <Typography variant=\"paragraph\" fontWeight=\"fontWeightBold\">\n                Hardware wallets can be optionally connected after a web wallet is created.\n              </Typography>\n            </Box>\n\n            <TextField\n              variant=\"outlined\"              \n              fullWidth\n              multiline\n              rows={5}\n              margin=\"normal\"\n              label=\"Seed Words\"\n              value={rawMnemonic}\n              onChange={(e) => setRawMnemonic(e.target.value)}\n            />\n            {displayInvalidMnemonic && (\n               <Typography fontWeight=\"fontWeightBold\" style={{ fontSize: '12px', color: 'red' }}>\n                 Mnemonic validation failed. Please enter a valid BIP 39 seed phrase.\n               </Typography>\n            )}\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              margin=\"normal\"\n              label=\"New Password (Optional)\"\n              type=\"password\"\n              autoComplete=\"new-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              margin=\"normal\"\n              label=\"Confirm Password\"\n              type=\"password\"\n              autoComplete=\"new-password\"\n              value={passwordConfirm}\n              onChange={(e) => setPasswordConfirm(e.target.value)}\n            />\n          </CardContent>\n          <CardActions style={{ justifyContent: 'space-between' }}>\n            <Button onClick={goBack}>Cancel</Button>\n            <Button\n              color=\"primary\"\n              disabled={!isNextBtnEnabled}\n              onClick={() => {\n                mnemonicToSeed(mnemonic).then((seed) => {\n                  setSeed(seed);\n                  setNext(true);\n                });\n              }}\n            >\n              Next\n            </Button>\n          </CardActions>\n        </Card>\n      )}\n    </>\n  );\n}\n\nfunction DerivedAccounts({ goBack, mnemonic, seed, password }) {\n  const callAsync = useCallAsync();\n  const [dPathMenuItem, setDPathMenuItem] = useState(\n    DerivationPathMenuItem.Bip44Change,\n  );\n  const accounts = [...Array(10)].map((_, idx) => {\n    return getAccountFromSeed(\n      Buffer.from(seed, 'hex'),\n      idx,\n      toDerivationPath(dPathMenuItem),\n    );\n  });\n\n  function submit() {\n    callAsync(\n      storeMnemonicAndSeed(\n        mnemonic,\n        seed,\n        password,\n        toDerivationPath(dPathMenuItem),\n      ),\n    );\n  }\n\n  return (\n    <Card>\n      <AccountsSelector\n        showDeprecated={true}\n        accounts={accounts}\n        dPathMenuItem={dPathMenuItem}\n        setDPathMenuItem={setDPathMenuItem}\n      />\n      <CardActions style={{ justifyContent: 'space-between' }}>\n        <Button onClick={goBack}>Back</Button>\n        <Button color=\"primary\" onClick={submit}>\n          Restore\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nexport function AccountsSelector({\n  showRoot,\n  showDeprecated,\n  accounts,\n  dPathMenuItem,\n  setDPathMenuItem,\n  onClick,\n}) {\n  return (\n    <CardContent>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n        }}\n      >\n        <Typography variant=\"h5\" gutterBottom>\n          Derivable Accounts\n        </Typography>\n        <FormControl variant=\"outlined\">\n          <Select\n            value={dPathMenuItem}\n            onChange={(e) => {\n              setDPathMenuItem(e.target.value);\n            }}\n          >\n            {showRoot && (\n              <MenuItem value={DerivationPathMenuItem.Bip44Root}>\n                {`m/44'/501'`}\n              </MenuItem>\n            )}\n            <MenuItem value={DerivationPathMenuItem.Bip44}>\n              {`m/44'/501'/0'`}\n            </MenuItem>\n            <MenuItem value={DerivationPathMenuItem.Bip44Change}>\n              {`m/44'/501'/0'/0'`}\n            </MenuItem>\n            {showDeprecated && (\n              <MenuItem value={DerivationPathMenuItem.Deprecated}>\n                {`m/501'/0'/0/0 (deprecated)`}\n              </MenuItem>\n            )}\n          </Select>\n        </FormControl>\n      </div>\n      {accounts.map((acc) => {\n        return (\n          <div onClick={onClick ? () => onClick(acc) : {}}>\n            <BalanceListItem\n              key={acc.publicKey.toString()}\n              onClick={onClick}\n              publicKey={acc.publicKey}\n              expandable={false}\n            />\n          </div>\n        );\n      })}\n    </CardContent>\n  );\n}\n\n// Material UI's Select doesn't render properly when using an `undefined` value,\n// so we define this type and the subsequent `toDerivationPath` translator as a\n// workaround.\n//\n// DERIVATION_PATH.deprecated is always undefined.\nexport const DerivationPathMenuItem = {\n  Deprecated: 0,\n  Bip44: 1,\n  Bip44Change: 2,\n  Bip44Root: 3, // Ledger only.\n};\n\nexport function toDerivationPath(dPathMenuItem) {\n  switch (dPathMenuItem) {\n    case DerivationPathMenuItem.Deprecated:\n      return DERIVATION_PATH.deprecated;\n    case DerivationPathMenuItem.Bip44:\n      return DERIVATION_PATH.bip44;\n    case DerivationPathMenuItem.Bip44Change:\n      return DERIVATION_PATH.bip44Change;\n    case DerivationPathMenuItem.Bip44Root:\n      return DERIVATION_PATH.bip44Root;\n    default:\n      throw new Error(`invalid derivation path: ${dPathMenuItem}`);\n  }\n}\n","import { clusterApiUrl } from '@solana/web3.js';\nimport { MAINNET_URL, MAINNET_BACKUP_URL } from '../utils/connection';\n\nexport const CLUSTERS = [\n  {\n    name: 'mainnet-beta',\n    apiUrl: MAINNET_URL,\n    label: 'Mainnet Beta',\n    clusterSlug: 'mainnet-beta',\n  },\n  {\n    name: 'mainnet-beta-backup',\n    apiUrl: MAINNET_BACKUP_URL,\n      label: 'Mainnet Beta Backup',\n    clusterSlug: 'mainnet-beta',\n  },\n  {\n    name: 'devnet',\n    apiUrl: clusterApiUrl('devnet'),\n    label: 'Devnet',\n    clusterSlug: 'devnet',\n  },\n  {\n    name: 'testnet',\n    apiUrl: clusterApiUrl('testnet'),\n    label: 'Testnet',\n    clusterSlug: 'testnet',\n  },\n  {\n    name: 'localnet',\n    apiUrl: 'http://localhost:8899',\n    label: null,\n    clusterSlug: 'localnet',\n  }\n];\n\nexport function clusterForEndpoint(endpoint) {\n  return getClusters().find(({ apiUrl }) => apiUrl === endpoint);\n}\n\nconst customClusterConfigKey = \"customClusterConfig\";\n\nexport function addCustomCluster(name, apiUrl) {\n  const stringifiedConfig = JSON.stringify({name: name, label: name, apiUrl: apiUrl, clusterSlug: null});\n  localStorage.setItem(customClusterConfigKey, stringifiedConfig);\n}\n\nexport function customClusterExists() {\n  return !!localStorage.getItem(customClusterConfigKey)\n}\n\nexport function getClusters() {\n  const stringifiedConfig = localStorage.getItem(customClusterConfigKey);\n  const config = stringifiedConfig ? JSON.parse(stringifiedConfig) : null;\n  return  config ? [...CLUSTERS, config] : CLUSTERS;\n}\n","import { PublicKey } from '@solana/web3.js';\nimport { DERIVATION_PATH } from './localStorage';\nconst bs58 = require('bs58');\n\nconst INS_GET_PUBKEY = 0x05;\nconst INS_SIGN_MESSAGE = 0x06;\n\nconst P1_NON_CONFIRM = 0x00;\nconst P1_CONFIRM = 0x01;\n\nconst P2_EXTEND = 0x01;\nconst P2_MORE = 0x02;\n\nconst MAX_PAYLOAD = 255;\n\nconst LEDGER_CLA = 0xe0;\n\n/*\n * Helper for chunked send of large payloads\n */\nasync function solana_send(transport, instruction, p1, payload) {\n  var p2 = 0;\n  var payload_offset = 0;\n\n  if (payload.length > MAX_PAYLOAD) {\n    while (payload.length - payload_offset > MAX_PAYLOAD) {\n      const buf = payload.slice(payload_offset, payload_offset + MAX_PAYLOAD);\n      payload_offset += MAX_PAYLOAD;\n      console.log(\n        'send',\n        (p2 | P2_MORE).toString(16),\n        buf.length.toString(16),\n        buf,\n      );\n      const reply = await transport.send(\n        LEDGER_CLA,\n        instruction,\n        p1,\n        p2 | P2_MORE,\n        buf,\n      );\n      if (reply.length !== 2) {\n        throw new Error(\n          'solana_send: Received unexpected reply payload',\n          'UnexpectedReplyPayload',\n        );\n      }\n      p2 |= P2_EXTEND;\n    }\n  }\n\n  const buf = payload.slice(payload_offset);\n  console.log('send', p2.toString(16), buf.length.toString(16), buf);\n  const reply = await transport.send(LEDGER_CLA, instruction, p1, p2, buf);\n\n  return reply.slice(0, reply.length - 2);\n}\n\nconst BIP32_HARDENED_BIT = (1 << 31) >>> 0;\nfunction _harden(n) {\n  return (n | BIP32_HARDENED_BIT) >>> 0;\n}\n\nexport function solana_derivation_path(account, change, derivationPath) {\n  let useAccount = account ? account : 0;\n  let useChange = change ? change : 0;\n  derivationPath = derivationPath\n    ? derivationPath\n    : DERIVATION_PATH.bip44Change;\n\n  if (derivationPath === DERIVATION_PATH.bip44Root) {\n    const length = 2;\n    const derivation_path = Buffer.alloc(1 + length * 4);\n    let offset = 0;\n    offset = derivation_path.writeUInt8(length, offset);\n    offset = derivation_path.writeUInt32BE(_harden(44), offset); // Using BIP44\n    derivation_path.writeUInt32BE(_harden(501), offset); // Solana's BIP44 path\n    return derivation_path;\n  } else if (derivationPath === DERIVATION_PATH.bip44) {\n    const length = 3;\n    const derivation_path = Buffer.alloc(1 + length * 4);\n    let offset = 0;\n    offset = derivation_path.writeUInt8(length, offset);\n    offset = derivation_path.writeUInt32BE(_harden(44), offset); // Using BIP44\n    offset = derivation_path.writeUInt32BE(_harden(501), offset); // Solana's BIP44 path\n    derivation_path.writeUInt32BE(_harden(useAccount), offset);\n    return derivation_path;\n  } else if (derivationPath === DERIVATION_PATH.bip44Change) {\n    const length = 4;\n    const derivation_path = Buffer.alloc(1 + length * 4);\n    let offset = 0;\n    offset = derivation_path.writeUInt8(length, offset);\n    offset = derivation_path.writeUInt32BE(_harden(44), offset); // Using BIP44\n    offset = derivation_path.writeUInt32BE(_harden(501), offset); // Solana's BIP44 path\n    offset = derivation_path.writeUInt32BE(_harden(useAccount), offset);\n    derivation_path.writeUInt32BE(_harden(useChange), offset);\n    return derivation_path;\n  } else {\n    throw new Error('Invalid derivation path');\n  }\n}\n\nasync function solana_ledger_get_pubkey(transport, derivation_path) {\n  return solana_send(\n    transport,\n    INS_GET_PUBKEY,\n    P1_NON_CONFIRM,\n    derivation_path,\n  );\n}\n\nexport async function solana_ledger_sign_transaction(\n  transport,\n  derivation_path,\n  transaction,\n) {\n  const msg_bytes = transaction.serializeMessage();\n  return solana_ledger_sign_bytes(transport, derivation_path, msg_bytes);\n}\n\nexport async function solana_ledger_sign_bytes(\n  transport,\n  derivation_path,\n  msg_bytes,\n) {\n  var num_paths = Buffer.alloc(1);\n  num_paths.writeUInt8(1);\n  const payload = Buffer.concat([num_paths, derivation_path, msg_bytes]);\n\n  return solana_send(transport, INS_SIGN_MESSAGE, P1_CONFIRM, payload);\n}\n\nexport async function getPublicKey(transport, path) {\n  let from_derivation_path;\n  if (path) {\n    from_derivation_path = path;\n  } else {\n    from_derivation_path = solana_derivation_path();\n  }\n  const from_pubkey_bytes = await solana_ledger_get_pubkey(\n    transport,\n    from_derivation_path,\n  );\n  const from_pubkey_string = bs58.encode(from_pubkey_bytes);\n\n  return new PublicKey(from_pubkey_string);\n}\n\nexport async function solana_ledger_confirm_public_key(\n  transport,\n  derivation_path,\n) {\n  return await solana_send(\n    transport,\n    INS_GET_PUBKEY,\n    P1_CONFIRM,\n    derivation_path,\n  );\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { Keypair, Connection, PublicKey } from '@solana/web3.js';\nimport { useMediaQuery } from '@material-ui/core';\nimport * as bs58 from 'bs58';\n\nexport async function sleep(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n\nexport function useLocalStorageState<T>(\n  key: string,\n  defaultState: T,\n): [T, (T) => void] {\n  const [state, setState] = useState(() => {\n    let storedState = localStorage.getItem(key);\n    if (storedState) {\n      return JSON.parse(storedState);\n    }\n    return defaultState;\n  });\n\n  const setLocalStorageState = useCallback(\n    (newState) => {\n      let changed = state !== newState;\n      if (!changed) {\n        return;\n      }\n      setState(newState);\n      if (newState === null) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, JSON.stringify(newState));\n      }\n    },\n    [state, key],\n  );\n\n  return [state, setLocalStorageState];\n}\n\nexport function useEffectAfterTimeout(effect: () => void, timeout: number) {\n  useEffect(() => {\n    let handle = setTimeout(effect, timeout);\n    return () => clearTimeout(handle);\n  });\n}\n\nexport function useListener(emitter, eventName: string) {\n  let [, forceUpdate] = useState(0);\n  useEffect(() => {\n    let listener = () => forceUpdate((i) => i + 1);\n    emitter.on(eventName, listener);\n    return () => emitter.removeListener(eventName, listener);\n  }, [emitter, eventName]);\n}\n\nexport function useRefEqual<T>(\n  value: T,\n  areEqual: (oldValue: T, newValue: T) => boolean,\n): T {\n  const prevRef = useRef<T>(value);\n  if (prevRef.current !== value && !areEqual(prevRef.current, value)) {\n    prevRef.current = value;\n  }\n  return prevRef.current;\n}\n\nexport function abbreviateAddress(address: PublicKey) {\n  let base58 = address.toBase58();\n  return base58.slice(0, 4) + '' + base58.slice(base58.length - 4);\n}\n\nexport async function confirmTransaction(\n  connection: Connection,\n  signature: string,\n) {\n  let startTime = new Date();\n  let result = await connection.confirmTransaction(signature, 'recent');\n  if (result.value.err) {\n    throw new Error(\n      'Error confirming transaction: ' + JSON.stringify(result.value.err),\n    );\n  }\n  console.log(\n    'Transaction confirmed after %sms',\n    new Date().getTime() - startTime.getTime(),\n  );\n  return result.value;\n}\n\n// TODO consolidate popup dimensions\nexport function useIsExtensionWidth() {\n  return useMediaQuery('(max-width:450px)');\n}\n\nexport const isExtension = window.location.protocol === 'chrome-extension:';\n\nexport const isExtensionPopup = isExtension && window.opener;\n/**\n * Returns an account object when given the private key\n */\nexport const decodeAccount = (privateKey: string) => {\n  try {\n    return Keypair.fromSecretKey(new Uint8Array(JSON.parse(privateKey)));\n  } catch (_) {\n    try {\n      return Keypair.fromSecretKey(new Uint8Array(bs58.decode(privateKey)));\n    } catch (_) {\n      return undefined;\n    }\n  }\n}\n\n// shorten the checksummed version of the input address to have 4 characters at start and end\nexport function shortenAddress(address: string, chars = 4): string {\n  return `${address.slice(0, chars)}...${address.slice(-chars)}`;\n}","import TransportWebHid from '@ledgerhq/hw-transport-webhid';\nimport {\n  getPublicKey,\n  solana_derivation_path,\n  solana_ledger_sign_bytes,\n  solana_ledger_sign_transaction,\n  solana_ledger_confirm_public_key,\n} from './ledger-core';\nimport { DERIVATION_PATH } from './localStorage';\nimport bs58 from 'bs58';\n\nlet TRANSPORT = null;\n\nexport class LedgerWalletProvider {\n  constructor(args) {\n    this.onDisconnect = (args && args.onDisconnect) || (() => {});\n    this.derivationPath = args\n      ? args.derivationPath\n      : DERIVATION_PATH.bip44Change;\n    this.account = args ? args.account : undefined;\n    this.change = args ? args.change : undefined;\n    this.solanaDerivationPath = solana_derivation_path(\n      this.account,\n      this.change,\n      this.derivationPath,\n    );\n  }\n\n  init = async () => {\n    if (TRANSPORT === null) {\n      TRANSPORT = await TransportWebHid.create();\n    }\n    this.transport = TRANSPORT;\n    this.pubKey = await getPublicKey(this.transport, this.solanaDerivationPath);\n    this.transport.on('disconnect', this.onDisconnect);\n    this.listAddresses = async (walletCount) => {\n      // TODO: read accounts from ledger\n      return [this.pubKey];\n    };\n    return this;\n  };\n\n  get publicKey() {\n    return this.pubKey;\n  }\n\n  signTransaction = async (transaction) => {\n    const sig_bytes = await solana_ledger_sign_transaction(\n      this.transport,\n      this.solanaDerivationPath,\n      transaction,\n    );\n    transaction.addSignature(this.publicKey, sig_bytes);\n    return transaction;\n  };\n\n  createSignature = async (message) => {\n    const sig_bytes = await solana_ledger_sign_bytes(\n      this.transport,\n      this.solanaDerivationPath,\n      message,\n    );\n    return bs58.encode(sig_bytes);\n  };\n\n  confirmPublicKey = async () => {\n    return await solana_ledger_confirm_public_key(\n      this.transport,\n      this.solanaDerivationPath,\n    );\n  };\n}\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\nimport * as bs58 from 'bs58';\nimport { Account, PublicKey } from '@solana/web3.js';\nimport nacl from 'tweetnacl';\nimport {\n  setInitialAccountInfo,\n  useAccountInfo,\n  useConnection,\n} from './connection';\nimport {\n  closeTokenAccount,\n  createAndInitializeTokenAccount,\n  createAssociatedTokenAccount,\n  getOwnedTokenAccounts,\n  nativeTransfer,\n  transferTokens,\n} from './tokens';\nimport { TOKEN_PROGRAM_ID } from './tokens/instructions';\nimport {\n  ACCOUNT_LAYOUT,\n  parseMintData,\n  parseTokenAccountData,\n} from './tokens/data';\nimport { useListener, useLocalStorageState, useRefEqual } from './utils';\nimport { useTokenInfo } from './tokens/names';\nimport { refreshCache, useAsyncData } from './fetch-loop';\nimport { useUnlockedMnemonicAndSeed, walletSeedChanged } from './wallet-seed';\nimport { WalletProviderFactory } from './walletProvider/factory';\nimport { getAccountFromSeed } from './walletProvider/localStorage';\nimport { useSnackbar } from 'notistack';\n\nconst DEFAULT_WALLET_SELECTOR = {\n  walletIndex: 0,\n  importedPubkey: undefined,\n  ledger: false,\n};\n\nexport class Wallet {\n  constructor(connection, type, args) {\n    this.connection = connection;\n    this.type = type;\n    this.provider = WalletProviderFactory.getProvider(type, args);\n  }\n\n  static create = async (connection, type, args) => {\n    const instance = new Wallet(connection, type, args);\n    await instance.provider.init();\n    return instance;\n  };\n\n  get publicKey() {\n    return this.provider.publicKey;\n  }\n\n  get allowsExport() {\n    return this.type === 'local';\n  }\n\n  getTokenAccountInfo = async () => {\n    let accounts = await getOwnedTokenAccounts(this.connection, this.publicKey);\n    return accounts\n      .map(({ publicKey, accountInfo }) => {\n        setInitialAccountInfo(this.connection, publicKey, accountInfo);\n        return { publicKey, parsed: parseTokenAccountData(accountInfo.data) };\n      })\n      .sort((account1, account2) =>\n        account1.parsed.mint\n          .toBase58()\n          .localeCompare(account2.parsed.mint.toBase58()),\n      );\n  };\n\n  createTokenAccount = async (tokenAddress) => {\n    return await createAndInitializeTokenAccount({\n      connection: this.connection,\n      payer: this,\n      mintPublicKey: tokenAddress,\n      newAccount: new Account(),\n    });\n  };\n\n  createAssociatedTokenAccount = async (splTokenMintAddress) => {\n    return await createAssociatedTokenAccount({\n      connection: this.connection,\n      wallet: this,\n      splTokenMintAddress,\n    });\n  };\n\n  tokenAccountCost = async () => {\n    return this.connection.getMinimumBalanceForRentExemption(\n      ACCOUNT_LAYOUT.span,\n    );\n  };\n\n  transferToken = async (\n    source,\n    destination,\n    amount,\n    mint,\n    decimals,\n    memo = null,\n    overrideDestinationCheck = false,\n  ) => {\n    if (source.equals(this.publicKey)) {\n      if (memo) {\n        throw new Error('Memo not implemented');\n      }\n      return this.transferSol(destination, amount);\n    }\n    return await transferTokens({\n      connection: this.connection,\n      owner: this,\n      sourcePublicKey: source,\n      destinationPublicKey: destination,\n      amount,\n      memo,\n      mint,\n      decimals,\n      overrideDestinationCheck,\n    });\n  };\n\n  transferSol = async (destination, amount) => {\n    return nativeTransfer(this.connection, this, destination, amount);\n  };\n\n  closeTokenAccount = async (publicKey, skipPreflight = false) => {\n    return await closeTokenAccount({\n      connection: this.connection,\n      owner: this,\n      sourcePublicKey: publicKey,\n      skipPreflight,\n    });\n  };\n\n  signTransaction = async (transaction) => {\n    return this.provider.signTransaction(transaction);\n  };\n\n  createSignature = async (message) => {\n    return this.provider.createSignature(message);\n  };\n}\n\nconst WalletContext = React.createContext(null);\n\nexport function WalletProvider({ children }) {\n  useListener(walletSeedChanged, 'change');\n  const [{\n    mnemonic,\n    seed,\n    importsEncryptionKey,\n    derivationPath,\n  }] = useUnlockedMnemonicAndSeed();\n  const { enqueueSnackbar } = useSnackbar();\n  const connection = useConnection();\n  const [wallet, setWallet] = useState();\n\n  // `privateKeyImports` are accounts imported *in addition* to HD wallets\n  const [privateKeyImports, setPrivateKeyImports] = useLocalStorageState(\n    'walletPrivateKeyImports',\n    {},\n  );\n  // `walletSelector` identifies which wallet to use.\n  let [walletSelector, setWalletSelector] = useLocalStorageState(\n    'walletSelector',\n    DEFAULT_WALLET_SELECTOR,\n  );\n  const [_hardwareWalletAccount, setHardwareWalletAccount] = useState(null);\n\n  // `walletCount` is the number of HD wallets.\n  const [walletCount, setWalletCount] = useLocalStorageState('walletCount', 1);\n\n  if (walletSelector.ledger && !_hardwareWalletAccount) {\n    walletSelector = DEFAULT_WALLET_SELECTOR;\n    setWalletSelector(DEFAULT_WALLET_SELECTOR);\n  }\n\n  useEffect(() => {\n    (async () => {\n      if (!seed) {\n        return null;\n      }\n      let wallet;\n      if (walletSelector.ledger) {\n        try {\n          const onDisconnect = () => {\n            setWalletSelector(DEFAULT_WALLET_SELECTOR);\n            setHardwareWalletAccount(null);\n          };\n          const args = {\n            onDisconnect,\n            derivationPath: walletSelector.derivationPath,\n            account: walletSelector.account,\n            change: walletSelector.change,\n          };\n          wallet = await Wallet.create(connection, 'ledger', args);\n        } catch (e) {\n          console.log(`received error using ledger wallet: ${e}`);\n          let message = 'Received error unlocking ledger';\n          if (e.statusCode) {\n            message += `: ${e.statusCode}`;\n          }\n          enqueueSnackbar(message, { variant: 'error' });\n          setWalletSelector(DEFAULT_WALLET_SELECTOR);\n          setHardwareWalletAccount(null);\n          return;\n        }\n      }\n      if (!wallet) {\n        const account =\n          walletSelector.walletIndex !== undefined\n            ? getAccountFromSeed(\n                Buffer.from(seed, 'hex'),\n                walletSelector.walletIndex,\n                derivationPath,\n              )\n            : new Account(\n                (() => {\n                  const { nonce, ciphertext } = privateKeyImports[\n                    walletSelector.importedPubkey\n                  ];\n                  return nacl.secretbox.open(\n                    bs58.decode(ciphertext),\n                    bs58.decode(nonce),\n                    importsEncryptionKey,\n                  );\n                })(),\n              );\n        wallet = await Wallet.create(connection, 'local', { account });\n      }\n      setWallet(wallet);\n    })();\n  }, [\n    connection,\n    seed,\n    walletSelector,\n    privateKeyImports,\n    importsEncryptionKey,\n    setWalletSelector,\n    enqueueSnackbar,\n    derivationPath,\n  ]);\n  function addAccount({ name, importedAccount, ledger }) {\n    if (importedAccount === undefined) {\n      name && localStorage.setItem(`name${walletCount}`, name);\n      setWalletCount(walletCount + 1);\n    } else {\n      const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n      const plaintext = importedAccount.secretKey;\n      const ciphertext = nacl.secretbox(plaintext, nonce, importsEncryptionKey);\n      // `useLocalStorageState` requires a new object.\n      let newPrivateKeyImports = { ...privateKeyImports };\n      newPrivateKeyImports[importedAccount.publicKey.toString()] = {\n        name,\n        ciphertext: bs58.encode(ciphertext),\n        nonce: bs58.encode(nonce),\n      };\n      setPrivateKeyImports(newPrivateKeyImports);\n    }\n  }\n\n  const getWalletNames = () => {\n    return JSON.stringify(\n      [...Array(walletCount).keys()].map((idx) =>\n        localStorage.getItem(`name${idx}`),\n      ),\n    );\n  };\n  const [walletNames, setWalletNames] = useState(getWalletNames());\n  function setAccountName(selector, newName) {\n    if (selector.importedPubkey && !selector.ledger) {\n      let newPrivateKeyImports = { ...privateKeyImports };\n      newPrivateKeyImports[selector.importedPubkey.toString()].name = newName;\n      setPrivateKeyImports(newPrivateKeyImports);\n    } else {\n      localStorage.setItem(`name${selector.walletIndex}`, newName);\n      setWalletNames(getWalletNames());\n    }\n  }\n\n  const [accounts, derivedAccounts] = useMemo(() => {\n    if (!seed) {\n      return [[], []];\n    }\n\n    const seedBuffer = Buffer.from(seed, 'hex');\n    const derivedAccounts = [...Array(walletCount).keys()].map((idx) => {\n      let address = getAccountFromSeed(seedBuffer, idx, derivationPath)\n        .publicKey;\n      let name = localStorage.getItem(`name${idx}`);\n      return {\n        selector: {\n          walletIndex: idx,\n          importedPubkey: undefined,\n          ledger: false,\n        },\n        isSelected: walletSelector.walletIndex === idx,\n        address,\n        name: idx === 0 ? 'Main account' : name || `Account ${idx}`,\n      };\n    });\n\n    const importedAccounts = Object.keys(privateKeyImports).map((pubkey) => {\n      const { name } = privateKeyImports[pubkey];\n      return {\n        selector: {\n          walletIndex: undefined,\n          importedPubkey: pubkey,\n          ledger: false,\n        },\n        address: new PublicKey(bs58.decode(pubkey)),\n        name: `${name} (imported)`, // TODO: do this in the Component with styling.\n        isSelected: walletSelector.importedPubkey === pubkey,\n      };\n    });\n\n    const accounts = derivedAccounts.concat(importedAccounts);\n    return [accounts, derivedAccounts];\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [seed, walletCount, walletSelector, privateKeyImports, walletNames]);\n\n  let hardwareWalletAccount;\n  if (_hardwareWalletAccount) {\n    hardwareWalletAccount = {\n      ..._hardwareWalletAccount,\n      selector: {\n        walletIndex: undefined,\n        ledger: true,\n        importedPubkey: _hardwareWalletAccount.publicKey,\n        derivationPath: _hardwareWalletAccount.derivationPath,\n        account: _hardwareWalletAccount.account,\n        change: _hardwareWalletAccount.change,\n      },\n      address: _hardwareWalletAccount.publicKey,\n      isSelected: walletSelector.ledger,\n    };\n  }\n\n  return (\n    <WalletContext.Provider\n      value={{\n        wallet,\n        seed,\n        mnemonic,\n        importsEncryptionKey,\n        walletSelector,\n        setWalletSelector,\n        privateKeyImports,\n        setPrivateKeyImports,\n        accounts,\n        derivedAccounts,\n        addAccount,\n        setAccountName,\n        derivationPath,\n        hardwareWalletAccount,\n        setHardwareWalletAccount,\n      }}\n    >\n      {children}\n    </WalletContext.Provider>\n  );\n}\n\nexport function useWallet() {\n  return useContext(WalletContext).wallet;\n}\n\nexport function useWalletPublicKeys() {\n  let wallet = useWallet();\n  let [tokenAccountInfo, loaded] = useAsyncData(\n    wallet.getTokenAccountInfo,\n    wallet.getTokenAccountInfo,\n  );\n  let publicKeys = [\n    wallet.publicKey,\n    ...(tokenAccountInfo\n      ? tokenAccountInfo.map(({ publicKey }) => publicKey)\n      : []),\n  ];\n  // Prevent users from re-rendering unless the list of public keys actually changes\n  publicKeys = useRefEqual(\n    publicKeys,\n    (oldKeys, newKeys) =>\n      oldKeys.length === newKeys.length &&\n      oldKeys.every((key, i) => key.equals(newKeys[i])),\n  );\n  return [publicKeys, loaded];\n}\n\nexport function useWalletTokenAccounts() {\n  let wallet = useWallet();\n  return useAsyncData(wallet.getTokenAccountInfo, wallet.getTokenAccountInfo);\n}\n\nexport function refreshWalletPublicKeys(wallet) {\n  refreshCache(wallet.getTokenAccountInfo);\n}\n\nexport function useWalletAddressForMint(mint) {\n  const [walletAccounts] = useWalletTokenAccounts();\n  return useMemo(\n    () =>\n      mint\n        ? walletAccounts\n            ?.find((account) => account.parsed?.mint?.equals(mint))\n            ?.publicKey.toBase58()\n        : null,\n    [walletAccounts, mint],\n  );\n}\n\nexport function useBalanceInfo(publicKey) {\n  let [accountInfo, accountInfoLoaded] = useAccountInfo(publicKey);\n  let { mint, owner, amount } = accountInfo?.owner.equals(TOKEN_PROGRAM_ID)\n    ? parseTokenAccountData(accountInfo.data)\n    : {};\n  let [mintInfo, mintInfoLoaded] = useAccountInfo(mint);\n  let { name, symbol, logoUri } = useTokenInfo(mint);\n\n  if (!accountInfoLoaded) {\n    return null;\n  }\n\n  if (mint && mintInfoLoaded) {\n    try {\n      let { decimals } = parseMintData(mintInfo.data);\n      return {\n        amount,\n        decimals,\n        mint,\n        owner,\n        tokenName: name,\n        tokenSymbol: symbol,\n        tokenLogoUri: logoUri,\n        valid: true,\n      };\n    } catch (e) {\n      return {\n        amount,\n        decimals: 0,\n        mint,\n        owner,\n        tokenName: 'Invalid',\n        tokenSymbol: 'INVALID',\n        tokenLogoUri: null,\n        valid: false,\n      };\n    }\n  }\n\n  if (!mint) {\n    return {\n      amount: accountInfo?.lamports ?? 0,\n      decimals: 9,\n      mint: null,\n      owner: publicKey,\n      tokenName: 'SOL',\n      tokenSymbol: 'SOL',\n      valid: true,\n    };\n  }\n\n  return null;\n}\n\nexport function useWalletSelector() {\n  const {\n    accounts,\n    derivedAccounts,\n    addAccount,\n    setWalletSelector,\n    setAccountName,\n    hardwareWalletAccount,\n    setHardwareWalletAccount,\n  } = useContext(WalletContext);\n\n  return {\n    accounts,\n    derivedAccounts,\n    setWalletSelector,\n    addAccount,\n    setAccountName,\n    hardwareWalletAccount,\n    setHardwareWalletAccount,\n  };\n}\n","import React, { useContext, useEffect, useMemo } from 'react';\nimport {\n  AccountInfo,\n  clusterApiUrl,\n  Connection,\n  PublicKey,\n} from '@solana/web3.js';\nimport tuple from 'immutable-tuple';\nimport * as anchor from '@project-serum/anchor';\nimport { useLocalStorageState, useRefEqual } from './utils';\nimport { refreshCache, setCache, useAsyncData } from './fetch-loop';\n\nconst ConnectionContext = React.createContext<{\n  endpoint: string;\n  setEndpoint: (string) => void;\n  connection: Connection;\n} | null>(null);\n\nexport const MAINNET_URL = 'https://solana-api.projectserum.com';\n// No backup url for now. Leave the variable to not break wallets that\n// have saved the url in their local storage, previously.\nexport const MAINNET_BACKUP_URL = 'https://solana-api.projectserum.com/';\nexport function ConnectionProvider({ children }) {\n  const [endpoint, setEndpoint] = useLocalStorageState(\n    'connectionEndpoint',\n    MAINNET_URL,\n  );\n\n  const connection = useMemo(() => new Connection(endpoint, 'recent'), [\n    endpoint,\n  ]);\n\n  return (\n    <ConnectionContext.Provider value={{ endpoint, setEndpoint, connection }}>\n      {children}\n    </ConnectionContext.Provider>\n  );\n}\n\nexport function useConnection(): Connection {\n  let context = useContext(ConnectionContext);\n  if (!context) {\n    throw new Error('Missing connection context');\n  }\n  return context.connection;\n}\n\nexport function useConnectionConfig() {\n  let context = useContext(ConnectionContext);\n  if (!context) {\n    throw new Error('Missing connection context');\n  }\n  return { endpoint: context.endpoint, setEndpoint: context.setEndpoint };\n}\n\nexport function useIsProdNetwork() {\n  let context = useContext(ConnectionContext);\n  if (!context) {\n    throw new Error('Missing connection context');\n  }\n  return context.endpoint === MAINNET_URL || context.endpoint === MAINNET_BACKUP_URL;\n}\n\nexport function useSolanaExplorerUrlSuffix() {\n  const context = useContext(ConnectionContext);\n  if (!context) {\n    throw new Error('Missing connection context');\n  }\n  const endpoint = context.endpoint;\n  if (endpoint === clusterApiUrl('devnet')) {\n    return '?cluster=devnet';\n  } else if (endpoint === clusterApiUrl('testnet')) {\n    return '?cluster=testnet';\n  }\n  return '';\n}\n\nexport function useAccountInfo(publicKey?: PublicKey) {\n  const connection = useConnection();\n  const cacheKey = tuple(connection, publicKey?.toBase58());\n  const [accountInfo, loaded] = useAsyncData(\n    async () => (publicKey ? connection.getAccountInfo(publicKey) : null),\n    cacheKey,\n  );\n  useEffect(() => {\n    if (!publicKey) {\n      return;\n    }\n    let previousInfo: AccountInfo<Buffer> | null = null;\n    const id = connection.onAccountChange(publicKey, (info) => {\n      if (\n        !previousInfo ||\n        !previousInfo.data.equals(info.data) ||\n        previousInfo.lamports !== info.lamports\n      ) {\n        previousInfo = info;\n        setCache(cacheKey, info);\n      }\n    });\n    return () => {\n      connection.removeAccountChangeListener(id);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [connection, publicKey?.toBase58() ?? '', cacheKey]);\n  return [\n    useRefEqual(\n      accountInfo,\n      (oldInfo, newInfo) =>\n        !!oldInfo &&\n        !!newInfo &&\n        oldInfo.data.equals(newInfo.data) &&\n        oldInfo.lamports === newInfo.lamports,\n    ),\n    loaded,\n  ];\n}\n\nexport function refreshAccountInfo(connection, publicKey, clearCache = false) {\n  const cacheKey = tuple(connection, publicKey.toBase58());\n  refreshCache(cacheKey, clearCache);\n}\n\nexport function setInitialAccountInfo(connection, publicKey, accountInfo) {\n  const cacheKey = tuple(connection, publicKey.toBase58());\n  setCache(cacheKey, accountInfo, { initializeOnly: true });\n}\n\nexport async function getMultipleSolanaAccounts(\n  connection: Connection,\n  publicKeys: PublicKey[],\n): Promise<\n  Array<null | { publicKey: PublicKey; account: AccountInfo<Buffer> }>\n> {\n\treturn anchor.utils.rpc.getMultipleAccounts(connection, publicKeys);\n}\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport DialogForm from './DialogForm';\nimport { useWallet } from '../utils/wallet';\nimport { useUnlockedMnemonicAndSeed } from '../utils/wallet-seed';\n\nexport default function ExportAccountDialog({ open, onClose }) {\n  const wallet = useWallet();\n  const [isHidden, setIsHidden] = useState(true);\n  const keyOutput = `[${Array.from(wallet.provider.account.secretKey)}]`;\n  return (\n    <DialogForm open={open} onClose={onClose} fullWidth>\n      <DialogTitle>Export account</DialogTitle>\n      <DialogContent>\n        <TextField\n          label=\"Private key\"\n          fullWidth\n          type={isHidden && 'password'}\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={keyOutput}\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={!isHidden}\n              onChange={() => setIsHidden(!isHidden)}\n            />\n          }\n          label=\"Reveal\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n\nexport function ExportMnemonicDialog({ open, onClose }) {\n  const [isHidden, setIsHidden] = useState(true);\n  const [mnemKey] = useUnlockedMnemonicAndSeed();\n  return (\n    <DialogForm open={open} onClose={onClose} fullWidth>\n      <DialogTitle>Export mnemonic</DialogTitle>\n      <DialogContent>\n        <TextField\n          label=\"Mnemonic\"\n          fullWidth\n          type={isHidden && 'password'}\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={mnemKey.mnemonic}\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={!isHidden}\n              onChange={() => setIsHidden(!isHidden)}\n            />\n          }\n          label=\"Reveal\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n","import React, { useRef } from 'react';\nimport { TextField } from '@material-ui/core';\nimport CopyIcon from 'mdi-material-ui/ContentCopy';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport QrcodeIcon from 'mdi-material-ui/Qrcode';\nimport QRCode from 'qrcode.react';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    alignItems: 'baseline',\n  },\n}));\n\nexport default function CopyableDisplay({\n  value,\n  label,\n  autoFocus,\n  qrCode,\n  helperText,\n}) {\n  const { enqueueSnackbar } = useSnackbar();\n  const textareaRef = useRef();\n  const classes = useStyles();\n  const copyLink = () => {\n    let textArea = textareaRef.current;\n    if (textArea) {\n      textArea.select();\n      document.execCommand('copy');\n      enqueueSnackbar(`Copied ${label}`, {\n        variant: 'info',\n        autoHideDuration: 2500,\n      });\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <TextField\n        inputRef={(ref) => (textareaRef.current = ref)}\n        multiline\n        autoFocus={autoFocus}\n        value={value}\n        readOnly\n        onFocus={(e) => e.currentTarget.select()}\n        className={classes.textArea}\n        fullWidth\n        helperText={helperText}\n        label={label}\n        spellCheck={false}\n      />\n      <IconButton onClick={copyLink}>\n        <CopyIcon />\n      </IconButton>\n      {qrCode ? <Qrcode value={qrCode === true ? value : qrCode} /> : null}\n    </div>\n  );\n}\n\nconst useQrCodeStyles = makeStyles((theme) => ({\n  qrcodeContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nfunction Qrcode({ value }) {\n  const [showQrcode, setShowQrcode] = React.useState(false);\n  const classes = useQrCodeStyles();\n\n  return (\n    <>\n      <IconButton onClick={() => setShowQrcode(true)}>\n        <QrcodeIcon />\n      </IconButton>\n      <Dialog open={showQrcode} onClose={() => setShowQrcode(false)}>\n        <DialogContent className={classes.qrcodeContainer}>\n          <QRCode value={value} size={256} includeMargin />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","import { Typography } from '@material-ui/core';\nimport Link from '@material-ui/core/Link';\nimport React from 'react';\nimport { useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogForm from './DialogForm';\nimport { abbreviateAddress } from '../utils/utils';\nimport CopyableDisplay from './CopyableDisplay';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  explorerLink: {\n    marginBottom: theme.spacing(2),\n  },\n  warning: {\n    marginBottom: theme.spacing(2),\n  },\n  container: {\n    minWidth: 600,\n  },\n}));\n\nexport default function TokenInfoDialog({\n  open,\n  onClose,\n  publicKey,\n  balanceInfo,\n}) {\n  let { mint, tokenName, tokenSymbol } = balanceInfo;\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const classes = useStyles();\n\n  return (\n    <DialogForm open={open} onClose={onClose}>\n      <DialogTitle>\n        {tokenName ?? abbreviateAddress(mint)}\n        {tokenSymbol ? ` (${tokenSymbol})` : null}\n      </DialogTitle>\n      <DialogContent className={classes.container}>\n        <Typography className={classes.warning}>\n          Information about {tokenName ?? abbreviateAddress(mint)}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.explorerLink}>\n          <Link\n            href={\n              `https://solscan.io/account/${publicKey.toBase58()}`\n              + urlSuffix\n            }\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            View on Solscan\n          </Link>\n        </Typography>\n        {!!mint && (\n          <CopyableDisplay\n            value={mint.toBase58()}\n            label={'Token Mint Address'}\n            autoFocus\n            helperText={\n              <>\n                This is <strong>not</strong> your deposit address\n              </>\n            }\n          />\n        )}\n        {!!tokenName && (\n          <CopyableDisplay value={tokenName} label={'Token Name'} />\n        )}\n        {!!tokenSymbol && (\n          <CopyableDisplay value={tokenSymbol} label={'Token Symbol'} />\n        )}\n      </DialogContent>\n    </DialogForm>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function TokenIcon({ mint, url, tokenName, size = 20, ...props }) {\n  const [hasError, setHasError] = useState(false);\n\n  if (!url && mint === null) {\n    url = 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png';\n  }\n\n  if (hasError || !url) {\n    return null;\n  }\n\n  return (\n    <img\n      src={url}\n      title={tokenName}\n      alt={tokenName}\n      style={{\n        width: size,\n        height: size,\n        backgroundColor: 'white',\n        borderRadius: size / 2,\n      }}\n      onError={() => setHasError(true)}\n      {...props}\n    />\n  );\n}\n","import React, { useState } from 'react';\nimport DialogForm from '../DialogForm';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { useWalletSelector } from '../../utils/wallet';\nimport { usePopularTokens } from '../../utils/tokens/names';\nimport TokenIcon from '../TokenIcon';\nimport Link from '@material-ui/core/Link';\nimport { abbreviateAddress, useIsExtensionWidth } from '../../utils/utils';\nimport FormControl from '@material-ui/core/FormControl';\nimport { useSolanaExplorerUrlSuffix } from '../../utils/connection';\nimport { MenuItem, Select } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  menuItem: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  tokenIcon: {\n    marginRight: theme.spacing(1),\n  },\n  container: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: theme.spacing(3),\n  },\n  selector: {\n    marginRight: theme.spacing(3),\n  },\n}));\n\nexport default function FtxPayDialog({ open, onClose }) {\n  const { accounts } = useWalletSelector();\n  const classes = useStyles();\n  const popularTokens = usePopularTokens();\n  const selectedAccount = accounts.find((a) => a.isSelected);\n  const [coin, setCoin] = useState('SOL');\n  const address = selectedAccount?.address?.toBase58();\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const isExtensionWidth = useIsExtensionWidth();\n\n  const onSubmit = () => {\n    const urlSearchParams = new URLSearchParams();\n    urlSearchParams.append('address', address);\n    urlSearchParams.append('coin', coin);\n    urlSearchParams.append('wallet', 'sol');\n    urlSearchParams.append('memoIsRequired', false);\n    window.open(\n      `https://ftx.com/pay/request?${urlSearchParams}`,\n      '_blank',\n      'resizable,width=450,height=780',\n    );\n  };\n\n  return (\n    <DialogForm maxWidth='xs' open={open} onClose={onClose} fullWidth>\n      <DialogTitle>\n        Deposit funds with{' '}\n        <Link target=\"_blank\" href={'https://ftx.com/pay'}>\n          FTX Pay\n        </Link>\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Send funds to your Sollet wallet from an FTX account, where you can add funds using crypto on multiple blockchains, credit cards, and more.\n        </DialogContentText>\n        <DialogContentText>\n          If you don't have an FTX account, it may take a few moments to get up.\n        </DialogContentText>\n        <div className={classes.container}>\n          <FormControl variant=\"outlined\" className={classes.selector}>\n            <Select value={coin} onChange={(e) => setCoin(e.target.value)}>\n              <MenuItem value={'SOL'}>\n                <div className={classes.menuItem}>\n                  <TokenIcon\n                    url={null}\n                    mint={null}\n                    tokenName={'SOL'}\n                    size={30}\n                    className={classes.tokenIcon}\n                  />\n                  <div>{isExtensionWidth ? 'SOL' : 'Solana SOL'}</div>\n                </div>\n              </MenuItem>\n              {popularTokens\n                .filter((tokenInfo) => tokenInfo.address && tokenInfo.symbol)\n                .map((tokenInfo) => (\n                  <MenuItem value={tokenInfo.symbol} key={tokenInfo.symbol}>\n                    <div className={classes.menuItem}>\n                      <TokenIcon\n                        url={tokenInfo.logoUri}\n                        tokenName={tokenInfo.name}\n                        size={30}\n                        className={classes.tokenIcon}\n                      />\n                      <Link\n                        target=\"_blank\"\n                        rel=\"noopener\"\n                        href={\n                          `https://solscan.io/account/${tokenInfo.address}` +\n                          urlSuffix\n                        }\n                      >\n                        {(isExtensionWidth ? '' : `${tokenInfo.name ?? abbreviateAddress(tokenInfo.address)} `) + tokenInfo.symbol}\n                      </Link>\n                    </div>\n                  </MenuItem>\n                ))}\n            </Select>\n          </FormControl>\n          <Button onClick={onSubmit} variant=\"outlined\" size=\"medium\" color=\"primary\">\n            Open FTX Pay\n          </Button>\n        </div>\n      </DialogContent>\n\n      <DialogActions>\n        <Button variant=\"outlined\" color=\"secondary\" size=\"medium\" onClick={onClose}>Close</Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n","export const showTokenInfoDialog = !!localStorage.getItem(\n  'showTokenInfoDialog',\n);\n\nexport const showSwapAddress = true;\n","import { useAsyncData } from '../fetch-loop';\n\nexport class SwapApiError extends Error {\n  constructor(msg, status) {\n    super(msg);\n    this.name = 'SwapApiError';\n    this.status = status;\n  }\n}\n\nexport async function swapApiRequest(\n  method,\n  path,\n  body,\n  { ignoreUserErrors = false } = {},\n) {\n  let headers = {};\n  let params = { headers, method };\n  if (method === 'GET') {\n    params.cache = 'no-cache';\n  } else if (body) {\n    headers['Content-Type'] = 'application/json';\n    params.body = JSON.stringify(body);\n  }\n\n  let resp = await fetch(`https://swap.sollet.io/api/${path}`, params);\n  return await handleSwapApiResponse(resp, ignoreUserErrors);\n}\n\nasync function handleSwapApiResponse(resp, ignoreUserErrors) {\n  let json = await resp.json();\n  if (!json.success) {\n    if (ignoreUserErrors && resp.status >= 400 && resp.status < 500) {\n      return null;\n    }\n    throw new SwapApiError(json.error, resp.status);\n  }\n  return json.result;\n}\n\nexport function useSwapApiGet(path, options) {\n  return useAsyncData(\n    async () => {\n      if (!path) {\n        return null;\n      }\n      return await swapApiRequest('GET', path, undefined, {\n        ignoreUserErrors: true,\n      });\n    },\n    ['swapApiGet', path],\n    options,\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport {\n  refreshWalletPublicKeys,\n  useWallet,\n  useWalletTokenAccounts,\n} from '../utils/wallet';\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\nimport { useUpdateTokenName, usePopularTokens } from '../utils/tokens/names';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport LoadingIndicator from './LoadingIndicator';\nimport { makeStyles, Tab, Tabs } from '@material-ui/core';\nimport { useSendTransaction } from '../utils/notifications';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { abbreviateAddress } from '../utils/utils';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport { useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport Link from '@material-ui/core/Link';\nimport CopyableDisplay from './CopyableDisplay';\nimport DialogForm from './DialogForm';\nimport { showSwapAddress } from '../utils/config';\nimport { swapApiRequest } from '../utils/swap/api';\nimport TokenIcon from './TokenIcon';\n\nconst feeFormat = new Intl.NumberFormat(undefined, {\n  minimumFractionDigits: 6,\n  maximumFractionDigits: 6,\n});\n\nconst useStyles = makeStyles((theme) => ({\n  tabs: {\n    marginBottom: theme.spacing(1),\n    borderBottom: `1px solid ${theme.palette.background.paper}`,\n  },\n}));\n\nexport default function AddTokenDialog({ open, onClose }) {\n  let wallet = useWallet();\n  let [tokenAccountCost] = useAsyncData(\n    wallet.tokenAccountCost,\n    wallet.tokenAccountCost,\n  );\n  let classes = useStyles();\n  let updateTokenName = useUpdateTokenName();\n  const [sendTransaction, sending] = useSendTransaction();\n\n  const [walletAccounts] = useWalletTokenAccounts();\n  const popularTokens = usePopularTokens();\n  const [tab, setTab] = useState(!!popularTokens ? 'popular' : 'manual');\n  const [mintAddress, setMintAddress] = useState('');\n  const [tokenName, setTokenName] = useState('');\n  const [tokenSymbol, setTokenSymbol] = useState('');\n  const [erc20Address, setErc20Address] = useState('');\n\n  useEffect(() => {\n    if (!popularTokens) {\n      setTab('manual');\n    }\n  }, [popularTokens]);\n\n  function onSubmit(params) {\n    if (tab === 'manual') {\n      params = { mintAddress, tokenName, tokenSymbol };\n    } else if (tab === 'erc20') {\n      params = { erc20Address };\n    }\n    sendTransaction(addToken(params), {\n      onSuccess: () => {\n        refreshWalletPublicKeys(wallet);\n        onClose();\n      },\n    });\n  }\n\n  async function addToken({\n    mintAddress,\n    tokenName,\n    tokenSymbol,\n    erc20Address,\n  }) {\n    if (erc20Address) {\n      let tokenInfo = await swapApiRequest('POST', `coins/eth/${erc20Address}`);\n      mintAddress = tokenInfo.splMint;\n      tokenName = tokenInfo.name;\n      tokenSymbol = tokenInfo.ticker;\n      if (tokenInfo.blockchain !== 'sol') {\n        tokenName = 'Wrapped ' + tokenName;\n      }\n    }\n\n    let mint = new PublicKey(mintAddress);\n    updateTokenName(mint, tokenName, tokenSymbol);\n    const resp = await wallet.createAssociatedTokenAccount(mint);\n    return resp[1];\n  }\n\n  let valid = true;\n  if (tab === 'erc20') {\n    valid = erc20Address.length === 42 && erc20Address.startsWith('0x');\n  }\n\n  return (\n    <DialogForm open={open} onClose={onClose}>\n      <DialogTitle>Add Token</DialogTitle>\n      <DialogContent>\n        {tokenAccountCost ? (\n          <DialogContentText>\n            Add a token to your wallet. This will cost{' '}\n            {feeFormat.format(tokenAccountCost / LAMPORTS_PER_SOL)} SOL.\n          </DialogContentText>\n        ) : (\n          <LoadingIndicator />\n        )}\n        {!!popularTokens && (\n          <Tabs\n            value={tab}\n            textColor=\"primary\"\n            indicatorColor=\"primary\"\n            className={classes.tabs}\n            onChange={(e, value) => setTab(value)}\n          >\n            <Tab label=\"Popular Tokens\" value=\"popular\" />\n            {showSwapAddress ? <Tab label=\"ERC20 Token\" value=\"erc20\" /> : null}\n            <Tab label=\"Manual Input\" value=\"manual\" />\n          </Tabs>\n        )}\n        {tab === 'manual' || !popularTokens ? (\n          <React.Fragment>\n            <TextField\n              label=\"Token Mint Address\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={mintAddress}\n              onChange={(e) => setMintAddress(e.target.value)}\n              autoFocus\n              disabled={sending}\n            />\n            <TextField\n              label=\"Token Name\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={tokenName}\n              onChange={(e) => setTokenName(e.target.value)}\n              disabled={sending}\n            />\n            <TextField\n              label=\"Token Symbol\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={tokenSymbol}\n              onChange={(e) => setTokenSymbol(e.target.value)}\n              disabled={sending}\n            />\n          </React.Fragment>\n        ) : tab === 'popular' ? (\n          <List disablePadding>\n            {popularTokens.filter(tokenInfo => tokenInfo.address).map((tokenInfo) => (\n              <TokenListItem\n                key={tokenInfo.address}\n                tokenInfo={tokenInfo}\n                existingAccount={(walletAccounts || []).find(\n                  (account) =>\n                    account.parsed.mint.toBase58() === tokenInfo.address,\n                )}\n                onSubmit={onSubmit}\n                disabled={sending}\n              />\n            ))}\n          </List>\n        ) : tab === 'erc20' ? (\n          <>\n            <TextField\n              label=\"ERC20 Contract Address\"\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={erc20Address}\n              onChange={(e) => setErc20Address(e.target.value.trim())}\n              autoFocus\n              disabled={sending}\n            />\n            {erc20Address && valid ? (\n              <Link\n                href={`https://etherscan.io/token/${erc20Address}`}\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                View on Etherscan\n              </Link>\n            ) : null}\n          </>\n        ) : null}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        {tab !== 'popular' && (\n          <Button\n            type=\"submit\"\n            color=\"primary\"\n            disabled={sending || !valid}\n            onClick={() => onSubmit({ tokenName, tokenSymbol, mintAddress })}\n          >\n            Add\n          </Button>\n        )}\n      </DialogActions>\n    </DialogForm>\n  );\n}\n\nfunction TokenListItem({ tokenInfo, onSubmit, disabled, existingAccount }) {\n  const [open, setOpen] = useState(false);\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const alreadyExists = !!existingAccount;\n\n  return (\n    <React.Fragment>\n      <div style={{ display: 'flex' }} key={tokenInfo.name}>\n        <ListItem button onClick={() => setOpen((open) => !open)}>\n          <ListItemIcon>\n            <TokenIcon\n              url={tokenInfo.logoUri}\n              tokenName={tokenInfo.name}\n              size={20}\n            />\n          </ListItemIcon>\n          <ListItemText\n            primary={\n              <Link\n                target=\"_blank\"\n                rel=\"noopener\"\n                href={\n                  `https://solscan.io/account/${tokenInfo.address}` +\n                  urlSuffix\n                }\n              >\n                {tokenInfo.name ?? abbreviateAddress(tokenInfo.address)}\n                {tokenInfo.symbol ? ` (${tokenInfo.symbol})` : null}\n              </Link>\n            }\n          />\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </ListItem>\n        <Button\n          type=\"submit\"\n          color=\"primary\"\n          disabled={disabled || alreadyExists}\n          onClick={() =>\n            onSubmit({\n              tokenName: tokenInfo.name,\n              tokenSymbol: tokenInfo.symbol,\n              mintAddress: tokenInfo.address,\n            })\n          }\n        >\n          {alreadyExists ? 'Added' : 'Add'}\n        </Button>\n      </div>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <CopyableDisplay\n          value={tokenInfo.address}\n          label={`${tokenInfo.symbol} Mint Address`}\n        />\n      </Collapse>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport Web3 from 'web3';\nimport ERC20_ABI from './erc20-abi.json';\nimport SWAP_ABI from './swap-abi.json';\nimport Button from '@material-ui/core/Button';\nimport { useCallAsync } from '../notifications';\nimport { isExtension } from '../utils';\n\nconst web3 = new Web3(window.ethereum);\n// Change to use estimated gas limit\nconst SUGGESTED_GAS_LIMIT = 200000;\n\nexport function useEthAccount() {\n  const [account, setAccount] = useState(null);\n\n  useEffect(() => {\n    if (!window.ethereum) {\n      return;\n    }\n    const onChange = (accounts) =>\n      setAccount(accounts.length > 0 ? accounts[0] : null);\n    window.ethereum.request({ method: 'eth_accounts' }).then(onChange);\n    window.ethereum.on('accountsChanged', onChange);\n    return () => window.ethereum.removeListener('accountsChanged', onChange);\n  }, []);\n\n  return account;\n}\n\nexport async function getErc20Balance(account, erc20Address) {\n  if (!erc20Address) {\n    return parseInt(await web3.eth.getBalance(account)) / 1e18;\n  }\n\n  const erc20 = new web3.eth.Contract(ERC20_ABI, erc20Address);\n  const [value, decimals] = await Promise.all([\n    erc20.methods.balanceOf(account).call(),\n    erc20.methods.decimals().call(),\n  ]);\n  return parseInt(value, 10) / 10 ** parseInt(decimals, 10);\n}\n\nexport async function estimateErc20SwapFees({\n  erc20Address,\n  swapAddress,\n  ethAccount,\n}) {\n  if (!erc20Address) {\n    return estimateEthSwapFees({ swapAddress });\n  }\n\n  const erc20 = new web3.eth.Contract(ERC20_ABI, erc20Address);\n  const decimals = parseInt(await erc20.methods.decimals().call(), 10);\n\n  const approveAmount = addDecimals('100000000', decimals);\n\n  let approveEstimatedGas = await erc20.methods\n    .approve(swapAddress, approveAmount)\n    .estimateGas({ from: ethAccount });\n  // Account for Metamask over-estimation\n  approveEstimatedGas *= 1.5;\n\n  // Use estimated gas limit for now\n  const swapEstimatedGas = SUGGESTED_GAS_LIMIT;\n\n  const gasPrice = (await web3.eth.getGasPrice()) * 1e-18;\n\n  return [approveEstimatedGas * gasPrice, swapEstimatedGas * gasPrice];\n}\n\nexport async function estimateEthSwapFees() {\n  const estimatedGas = SUGGESTED_GAS_LIMIT;\n\n  const gasPrice = (await web3.eth.getGasPrice()) * 1e-18;\n\n  return estimatedGas * gasPrice;\n}\n\nexport async function swapErc20ToSpl({\n  ethAccount,\n  erc20Address,\n  swapAddress,\n  destination,\n  amount, // string\n  onStatusChange,\n}) {\n  if (!erc20Address) {\n    return swapEthToSpl({\n      ethAccount,\n      swapAddress,\n      destination,\n      amount,\n      onStatusChange,\n    });\n  }\n\n  const erc20 = new web3.eth.Contract(ERC20_ABI, erc20Address);\n  const swap = new web3.eth.Contract(SWAP_ABI, swapAddress);\n  const decimals = parseInt(await erc20.methods.decimals().call(), 10);\n\n  const encodedAmount = addDecimals(amount, decimals);\n\n  const approveTx = erc20.methods\n    .approve(swapAddress, encodedAmount)\n    .send({ from: ethAccount });\n  await waitForTxid(approveTx);\n\n  onStatusChange({ step: 1 });\n\n  const swapTx = swap.methods\n    .swapErc20(erc20Address, destination, encodedAmount)\n    .send({ from: ethAccount, gasLimit: SUGGESTED_GAS_LIMIT });\n  const swapTxid = await waitForTxid(swapTx);\n\n  onStatusChange({ step: 2, txid: swapTxid, confirms: 0 });\n\n  await Promise.all([\n    approveTx,\n    swapTx,\n    waitForConfirms(swapTx, onStatusChange),\n  ]);\n\n  onStatusChange({ step: 3 });\n}\n\nexport async function swapEthToSpl({\n  ethAccount,\n  swapAddress,\n  destination,\n  amount,\n  onStatusChange,\n}) {\n  const swap = new web3.eth.Contract(SWAP_ABI, swapAddress);\n\n  const encodedAmount = addDecimals(amount, 18);\n  const swapTx = swap.methods\n    .swapEth(destination)\n    .send({ from: ethAccount, value: encodedAmount });\n  const swapTxid = await waitForTxid(swapTx);\n\n  onStatusChange({ step: 2, txid: swapTxid, confirms: 0 });\n\n  await Promise.all([swapTx, waitForConfirms(swapTx, onStatusChange)]);\n\n  onStatusChange({ step: 3 });\n}\n\nfunction addDecimals(str, decimals) {\n  if (!/^\\d*\\.?\\d*$/.test(str)) {\n    throw new Error('Invalid number');\n  }\n  if (!str.includes('.')) {\n    str += '.';\n  }\n  let [intStr, fractionStr] = str.split('.');\n  if (fractionStr.length > decimals) {\n    fractionStr = fractionStr.slice(0, decimals);\n  } else {\n    fractionStr += '0'.repeat(decimals - fractionStr.length);\n  }\n  return (intStr + fractionStr).replace(/^0+/, '') || '0';\n}\n\nconst pendingNonces = new Set();\n\nexport async function withdrawEth(from, withdrawal, callAsync) {\n  const { params, signature } = withdrawal.txData;\n  const swap = new web3.eth.Contract(SWAP_ABI, params[1]);\n  let method, nonce;\n  if (params[0] === 'withdrawErc20') {\n    method = swap.methods.withdrawErc20(\n      params[2],\n      params[3],\n      params[4],\n      params[5],\n      signature,\n    );\n    nonce = params[5];\n  } else if (params[0] === 'withdrawEth') {\n    method = swap.methods.withdrawEth(\n      params[2],\n      params[3],\n      params[4],\n      signature,\n    );\n    nonce = params[4];\n  } else {\n    return;\n  }\n  if (pendingNonces.has(nonce)) {\n    return;\n  }\n  try {\n    await method.estimateGas();\n  } catch (e) {\n    return;\n  }\n  pendingNonces.add(nonce);\n  await callAsync(method.send({ from, gasLimit: SUGGESTED_GAS_LIMIT }), {\n    progressMessage: `Completing ${withdrawal.coin.ticker} transfer...`,\n  });\n  pendingNonces.delete(nonce);\n}\n\nfunction waitForTxid(tx) {\n  return new Promise((resolve, reject) => {\n    tx.once('transactionHash', resolve).catch(reject);\n  });\n}\n\nfunction waitForConfirms(tx, onStatusChange) {\n  return new Promise((resolve, reject) => {\n    let resolved = false;\n    tx.on('confirmation', (confirms, receipt) => {\n      if (!resolved) {\n        onStatusChange({ confirms: confirms + 1 });\n        if (!receipt.status) {\n          reject('Transaction failed');\n          resolved = true;\n        } else if (confirms >= 11) {\n          resolve();\n          resolved = true;\n        }\n      }\n    });\n  });\n}\n\nexport function ConnectToMetamaskButton() {\n  const callAsync = useCallAsync();\n\n  if (!window.ethereum) {\n    return (\n      <Button\n        color=\"primary\"\n        variant=\"outlined\"\n        component=\"a\"\n        href={isExtension ? 'https://sollet.io' : 'https://metamask.io/'}\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        {isExtension ? 'Open sollet.io' : 'Connect to MetaMask'}\n      </Button>\n    );\n  }\n\n  function connect() {\n    callAsync(\n      window.ethereum.request({\n        method: 'eth_requestAccounts',\n      }),\n      {\n        progressMessage: 'Connecting to MetaMask...',\n        successMessage: 'Connected to MetaMask',\n      },\n    );\n  }\n\n  return (\n    <Button color=\"primary\" variant=\"outlined\" onClick={connect}>\n      Connect to MetaMask\n    </Button>\n  );\n}\n","import { MARKETS } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport { MAINNET_URL } from './connection';\n\ninterface Markets {\n  [coin: string]: {\n    publicKey: PublicKey;\n    name: string;\n    deprecated?: boolean;\n  };\n}\n\nexport const serumMarkets = (() => {\n  const m: Markets = {};\n  MARKETS.forEach((market) => {\n    const coin = market.name.split('/')[0];\n    if (m[coin]) {\n      // Only override a market if it's not deprecated\t.\n      if (!m.deprecated) {\n        m[coin] = {\n          publicKey: market.address,\n          name: market.name.split('/').join(''),\n        };\n      }\n    } else {\n      m[coin] = {\n        publicKey: market.address,\n        name: market.name.split('/').join(''),\n      };\n    }\n  });\n  return m;\n})();\n\n// Create a cached API wrapper to avoid rate limits.\nclass PriceStore {\n  cache: {};\n\n  constructor() {\n    this.cache = {};\n  }\n\n  async getPrice(connection, marketName): Promise<number | undefined> {\n    return new Promise((resolve, reject) => {\n      if (connection._rpcEndpoint !== MAINNET_URL) {\n        resolve(undefined);\n        return;\n      }\n      if (this.cache[marketName] === undefined) {\n        fetch(`https://serum-api.bonfida.com/orderbooks/${marketName}`).then(\n          (resp) => {\n            resp.json().then((resp) => {\n              if (resp.data.asks === null || resp.data.bids === null) {\n                resolve(undefined);\n              } else if (\n                resp.data.asks.length === 0 &&\n                resp.data.bids.length === 0\n              ) {\n                resolve(undefined);\n              } else if (resp.data.asks.length === 0) {\n                resolve(resp.data.bids[0].price);\n              } else if (resp.data.bids.length === 0) {\n                resolve(resp.data.asks[0].price);\n              } else {\n                const mid =\n                  (resp.data.asks[0].price + resp.data.bids[0].price) / 2.0;\n                this.cache[marketName] = mid;\n                resolve(this.cache[marketName]);\n              }\n            });\n          },\n        );\n      } else {\n        return resolve(this.cache[marketName]);\n      }\n    });\n  }\n}\n\nexport const priceStore = new PriceStore();\n","import { PublicKey, Connection } from '@solana/web3.js';\nimport {\n  getTwitterRegistry,\n  getHashedName,\n  getNameAccountKey,\n  NameRegistryState,\n  getFilteredProgramAccounts,\n  NAME_PROGRAM_ID,\n  getDNSRecordAddress,\n} from '@bonfida/spl-name-service';\nimport { useConnection } from '../connection';\nimport { useWallet } from '../wallet';\nimport BN from 'bn.js';\nimport { useAsyncData } from '../fetch-loop';\nimport tuple from 'immutable-tuple';\n\n// Address of the SOL TLD\nexport const SOL_TLD_AUTHORITY = new PublicKey(\n  '58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx',\n);\n\nexport const PROGRAM_ID = new PublicKey(\n  'jCebN34bUfdeUYJT13J1yG16XWQpt5PDx6Mse9GUqhR',\n);\n\nexport const resolveTwitterHandle = async (\n  connection: Connection,\n  twitterHandle: string,\n): Promise<string | undefined> => {\n  try {\n    const registry = await getTwitterRegistry(connection, twitterHandle);\n    return registry.owner.toBase58();\n  } catch (err) {\n    console.warn(`err`);\n    return undefined;\n  }\n};\n\nexport const getNameKey = async (name: string, parent = SOL_TLD_AUTHORITY) => {\n  const hashedDomainName = await getHashedName(name);\n  const key = await getNameAccountKey(hashedDomainName, undefined, parent);\n  return key;\n};\n\nexport const resolveDomainName = async (\n  connection: Connection,\n  domainName: string,\n  parent?: PublicKey,\n): Promise<string | undefined> => {\n  const key = parent\n    ? await getDNSRecordAddress(parent, domainName)\n    : await getNameKey(domainName);\n  try {\n    const registry = await NameRegistryState.retrieve(connection, key);\n    return registry.owner.toBase58();\n  } catch (err) {\n    console.warn(err);\n    return undefined;\n  }\n};\n\nexport async function findOwnedNameAccountsForUser(\n  connection: Connection,\n  userAccount: PublicKey,\n): Promise<PublicKey[]> {\n  const filters = [\n    {\n      memcmp: {\n        offset: 32,\n        bytes: userAccount.toBase58(),\n      },\n    },\n  ];\n  const accounts = await getFilteredProgramAccounts(\n    connection,\n    NAME_PROGRAM_ID,\n    filters,\n  );\n  return accounts.map((a) => a.publicKey);\n}\n\nexport async function performReverseLookup(\n  connection: Connection,\n  nameAccount: PublicKey,\n): Promise<string> {\n  let [centralState] = await PublicKey.findProgramAddress(\n    [PROGRAM_ID.toBuffer()],\n    PROGRAM_ID,\n  );\n  let hashedReverseLookup = await getHashedName(nameAccount.toBase58());\n  let reverseLookupAccount = await getNameAccountKey(\n    hashedReverseLookup,\n    centralState,\n  );\n\n  let name = await NameRegistryState.retrieve(connection, reverseLookupAccount);\n  if (!name.data) {\n    throw new Error('Could not retrieve name data');\n  }\n  let nameLength = new BN(name.data.slice(0, 4), 'le').toNumber();\n  return name.data.slice(4, 4 + nameLength).toString();\n}\n\nexport const useUserDomains = () => {\n  const wallet = useWallet();\n  const connection = useConnection();\n  const fn = async () => {\n    const domains = await findOwnedNameAccountsForUser(\n      connection,\n      wallet.publicKey,\n    );\n    let names: { name: string; nameKey: PublicKey }[] = [];\n    const fn = async (d) => {\n      try {\n        const name = await performReverseLookup(connection, d);\n        names.push({ name: name, nameKey: d });\n      } catch (err) {\n        console.log(`Passing account ${d.toBase58()} - err ${err}`);\n      }\n    };\n    const promises = domains.map((d) => fn(d));\n    await Promise.allSettled(promises);\n    return names.sort((a, b) => {\n      return a.name.localeCompare(b.name);\n    });\n  };\n  return useAsyncData(\n    fn,\n    tuple('useUserDomain', wallet?.publicKey?.toBase58()),\n  );\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport DialogForm from './DialogForm';\nimport { useWallet, useWalletAddressForMint } from '../utils/wallet';\nimport { PublicKey } from '@solana/web3.js';\nimport { abbreviateAddress } from '../utils/utils';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { useCallAsync, useSendTransaction } from '../utils/notifications';\nimport { swapApiRequest, useSwapApiGet } from '../utils/swap/api';\nimport { showSwapAddress } from '../utils/config';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport {\n  ConnectToMetamaskButton,\n  getErc20Balance,\n  useEthAccount,\n  withdrawEth,\n} from '../utils/swap/eth';\nimport { useConnection, useIsProdNetwork } from '../utils/connection';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {\n  TOKEN_PROGRAM_ID,\n  WRAPPED_SOL_MINT,\n} from '../utils/tokens/instructions';\nimport { parseTokenAccountData } from '../utils/tokens/data';\nimport { Switch, Tooltip } from '@material-ui/core';\nimport { EthFeeEstimate } from './EthFeeEstimate';\nimport {\n  resolveDomainName,\n  resolveTwitterHandle,\n  getNameKey,\n} from '../utils/name-service';\n\nconst WUSDC_MINT = new PublicKey(\n  'BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW',\n);\nconst USDC_MINT = new PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');\n\nconst WUSDT_MINT = new PublicKey(\n  'BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4',\n);\n\nconst USDT_MINT = new PublicKey('Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB');\nconst DISABLED_ERC20_MINTS = new Set([\n  'kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6',\n  'ABE7D8RU1eHfCJWzHYZZeymeE8k9nPPXfqge2NQYyKoL',\n]);\n\nexport default function SendDialog({ open, onClose, publicKey, balanceInfo }) {\n  const isProdNetwork = useIsProdNetwork();\n  const [tab, setTab] = useState('spl');\n  const onSubmitRef = useRef();\n\n  let [swapCoinInfo] = useSwapApiGet(\n    showSwapAddress && balanceInfo.mint && isProdNetwork\n      ? `coins/sol/${balanceInfo.mint.toBase58()}`\n      : null,\n  );\n\n  // SwapInfos to ignore.\n  if (\n    swapCoinInfo &&\n    swapCoinInfo.erc20Contract === '0x2b2e04bf86978b45bb2edf54aca876973bdd43c0'\n  ) {\n    swapCoinInfo = null;\n  }\n\n  const ethAccount = useEthAccount();\n  const { mint, tokenName, tokenSymbol } = balanceInfo;\n\n  const getTabs = (mint) => {\n    if (mint?.equals(WUSDC_MINT)) {\n      return [\n        <Tab label=\"SPL WUSDC\" key=\"spl\" value=\"spl\" />,\n        <Tab label=\"SPL USDC\" key=\"wusdcToSplUsdc\" value=\"wusdcToSplUsdc\" />,\n        <Tab label=\"ERC20 USDC\" key=\"swap\" value=\"swap\" />,\n      ];\n    } else if (mint?.equals(WUSDT_MINT)) {\n      return [\n        <Tab label=\"SPL WUSDT\" key=\"spl\" value=\"spl\" />,\n        <Tab label=\"SPL USDT\" key=\"wusdtToSplUsdt\" value=\"wusdtToSplUsdt\" />,\n        <Tab label=\"ERC20 USDT\" key=\"swap\" value=\"swap\" />,\n      ];\n    } else if (\n      localStorage.getItem('sollet-private') &&\n      mint?.equals(USDC_MINT)\n    ) {\n      return [\n        <Tab label=\"SPL USDC\" key=\"spl\" value=\"spl\" />,\n        <Tab label=\"SPL WUSDC\" key=\"usdcToSplWUsdc\" value=\"usdcToSplWUsdc\" />,\n        <Tab label=\"ERC20 USDC\" key=\"swap\" value=\"swap\" />,\n      ];\n    } else {\n      const erc20Tab = (\n        <Tab\n          label={`${swapCoinInfo.erc20Contract ? 'ERC20' : 'Native'} ${\n            swapCoinInfo.ticker\n          }`}\n          key=\"swap\"\n          value=\"swap\"\n        />\n      );\n      const tabs = [\n        <Tab label={`SPL ${swapCoinInfo.ticker}`} key=\"spl\" value=\"spl\" />,\n      ];\n      if (\n        !DISABLED_ERC20_MINTS.has(mint.toString()) ||\n        localStorage.getItem('sollet-private')\n      ) {\n        tabs.push(erc20Tab);\n      }\n      return tabs;\n    }\n  };\n\n  return (\n    <>\n      <DialogForm\n        open={open}\n        onClose={onClose}\n        onSubmit={() => onSubmitRef.current()}\n        fullWidth\n      >\n        <DialogTitle>\n          Send {tokenName ?? abbreviateAddress(mint)}\n          {tokenSymbol ? ` (${tokenSymbol})` : null}\n          {ethAccount && (\n            <div>\n              <Typography color=\"textSecondary\" style={{ fontSize: '14px' }}>\n                Metamask connected: {ethAccount}\n              </Typography>\n            </div>\n          )}\n        </DialogTitle>\n        {swapCoinInfo ? (\n          <Tabs\n            value={tab}\n            variant=\"fullWidth\"\n            onChange={(e, value) => setTab(value)}\n            textColor=\"primary\"\n            indicatorColor=\"primary\"\n          >\n            {getTabs(mint)}\n          </Tabs>\n        ) : null}\n        {tab === 'spl' ? (\n          <SendSplDialog\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            onSubmitRef={onSubmitRef}\n          />\n        ) : tab === 'wusdcToSplUsdc' ? (\n          <SendSwapDialog\n            key={tab}\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            swapCoinInfo={swapCoinInfo}\n            onSubmitRef={onSubmitRef}\n            wusdcToSplUsdc\n          />\n        ) : tab === 'wusdtToSplUsdt' ? (\n          <SendSwapDialog\n            key={tab}\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            swapCoinInfo={swapCoinInfo}\n            onSubmitRef={onSubmitRef}\n            wusdtToSplUsdt\n          />\n        ) : tab === 'usdcToSplWUsdc' ? (\n          <SendSwapDialog\n            key={tab}\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            swapCoinInfo={swapCoinInfo}\n            onSubmitRef={onSubmitRef}\n            usdcToSplWUsdc\n          />\n        ) : (\n          <SendSwapDialog\n            key={tab}\n            onClose={onClose}\n            publicKey={publicKey}\n            balanceInfo={balanceInfo}\n            swapCoinInfo={swapCoinInfo}\n            ethAccount={ethAccount}\n            onSubmitRef={onSubmitRef}\n          />\n        )}\n      </DialogForm>\n      {ethAccount &&\n      (swapCoinInfo?.blockchain === 'eth' || swapCoinInfo?.erc20Contract) ? (\n        <EthWithdrawalCompleter ethAccount={ethAccount} publicKey={publicKey} />\n      ) : null}\n    </>\n  );\n}\n\nfunction SendSplDialog({ onClose, publicKey, balanceInfo, onSubmitRef }) {\n  const defaultAddressHelperText =\n    !balanceInfo.mint || balanceInfo.mint.equals(WRAPPED_SOL_MINT)\n      ? 'Enter Solana Address'\n      : 'Enter SPL token or Solana address';\n  const wallet = useWallet();\n  const [sendTransaction, sending] = useSendTransaction();\n  const [addressHelperText, setAddressHelperText] = useState(\n    defaultAddressHelperText,\n  );\n  const [passValidation, setPassValidation] = useState();\n  const [overrideDestinationCheck, setOverrideDestinationCheck] = useState(\n    false,\n  );\n  const [shouldShowOverride, setShouldShowOverride] = useState();\n  let {\n    fields,\n    destinationAddress,\n    transferAmountString,\n    validAmount,\n  } = useForm(balanceInfo, addressHelperText, passValidation);\n  const { decimals, mint } = balanceInfo;\n  const mintString = mint && mint.toBase58();\n  const [isDomainName, setIsDomainName] = useState(false);\n  const [domainOwner, setDomainOwner] = useState();\n\n  useEffect(() => {\n    (async () => {\n      if (destinationAddress.startsWith('@')) {\n        const twitterOwner = await resolveTwitterHandle(\n          wallet.connection,\n          destinationAddress.slice(1),\n        );\n        if (!twitterOwner) {\n          setAddressHelperText(`This Twitter handle is not registered`);\n          setPassValidation(undefined);\n          setShouldShowOverride(undefined);\n          return;\n        }\n        setIsDomainName(true);\n        setDomainOwner(twitterOwner);\n      }\n      if (destinationAddress.endsWith('.sol')) {\n        const name = destinationAddress.slice(0, -4);\n        const hasSub = name.split('.').length === 2;\n\n        let domainOwner;\n\n        if (hasSub) {\n          const sub = name.split('.')[0];\n          const parentKey = await getNameKey(name.split('.')[1]);\n          domainOwner = await resolveDomainName(\n            wallet.connection,\n            sub,\n            parentKey,\n          );\n        } else {\n          domainOwner = await resolveDomainName(wallet.connection, name);\n        }\n\n        if (!domainOwner) {\n          setAddressHelperText(\n            `This ${hasSub ? 'subdomain' : 'domain'} name is not registered`,\n          );\n          setPassValidation(undefined);\n          setShouldShowOverride(undefined);\n          return;\n        }\n        setIsDomainName(true);\n        setDomainOwner(domainOwner);\n      }\n      if (!destinationAddress) {\n        setAddressHelperText(defaultAddressHelperText);\n        setPassValidation(undefined);\n        setShouldShowOverride(undefined);\n        return;\n      }\n      try {\n        const destinationAccountInfo = await wallet.connection.getAccountInfo(\n          new PublicKey(isDomainName ? domainOwner : destinationAddress),\n        );\n        setShouldShowOverride(false);\n\n        if (destinationAccountInfo.owner.equals(TOKEN_PROGRAM_ID)) {\n          const accountInfo = parseTokenAccountData(\n            destinationAccountInfo.data,\n          );\n          if (accountInfo.mint.toBase58() === mintString) {\n            setPassValidation(true);\n            setAddressHelperText('Address is a valid SPL token address');\n          } else {\n            setPassValidation(false);\n            setAddressHelperText('Destination address mint does not match');\n          }\n        } else {\n          setPassValidation(true);\n          setAddressHelperText(\n            `Destination is a Solana address: ${\n              isDomainName ? domainOwner : destinationAddress\n            }`,\n          );\n        }\n      } catch (e) {\n        console.log(`Received error validating address ${e}`);\n        setAddressHelperText(defaultAddressHelperText);\n        setShouldShowOverride(true);\n        setPassValidation(undefined);\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [destinationAddress, wallet, mintString, isDomainName, domainOwner]);\n  useEffect(() => {\n    return () => {\n      setOverrideDestinationCheck(false);\n    };\n  }, [setOverrideDestinationCheck]);\n  async function makeTransaction() {\n    let amount = Math.round(parseFloat(transferAmountString) * 10 ** decimals);\n    if (!amount || amount <= 0) {\n      throw new Error('Invalid amount');\n    }\n    return wallet.transferToken(\n      publicKey,\n      new PublicKey(isDomainName ? domainOwner : destinationAddress),\n      amount,\n      balanceInfo.mint,\n      decimals,\n      null,\n      overrideDestinationCheck,\n    );\n  }\n\n  const disabled = shouldShowOverride\n    ? !overrideDestinationCheck || sending || !validAmount\n    : sending || !validAmount;\n\n  async function onSubmit() {\n    return sendTransaction(makeTransaction(), { onSuccess: onClose });\n  }\n  onSubmitRef.current = onSubmit;\n  return (\n    <>\n      <DialogContent>{fields}</DialogContent>\n      <DialogActions>\n        {shouldShowOverride && (\n          <div\n            style={{\n              'align-items': 'center',\n              display: 'flex',\n              'text-align': 'left',\n            }}\n          >\n            <b>This address has no funds. Are you sure it's correct?</b>\n            <Switch\n              checked={overrideDestinationCheck}\n              onChange={(e) => setOverrideDestinationCheck(e.target.checked)}\n              color=\"primary\"\n            />\n          </div>\n        )}\n        <Button onClick={onClose}>Cancel</Button>\n        <Button type=\"submit\" color=\"primary\" disabled={disabled}>\n          Send\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction SendSwapDialog({\n  onClose,\n  publicKey,\n  balanceInfo,\n  swapCoinInfo,\n  ethAccount,\n  wusdcToSplUsdc = false,\n  wusdtToSplUsdt = false,\n  usdcToSplWUsdc = false,\n  onSubmitRef,\n}) {\n  const wallet = useWallet();\n  const [sendTransaction, sending] = useSendTransaction();\n  const [signature, setSignature] = useState(null);\n  const {\n    fields,\n    destinationAddress,\n    transferAmountString,\n    setDestinationAddress,\n    validAmount,\n  } = useForm(balanceInfo);\n\n  const { tokenName, decimals, mint } = balanceInfo;\n  const blockchain =\n    wusdcToSplUsdc || wusdtToSplUsdt || usdcToSplWUsdc\n      ? 'sol'\n      : swapCoinInfo.blockchain === 'sol'\n      ? 'eth'\n      : swapCoinInfo.blockchain;\n  const needMetamask = blockchain === 'eth';\n\n  const [ethBalance] = useAsyncData(\n    () => getErc20Balance(ethAccount),\n    'ethBalance',\n    {\n      refreshInterval: 2000,\n    },\n  );\n  const ethFeeData = useSwapApiGet(\n    blockchain === 'eth' &&\n      `fees/eth/${ethAccount}` +\n        (swapCoinInfo.erc20Contract ? '/' + swapCoinInfo.erc20Contract : ''),\n    { refreshInterval: 2000 },\n  );\n  const [ethFeeEstimate] = ethFeeData;\n  const insufficientEthBalance =\n    typeof ethBalance === 'number' &&\n    typeof ethFeeEstimate === 'number' &&\n    ethBalance < ethFeeEstimate;\n\n  useEffect(() => {\n    if (blockchain === 'eth' && ethAccount) {\n      setDestinationAddress(ethAccount);\n    }\n  }, [blockchain, ethAccount, setDestinationAddress]);\n\n  let splUsdcWalletAddress = useWalletAddressForMint(\n    wusdcToSplUsdc ? USDC_MINT : null,\n  );\n  let splUsdtWalletAddress = useWalletAddressForMint(\n    wusdtToSplUsdt ? USDT_MINT : null,\n  );\n  let splWUsdcWalletAddress = useWalletAddressForMint(\n    usdcToSplWUsdc ? WUSDC_MINT : null,\n  );\n  useEffect(() => {\n    if (wusdcToSplUsdc && splUsdcWalletAddress) {\n      setDestinationAddress(splUsdcWalletAddress);\n    } else if (wusdtToSplUsdt && splUsdtWalletAddress) {\n      setDestinationAddress(splUsdtWalletAddress);\n    } else if (usdcToSplWUsdc && splWUsdcWalletAddress) {\n      setDestinationAddress(splWUsdcWalletAddress);\n    }\n  }, [\n    setDestinationAddress,\n    wusdcToSplUsdc,\n    splUsdcWalletAddress,\n    wusdtToSplUsdt,\n    splUsdtWalletAddress,\n    usdcToSplWUsdc,\n    splWUsdcWalletAddress,\n  ]);\n\n  async function makeTransaction() {\n    let amount = Math.round(parseFloat(transferAmountString) * 10 ** decimals);\n    if (!amount || amount <= 0) {\n      throw new Error('Invalid amount');\n    }\n    const params = {\n      blockchain,\n      address: destinationAddress,\n      size: amount / 10 ** decimals,\n    };\n    if (blockchain === 'sol') {\n      params.coin = swapCoinInfo.splMint;\n    } else if (blockchain === 'eth') {\n      params.coin = swapCoinInfo.erc20Contract;\n    }\n    if (mint?.equals(WUSDC_MINT)) {\n      params.wusdcToUsdc = true;\n    } else if (mint?.equals(USDC_MINT)) {\n      if (usdcToSplWUsdc) {\n        params.usdcToWUsdc = true;\n        params.coin = WUSDC_MINT.toString();\n      }\n    } else if (mint?.equals(WUSDT_MINT)) {\n      params.wusdtToUsdt = true;\n    }\n    const swapInfo = await swapApiRequest('POST', 'swap_to', params);\n    if (swapInfo.blockchain !== 'sol') {\n      throw new Error('Unexpected blockchain');\n    }\n    return wallet.transferToken(\n      publicKey,\n      new PublicKey(swapInfo.address),\n      amount,\n      balanceInfo.mint,\n      decimals,\n      swapInfo.memo,\n    );\n  }\n\n  async function onSubmit() {\n    return sendTransaction(makeTransaction(), { onSuccess: setSignature });\n  }\n  onSubmitRef.current = onSubmit;\n\n  if (signature) {\n    return (\n      <SendSwapProgress\n        key={signature}\n        publicKey={publicKey}\n        signature={signature}\n        blockchain={blockchain}\n        onClose={onClose}\n      />\n    );\n  }\n  const bitcoinDisable =\n    blockchain === 'btc' ? parseFloat(transferAmountString) < 0.001 : false;\n  let sendButton = (\n    <Button\n      type=\"submit\"\n      color=\"primary\"\n      disabled={\n        sending ||\n        (needMetamask && !ethAccount) ||\n        !validAmount ||\n        insufficientEthBalance ||\n        bitcoinDisable\n      }\n    >\n      Send\n    </Button>\n  );\n\n  if (insufficientEthBalance) {\n    sendButton = (\n      <Tooltip\n        title=\"Insufficient ETH for withdrawal transaction fee\"\n        placement=\"top\"\n      >\n        <span>{sendButton}</span>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <DialogContent style={{ paddingTop: 16 }}>\n        <DialogContentText>\n          SPL {tokenName} can be converted to{' '}\n          {blockchain === 'eth' && swapCoinInfo.erc20Contract\n            ? 'ERC20'\n            : blockchain === 'sol' && swapCoinInfo.splMint\n            ? 'SPL'\n            : 'native'}{' '}\n          {swapCoinInfo.ticker}\n          {needMetamask ? ' via MetaMask' : null}.\n        </DialogContentText>\n        {blockchain === 'eth' && (\n          <DialogContentText>\n            Estimated withdrawal transaction fee:\n            <EthFeeEstimate\n              ethFeeData={ethFeeData}\n              insufficientEthBalance={insufficientEthBalance}\n            />\n          </DialogContentText>\n        )}\n        {needMetamask && !ethAccount ? <ConnectToMetamaskButton /> : fields}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        {sendButton}\n      </DialogActions>\n    </>\n  );\n}\n\nfunction SendSwapProgress({ publicKey, signature, onClose, blockchain }) {\n  const connection = useConnection();\n  const [swaps] = useSwapApiGet(`swaps_from/sol/${publicKey.toBase58()}`, {\n    refreshInterval: 1000,\n  });\n  const [confirms] = useAsyncData(\n    async () => {\n      const { value } = await connection.getSignatureStatus(signature);\n      return value?.confirmations;\n    },\n    [connection.getSignatureStatus, signature],\n    { refreshInterval: 2000 },\n  );\n\n  let step = 1;\n  let ethTxid = null;\n  for (let swap of swaps || []) {\n    const { deposit, withdrawal } = swap;\n    if (deposit.txid === signature) {\n      if (withdrawal.txid?.startsWith('0x')) {\n        step = 3;\n        ethTxid = withdrawal.txid;\n      } else if (withdrawal.txid && blockchain !== 'eth') {\n        step = 3;\n      } else {\n        step = 2;\n      }\n    }\n  }\n\n  return (\n    <>\n      <DialogContent>\n        <Stepper activeStep={step}>\n          <Step>\n            <StepLabel>Send Request</StepLabel>\n          </Step>\n          <Step>\n            <StepLabel>Wait for Confirmations</StepLabel>\n          </Step>\n          <Step>\n            <StepLabel>Withdraw Funds</StepLabel>\n          </Step>\n        </Stepper>\n        {ethTxid ? (\n          <Typography variant=\"body2\" align=\"center\">\n            <Link\n              href={`https://etherscan.io/tx/${ethTxid}`}\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              View on Etherscan\n            </Link>\n          </Typography>\n        ) : step < 3 ? (\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ marginRight: 16 }}>\n              <CircularProgress />\n            </div>\n            {confirms ? (\n              <Typography>{confirms} / 35 Confirmations</Typography>\n            ) : (\n              <Typography>Transaction Pending</Typography>\n            )}\n          </div>\n        ) : null}\n        {!ethTxid && blockchain === 'eth' ? (\n          <DialogContentText style={{ marginTop: 16, marginBottom: 0 }}>\n            Please keep this window open. You will need to approve the request\n            on MetaMask to complete the transaction.\n          </DialogContentText>\n        ) : null}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction useForm(\n  balanceInfo,\n  addressHelperText,\n  passAddressValidation,\n  overrideValidation,\n) {\n  const [destinationAddress, setDestinationAddress] = useState('');\n  const [transferAmountString, setTransferAmountString] = useState('');\n  const { amount: balanceAmount, decimals, tokenSymbol } = balanceInfo;\n\n  const parsedAmount = parseFloat(transferAmountString) * 10 ** decimals;\n  const validAmount = parsedAmount > 0 && parsedAmount <= balanceAmount;\n\n  const fields = (\n    <>\n      <TextField\n        label=\"Recipient Address\"\n        fullWidth\n        variant=\"outlined\"\n        margin=\"normal\"\n        value={destinationAddress}\n        onChange={(e) => setDestinationAddress(e.target.value.trim())}\n        helperText={addressHelperText}\n        id={\n          !passAddressValidation && passAddressValidation !== undefined\n            ? 'outlined-error-helper-text'\n            : undefined\n        }\n        error={!passAddressValidation && passAddressValidation !== undefined}\n      />\n      <TextField\n        label=\"Amount\"\n        fullWidth\n        variant=\"outlined\"\n        margin=\"normal\"\n        type=\"number\"\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <Button\n                onClick={() =>\n                  setTransferAmountString(\n                    balanceAmountToUserAmount(balanceAmount, decimals),\n                  )\n                }\n              >\n                MAX\n              </Button>\n              {tokenSymbol ? tokenSymbol : null}\n            </InputAdornment>\n          ),\n          inputProps: {\n            step: Math.pow(10, -decimals),\n          },\n        }}\n        value={transferAmountString}\n        onChange={(e) => setTransferAmountString(e.target.value.trim())}\n        helperText={\n          <span\n            onClick={() =>\n              setTransferAmountString(\n                balanceAmountToUserAmount(balanceAmount, decimals),\n              )\n            }\n          >\n            Max: {balanceAmountToUserAmount(balanceAmount, decimals)}\n          </span>\n        }\n      />\n    </>\n  );\n\n  return {\n    fields,\n    destinationAddress,\n    transferAmountString,\n    setDestinationAddress,\n    validAmount,\n  };\n}\n\nfunction balanceAmountToUserAmount(balanceAmount, decimals) {\n  return (balanceAmount / Math.pow(10, decimals)).toFixed(decimals);\n}\n\nfunction EthWithdrawalCompleter({ ethAccount, publicKey }) {\n  const [swaps] = useSwapApiGet(`swaps_from/sol/${publicKey.toBase58()}`, {\n    refreshInterval: 10000,\n  });\n  if (!swaps) {\n    return null;\n  }\n  return swaps.map((swap) => (\n    <EthWithdrawalCompleterItem\n      key={swap.deposit.txid}\n      ethAccount={ethAccount}\n      swap={swap}\n    />\n  ));\n}\n\nfunction EthWithdrawalCompleterItem({ ethAccount, swap }) {\n  const callAsync = useCallAsync();\n  const { withdrawal } = swap;\n  useEffect(() => {\n    if (\n      withdrawal.status === 'sent' &&\n      withdrawal.blockchain === 'eth' &&\n      withdrawal.txid &&\n      !withdrawal.txid.startsWith('0x') &&\n      withdrawal.txData\n    ) {\n      withdrawEth(ethAccount, withdrawal, callAsync);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [withdrawal.txid, withdrawal.status]);\n  return null;\n}\n","import React, { useState } from 'react';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogForm from './DialogForm';\nimport { abbreviateAddress } from '../utils/utils';\nimport CopyableDisplay from './CopyableDisplay';\nimport { useSolanaExplorerUrlSuffix } from '../utils/connection';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport tuple from 'immutable-tuple';\nimport { useCallAsync } from '../utils/notifications';\nimport {\n  ConnectToMetamaskButton,\n  getErc20Balance,\n  swapErc20ToSpl,\n  useEthAccount,\n  estimateErc20SwapFees,\n} from '../utils/swap/eth';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Link from '@material-ui/core/Link';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { DialogContentText, Tooltip } from '@material-ui/core';\nimport { EthFeeEstimate } from './EthFeeEstimate';\n\nconst DISABLED_MINTS = new Set([\n  'ABE7D8RU1eHfCJWzHYZZeymeE8k9nPPXfqge2NQYyKoL',\n]);\n\nexport default function DepositDialog({\n  open,\n  onClose,\n  publicKey,\n  balanceInfo,\n  swapInfo,\n  isAssociatedToken,\n}) {\n  const ethAccount = useEthAccount();\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const { mint, tokenName, tokenSymbol, owner } = balanceInfo;\n  const [tab, setTab] = useState(0);\n\n  // SwapInfos to ignore.\n  if (\n    swapInfo &&\n    swapInfo.coin &&\n    swapInfo.coin.erc20Contract === '0x2b2e04bf86978b45bb2edf54aca876973bdd43c0'\n  ) {\n    swapInfo = null;\n  }\n\n  let tabs = null;\n  if (swapInfo) {\n    let firstTab = `SPL ${tokenSymbol ?? swapInfo.coin.ticker}`;\n    let secondTab = swapInfo.coin.ticker;\n    if (!mint) {\n      firstTab = 'SOL';\n    } else {\n      if (swapInfo.blockchain !== 'eth') {\n        secondTab = `${\n          swapInfo.coin.erc20Contract ? 'ERC20' : 'Native'\n        } ${secondTab}`;\n      } else {\n        secondTab = null;\n      }\n    }\n    tabs = (\n      <Tabs\n        value={tab}\n        variant=\"fullWidth\"\n        onChange={(e, value) => setTab(value)}\n        textColor=\"primary\"\n        indicatorColor=\"primary\"\n      >\n        <Tab label={firstTab} />\n        {(!DISABLED_MINTS.has(mint && mint.toString()) ||\n          localStorage.getItem('sollet-private')) &&\n          secondTab && <Tab label={secondTab} />}\n      </Tabs>\n    );\n  }\n  const displaySolAddress = publicKey.equals(owner) || isAssociatedToken;\n  const depositAddressStr = displaySolAddress\n    ? owner.toBase58()\n    : publicKey.toBase58();\n  return (\n    <DialogForm open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>\n        Deposit {tokenName ?? mint.toBase58()}\n        {tokenSymbol ? ` (${tokenSymbol})` : null}\n        {ethAccount && (\n          <div>\n            <Typography color=\"textSecondary\" style={{ fontSize: '14px' }}>\n              Metamask connected: {ethAccount}\n            </Typography>\n          </div>\n        )}\n      </DialogTitle>\n      {tabs}\n      <DialogContent style={{ paddingTop: 16 }}>\n        {tab === 0 ? (\n          <>\n            {!displaySolAddress && isAssociatedToken === false ? (\n              <DialogContentText>\n                This address can only be used to receive{' '}\n                {tokenSymbol ?? abbreviateAddress(mint)}. Do not send SOL to\n                this address.\n                <br />\n                <b style={{ color: 'red' }}>WARNING</b>: You are using a\n                deprecated account type. Please migrate your tokens. Ideally,\n                create a new wallet. If you send to this address from a poorly\n                implemented wallet, you may burn tokens.\n              </DialogContentText>\n            ) : (\n              <DialogContentText>\n                This address can be used to receive{' '}\n                {tokenSymbol ?? abbreviateAddress(mint)}.\n              </DialogContentText>\n            )}\n            <CopyableDisplay\n              value={depositAddressStr}\n              label={'Deposit Address'}\n              autoFocus\n              qrCode\n            />\n            <DialogContentText variant=\"body2\">\n              <Link\n                href={\n                  `https://solscan.io/account/${depositAddressStr}` + urlSuffix\n                }\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                View on Solscan\n              </Link>\n            </DialogContentText>\n          </>\n        ) : (\n          <SolletSwapDepositAddress\n            balanceInfo={balanceInfo}\n            swapInfo={swapInfo}\n            ethAccount={ethAccount}\n          />\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n\nfunction SolletSwapDepositAddress({ balanceInfo, swapInfo, ethAccount }) {\n  const [ethBalance] = useAsyncData(\n    () => getErc20Balance(ethAccount),\n    'ethBalance',\n    {\n      refreshInterval: 2000,\n    },\n  );\n\n  const ethFeeData = useAsyncData(\n    swapInfo.coin &&\n      (() =>\n        estimateErc20SwapFees({\n          erc20Address: swapInfo.coin.erc20Contract,\n          swapAddress: swapInfo.address,\n          ethAccount,\n        })),\n    'depositEthFee',\n    {\n      refreshInterval: 2000,\n    },\n  );\n\n  if (!swapInfo) {\n    return null;\n  }\n\n  const ethFeeEstimate = Array.isArray(ethFeeData[0])\n    ? ethFeeData[0].reduce((acc, elem) => acc + elem)\n    : ethFeeData[0];\n  const insufficientEthBalance =\n    typeof ethBalance === 'number' &&\n    typeof ethFeeEstimate === 'number' &&\n    ethBalance < ethFeeEstimate;\n\n  const { blockchain, address, memo, coin } = swapInfo;\n  const { mint, tokenName } = balanceInfo;\n\n  if (blockchain === 'btc' && memo === null) {\n    return (\n      <>\n        <DialogContentText>\n          Native BTC can be converted to SPL {tokenName} by sending it to the\n          following address:\n        </DialogContentText>\n        <CopyableDisplay\n          value={address}\n          label=\"Native BTC Deposit Address\"\n          autoFocus\n          qrCode={`bitcoin:${address}`}\n        />\n      </>\n    );\n  }\n\n  if (false && blockchain === 'eth') {\n    return (\n      <>\n        <DialogContentText>\n          {coin.erc20Contract ? 'ERC20' : 'Native'} {coin.ticker} can be\n          converted to {mint ? 'SPL' : 'native'} {tokenName} via MetaMask. To\n          convert, you must already have SOL in your wallet.\n        </DialogContentText>\n        <DialogContentText>\n          Estimated withdrawal transaction fee:\n          <EthFeeEstimate\n            ethFeeData={ethFeeData}\n            insufficientEthBalance={insufficientEthBalance}\n          />\n        </DialogContentText>\n        <MetamaskDeposit\n          swapInfo={swapInfo}\n          insufficientEthBalance={insufficientEthBalance}\n        />\n      </>\n    );\n  }\n\n  return null;\n}\n\nfunction MetamaskDeposit({ swapInfo, insufficientEthBalance }) {\n  const ethAccount = useEthAccount();\n  const [amount, setAmount] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n  const [status, setStatus] = useState(null);\n  const callAsync = useCallAsync();\n\n  const {\n    address: swapAddress,\n    memo: destination,\n    coin: { erc20Contract: erc20Address, ticker },\n  } = swapInfo;\n\n  const [maxAmount, maxAmountLoaded] = useAsyncData(async () => {\n    if (ethAccount) {\n      return Math.min(\n        await getErc20Balance(ethAccount, erc20Address),\n        swapInfo.maxSize ?? Infinity,\n      );\n    }\n    return 0;\n  }, tuple(getErc20Balance, ethAccount, erc20Address));\n\n  if (!ethAccount) {\n    return <ConnectToMetamaskButton />;\n  }\n\n  async function submit() {\n    setSubmitted(true);\n    setStatus({ step: 0 });\n    await callAsync(\n      (async () => {\n        let parsedAmount = parseFloat(amount);\n\n        if (!parsedAmount || parsedAmount > maxAmount || parsedAmount <= 0) {\n          throw new Error('Invalid amount');\n        }\n        await swapErc20ToSpl({\n          ethAccount,\n          erc20Address,\n          swapAddress,\n          destination,\n          amount,\n          onStatusChange: (e) => setStatus((status) => ({ ...status, ...e })),\n        });\n      })(),\n      { onError: () => setSubmitted(false) },\n    );\n  }\n\n  if (!submitted) {\n    let convertButton = (\n      <Button\n        color=\"primary\"\n        style={{ marginLeft: 8 }}\n        onClick={submit}\n        disabled={insufficientEthBalance}\n      >\n        Convert\n      </Button>\n    );\n\n    if (insufficientEthBalance) {\n      convertButton = (\n        <Tooltip\n          title=\"Insufficient ETH for withdrawal transaction fee\"\n          placement=\"top\"\n        >\n          <span>{convertButton}</span>\n        </Tooltip>\n      );\n    }\n\n    return (\n      <div style={{ display: 'flex', alignItems: 'baseline' }}>\n        <TextField\n          label=\"Amount\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          type=\"number\"\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">{ticker}</InputAdornment>\n            ),\n            inputProps: {\n              step: 'any',\n            },\n          }}\n          value={amount}\n          onChange={(e) => setAmount(e.target.value.trim())}\n          helperText={\n            maxAmountLoaded ? (\n              <span onClick={() => setAmount(maxAmount.toFixed(6))}>\n                Max: {maxAmount.toFixed(6)}\n              </span>\n            ) : null\n          }\n        />\n        {convertButton}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Stepper activeStep={status.step}>\n        <Step>\n          <StepLabel>Approve Conversion</StepLabel>\n        </Step>\n        <Step>\n          <StepLabel>Send Funds</StepLabel>\n        </Step>\n        <Step>\n          <StepLabel>Wait for Confirmations</StepLabel>\n        </Step>\n      </Stepper>\n      {status.step === 2 ? (\n        <>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ marginRight: 16 }}>\n              <CircularProgress />\n            </div>\n            <div>\n              {status.confirms ? (\n                <Typography>{status.confirms} / 12 Confirmations</Typography>\n              ) : (\n                <Typography>Transaction Pending</Typography>\n              )}\n              <Typography variant=\"body2\">\n                <Link\n                  href={`https://etherscan.io/tx/${status.txid}`}\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  View on Etherscan\n                </Link>\n              </Typography>\n            </div>\n          </div>\n        </>\n      ) : null}\n    </>\n  );\n}\n","import { useAsync } from 'react-async-hook';\n\nconst ENDPOINT = 'https://calm-hat-66c2.project-serum.workers.dev';\n\nexport function useRegion() {\n  return useAsync(async () => {\n    const resp = await fetch(ENDPOINT);\n    return await resp.json();\n  }, []);\n}\n","import React, { useState } from 'react';\nimport DialogForm from './DialogForm';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nexport default function EditAccountNameDialog({\n  open,\n  oldName,\n  onClose,\n  onEdit,\n}) {\n  const [name, setName] = useState(oldName);\n  return (\n    <DialogForm\n      open={open}\n      onEnter={() => setName(oldName)}\n      onClose={onClose}\n      onSubmit={() => onEdit(name.trim())}\n      fullWidth\n    >\n      <DialogTitle>Edit Account</DialogTitle>\n      <DialogContent>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <TextField\n            label=\"Name\"\n            fullWidth\n            variant=\"outlined\"\n            margin=\"normal\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n        <Button type=\"submit\" color=\"primary\">\n          Save\n        </Button>\n      </DialogActions>\n    </DialogForm>\n  );\n}\n","import { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport { TokenInstructions } from '@project-serum/serum';\nimport { useWalletPublicKeys } from '../utils/wallet';\nimport {\n  useConnection,\n  refreshAccountInfo,\n  getMultipleSolanaAccounts,\n} from '../utils/connection';\nimport { parseTokenAccountData } from '../utils/tokens/data';\nimport { refreshWalletPublicKeys, useWallet } from '../utils/wallet';\nimport {\n  createAssociatedTokenAccount,\n  findAssociatedTokenAddress,\n} from '../utils/tokens';\nimport { sleep } from '../utils/utils';\nimport { useTokenInfos, getTokenInfo } from '../utils/tokens/names';\n\nexport default function MergeAccountsDialog({ open, onClose }) {\n  const [publicKeys] = useWalletPublicKeys();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const { enqueueSnackbar } = useSnackbar();\n  const [isMerging, setIsMerging] = useState(false);\n  const [mergeCheck, setMergeCheck] = useState('');\n  const tokenInfos = useTokenInfos();\n\n  // Merging accounts is a destructive operation that, for each mint,\n  //\n  // * Creates an associated token account, if not already created\n  // * Moves all funds into the associated token account\n  // * Closes every account, excluding the associated token account.\n  //\n  // Although it's ok if this operation fails--since the user can just\n  // retry again--it's not a good experience; hence the retry logic.\n  // The retry count of 30 is arbitrary and probably overly conservative.\n  const mergeAccounts = async (retryCount = 30) => {\n    try {\n      if (retryCount === 0) {\n        enqueueSnackbar(`Unable to complete migration. Please try again.`, {\n          variant: 'error',\n        });\n        return;\n      }\n      // Fetch all token accounts owned by the wallet. An account is null\n      // if we previously sent the close transaction, but did not receive\n      // a response due to RPC node instability.\n      const tokenAccounts = (\n        await getMultipleSolanaAccounts(connection, publicKeys)\n      )\n        .filter(\n          (acc) =>\n            acc !== null &&\n            acc.account.owner.equals(TokenInstructions.TOKEN_PROGRAM_ID),\n        )\n        .map(({ publicKey, account }) => {\n          return {\n            publicKey,\n            account: parseTokenAccountData(account.data),\n            owner: account.owner,\n          };\n        });\n\n      // Group the token accounts by mint.\n      const groupedTokenAccounts = {};\n      tokenAccounts.forEach((ta) => {\n        const key = ta.account.mint.toString();\n        if (groupedTokenAccounts[key]) {\n          groupedTokenAccounts[key].push(ta);\n        } else {\n          groupedTokenAccounts[key] = [ta];\n        }\n      });\n\n      // For each mint, merge them into one, associated token account.\n      const mints = Object.keys(groupedTokenAccounts);\n      for (let k = 0; k < mints.length; k += 1) {\n        const mintGroup = groupedTokenAccounts[mints[k]];\n        if (mintGroup.length > 0) {\n          const mint = mintGroup[0].account.mint;\n          const assocTokAddr = await findAssociatedTokenAddress(\n            wallet.publicKey,\n            mint,\n          );\n          // Don't merge if the only account is the associated token address.\n          if (\n            !(\n              mintGroup.length === 1 &&\n              assocTokAddr.equals(mintGroup[0].publicKey)\n            )\n          ) {\n            const tokenInfo = getTokenInfo(\n              mint,\n              connection._rpcEndpoint,\n              tokenInfos,\n            );\n            const symbol = tokenInfo.symbol\n              ? tokenInfo.symbol\n              : mint.toString();\n            console.log(`Migrating ${symbol}`);\n            enqueueSnackbar(`Migrating ${symbol}`, {\n              variant: 'info',\n            });\n            await mergeMint(\n              assocTokAddr,\n              mintGroup,\n              mint,\n              tokenInfo.decimals,\n              wallet,\n              connection,\n              enqueueSnackbar,\n            );\n          }\n        }\n      }\n\n      // Wait to give the RPC nodes some time to catch up.\n      await sleep(5000);\n\n      // Refresh the UI to remove any duplicates.\n      await refresh(wallet, publicKeys);\n\n      // Exit dialogue.\n      close();\n    } catch (err) {\n      console.error('There was a problem migrating accounts', err);\n      enqueueSnackbar('Could not confirm transaction. Please wait.', {\n        variant: 'info',\n      });\n\n      // Sleep to give the RPC nodes some time to catch up.\n      await sleep(10000);\n\n      enqueueSnackbar('Retrying migration', { variant: 'info' });\n      await mergeAccounts(retryCount - 1);\n    }\n  };\n  const close = () => {\n    setMergeCheck('');\n    onClose();\n  };\n  const disabled = mergeCheck.toLowerCase() !== 'migrate';\n\n  return (\n    <Dialog disableBackdropClick={isMerging} open={open} onClose={onClose}>\n      {isMerging ? (\n        <DialogContent>\n          <DialogContentText style={{ marginBottom: 0, textAlign: 'center' }}>\n            Merging Accounts\n          </DialogContentText>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              padding: '24px',\n            }}\n          >\n            <CircularProgress />\n          </div>\n        </DialogContent>\n      ) : (\n        <>\n          <DialogTitle>Are you sure you want to migrate tokens?</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <b>WARNING</b>: This action may break apps that depend on your\n              existing token accounts.\n            </DialogContentText>\n            <DialogContentText>\n              Migrating sends all tokens to{' '}\n              <Link\n                href={'https://spl.solana.com/associated-token-account'}\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                associated token accounts\n              </Link>{' '}\n              <FingerprintIcon style={{ marginBottom: '-7px' }} />. If\n              associated token accounts do not exist, then they will be created.\n            </DialogContentText>\n            <DialogContentText>\n              If migrating fails during a period of high network load, you will\n              not have lost your funds. Just recontinue the migration from where you\n              left off. If you have a lot of accounts, migrating might take a\n              while.\n            </DialogContentText>\n            <TextField\n              label={`Please type \"migrate\" to confirm`}\n              fullWidth\n              variant=\"outlined\"\n              margin=\"normal\"\n              value={mergeCheck}\n              onChange={(e) => setMergeCheck(e.target.value.trim())}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={close} color=\"primary\">\n              Cancel\n            </Button>\n            <Button\n              disabled={disabled}\n              onClick={() => {\n                setIsMerging(true);\n                mergeAccounts()\n                  .then(() => {\n                    enqueueSnackbar('Account migrate complete', {\n                      variant: 'success',\n                    });\n                    setIsMerging(false);\n                  })\n                  .catch((err) => {\n                    enqueueSnackbar(\n                      `There was a problem merging your accounts: ${err.toString()}`,\n                      { variant: 'error' },\n                    );\n                    setIsMerging(false);\n                  });\n              }}\n              color=\"secondary\"\n              autoFocus\n            >\n              Migrate\n            </Button>\n          </DialogActions>\n        </>\n      )}\n    </Dialog>\n  );\n}\n\n// Merges the given array of token accounts into one associated token account.\nasync function mergeMint(\n  assocTokAddr,\n  mintAccountSet,\n  mint,\n  decimals,\n  wallet,\n  connection,\n  enqueueSnackbar,\n) {\n  if (mintAccountSet.length === 0) {\n    return;\n  }\n  // Get the associated token account.\n  let associatedTokenAccount = await (async () => {\n    let assocTok = mintAccountSet\n      .map((assocTok) => assocTok.publicKey)\n      .filter((tokAddr) => tokAddr.equals(assocTokAddr))\n      .pop();\n\n    // Do we already have the token account?\n    if (assocTok) {\n      return assocTok;\n    }\n\n    // Check if the associated token account has been created.\n    // This is required due to a sometimes unstable network, where\n    // the account is created, but the client doesn't receive a\n    // response confirmation.\n    const accInfo = await connection.getAccountInfo(assocTokAddr);\n    if (accInfo !== null) {\n      return assocTokAddr;\n    }\n\n    // If it doesn't exist, then make it.\n    const [address] = await createAssociatedTokenAccount({\n      connection,\n      wallet,\n      splTokenMintAddress: mintAccountSet[0].account.mint,\n    });\n\n    return address;\n  })();\n\n  // Send all funds to the associated token account for each account.\n  // Once the funds are transferred, close the duplicated account.\n  for (let k = 0; k < mintAccountSet.length; k += 1) {\n    const tokenAccount = mintAccountSet[k];\n    if (tokenAccount.publicKey.equals(associatedTokenAccount) === false) {\n      if (tokenAccount.account.amount > 0) {\n        await wallet.transferToken(\n          tokenAccount.publicKey,\n          associatedTokenAccount,\n          tokenAccount.account.amount,\n          mint,\n          decimals,\n        );\n      }\n    }\n  }\n}\n\nasync function refresh(wallet, publicKeys) {\n  await refreshWalletPublicKeys(wallet);\n  publicKeys.map((publicKey) =>\n    refreshAccountInfo(wallet.connection, publicKey, true),\n  );\n}\n","\nexport const actionButtons = {\n  button: {\n    padding: '10px 0',    \n  },\n  buttonText: {\n    color: '#FFF',\n    fontSize: '12px',\n    fontWeight: 'bold',\n    lineHeight: '24px',\n  }\n}","import React, { useState } from 'react';\nimport {\n  Tooltip,\n  Popover,\n  IconButton,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n} from '@material-ui/core';\nimport SwapHoriz from '@material-ui/icons/SwapHoriz';\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\nimport Swap from '@project-serum/swap-ui';\nimport { Provider } from '@project-serum/anchor';\nimport { TokenListContainer } from '@solana/spl-token-registry';\nimport { useTokenInfos } from '../utils/tokens/names';\nimport { useSendTransaction } from '../utils/notifications';\nimport { useWallet } from '../utils/wallet';\nimport { useConnection } from '../utils/connection';\nimport { useIsExtensionWidth } from '../utils/utils';\nimport {actionButtons} from './styles/buttons'\nimport DialogForm from './DialogForm';\n\nexport default function SwapButton({ size }) {\n  const isExtensionWidth = useIsExtensionWidth();\n  if (isExtensionWidth) {\n    return <SwapButtonDialog size={size} />;\n  } else {\n    return <SwapButtonPopover size={size} />;\n  }\n}\n\nfunction SwapButtonDialog({ size }) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [sendTransaction] = useSendTransaction();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const tokenInfos = useTokenInfos();\n  const tokenList = tokenInfos && new TokenListContainer(tokenInfos);\n  const provider = new NotifyingProvider(connection, wallet, sendTransaction);\n  return (\n    <>\n      <Tooltip title=\"Swap Tokens\">\n        <IconButton size={size} onClick={() => setDialogOpen(true)}>\n          <SwapHoriz />\n        </IconButton>\n      </Tooltip>\n      <DialogForm\n        open={dialogOpen}\n        onClose={() => setDialogOpen(false)}\n        fullWidth\n      >\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            flexDirection: 'column',\n            height: '100%',\n          }}\n        >\n          <Swap\n            provider={provider}\n            tokenList={tokenList}\n            containerStyle={{\n              width: '100%',\n              boxShadow: 'none',\n            }}\n          />\n          <DialogActions>\n            <Button onClick={() => setDialogOpen(false)}>Close</Button>\n          </DialogActions>\n        </div>\n      </DialogForm>\n    </>\n  );\n}\n\nfunction SwapButtonPopover({ size }) {\n  const [sendTransaction] = useSendTransaction();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const tokenInfos = useTokenInfos();\n  const tokenList = tokenInfos && new TokenListContainer(tokenInfos);\n  const provider = new NotifyingProvider(connection, wallet, sendTransaction);\n  return (\n    tokenList && (\n      <PopupState variant=\"popover\">\n        {(popupState) => (\n          <div style={{ display: 'flex' }}>\n            <Box align='center'>\n              <Tooltip title=\"Swap Tokens\">\n                <Button style={actionButtons.button} variant=\"contained\" color=\"primary\" {...bindTrigger(popupState)} size={size} >\n                  <SwapHoriz />\n                </Button>                 \n              </Tooltip>\n              <Typography style={actionButtons.buttonText}>Swap</Typography>       \n            </Box>\n            <Popover\n              {...bindPopover(popupState)}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'left',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              PaperProps={{ style: { borderRadius: '10px' } }}\n              disableRestoreFocus\n              keepMounted\n            >\n              <Swap\n                provider={provider}\n                tokenList={tokenList}\n                containerStyle={{ width: '432px' }}\n              />\n            </Popover>\n          </div>\n        )}\n      </PopupState>\n    )\n  );\n}\n\nclass NotifyingProvider extends Provider {\n  constructor(\n    connection,\n    wallet,\n    sendTransaction,\n  ) {\n    super(connection, wallet, {\n      commitment: 'recent',\n    });\n    this.sendTransaction = sendTransaction;\n  }\n\n  async send(\n    tx,\n    signers,\n    opts,\n  ) {\n    return new Promise((onSuccess, onError) => {\n      this.sendTransaction(super.send(tx, signers, opts), {\n        onSuccess,\n        onError,\n      });\n    });\n  }\n\n  async sendAll(\n    txs,\n    opts,\n  ) {\n    return new Promise(async (resolve, onError) => {\n      let txSigs = [];\n      for (const tx of txs) {\n        txSigs.push(\n          await new Promise((onSuccess) => {\n            this.sendTransaction(super.send(tx.tx, tx.signers, opts), {\n              onSuccess,\n              onError,\n            });\n          }),\n        );\n      }\n      resolve(txSigs);\n    });\n  }\n}\n","import React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport {\n  refreshWalletPublicKeys,\n  useBalanceInfo,\n  useWallet,\n  useWalletPublicKeys,\n  useWalletSelector,\n} from '../utils/wallet';\nimport { findAssociatedTokenAddress } from '../utils/tokens';\nimport LoadingIndicator from './LoadingIndicator';\nimport Collapse from '@material-ui/core/Collapse';\nimport { Typography } from '@material-ui/core';\nimport TokenInfoDialog from './TokenInfoDialog';\nimport FtxPayDialog from './FtxPay/FtxPayDialog';\nimport Link from '@material-ui/core/Link';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { abbreviateAddress, useIsExtensionWidth } from '../utils/utils';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport SendIcon from '@material-ui/icons/Send';\nimport ReceiveIcon from '@material-ui/icons/WorkOutline';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AddIcon from '@material-ui/icons/Add';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport InfoIcon from '@material-ui/icons/InfoOutlined';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport EditIcon from '@material-ui/icons/Edit';\nimport MergeType from '@material-ui/icons/MergeType';\nimport SortIcon from '@material-ui/icons/Sort';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddTokenDialog from './AddTokenDialog';\nimport ExportAccountDialog from './ExportAccountDialog';\nimport ftxPayIcon from './FtxPay/icon.png';\nimport SendDialog from './SendDialog';\nimport DepositDialog from './DepositDialog';\nimport {\n  useIsProdNetwork,\n  refreshAccountInfo,\n  useSolanaExplorerUrlSuffix,\n} from '../utils/connection';\nimport { useRegion } from '../utils/region';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { serumMarkets, priceStore } from '../utils/markets';\nimport { swapApiRequest } from '../utils/swap/api';\nimport { showSwapAddress } from '../utils/config';\nimport { useAsyncData } from '../utils/fetch-loop';\nimport { showTokenInfoDialog } from '../utils/config';\nimport { useConnection } from '../utils/connection';\nimport { shortenAddress } from '../utils/utils';\nimport CloseTokenAccountDialog from './CloseTokenAccountButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport TokenIcon from './TokenIcon';\nimport EditAccountNameDialog from './EditAccountNameDialog';\nimport MergeAccountsDialog from './MergeAccountsDialog';\nimport SwapButton from './SwapButton';\nimport DnsIcon from '@material-ui/icons/Dns';\nimport DomainsList from './DomainsList';\nimport {actionButtons} from './styles/buttons'\n\n\n\nconst balanceFormat = new Intl.NumberFormat(undefined, {\n  minimumFractionDigits: 4,\n  maximumFractionDigits: 4,\n  useGrouping: true,\n});\n\nconst SortAccounts = {\n  None: 0,\n  Ascending: 1,\n  Descending: 2,\n};\n\n// Aggregated $USD values of all child BalanceListItems child components.\n//\n// Values:\n// * undefined => loading.\n// * null => no market exists.\n// * float => done.\n//\n// For a given set of publicKeys, we know all the USD values have been loaded when\n// all of their values in this object are not `undefined`.\nconst usdValues = {};\n\n// Calculating associated token addresses is an asynchronous operation, so we cache\n// the values so that we can quickly render components using them. This prevents\n// flickering for the associated token fingerprint icon.\nconst associatedTokensCache = {};\n\nconst numberFormat = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nfunction fairsIsLoaded(publicKeys) {\n  return (\n    publicKeys.filter((pk) => usdValues[pk.toString()] !== undefined).length ===\n    publicKeys.length\n  );\n}\n\nexport default function BalancesList() {\n  const wallet = useWallet();\n  const [publicKeys, loaded] = useWalletPublicKeys();\n  const [showAddTokenDialog, setShowAddTokenDialog] = useState(false);\n  const [showEditAccountNameDialog, setShowEditAccountNameDialog] = useState(\n    false,\n  );\n  const [showMergeAccounts, setShowMergeAccounts] = useState(false);\n  const [showFtxPayDialog, setShowFtxPayDialog] = useState(false);\n  const [sortAccounts, setSortAccounts] = useState(SortAccounts.None);\n  const { accounts, setAccountName } = useWalletSelector();\n  const isExtensionWidth = useIsExtensionWidth();\n  // Dummy var to force rerenders on demand.\n  const [, setForceUpdate] = useState(false);\n  const region = useRegion();\n  const selectedAccount = accounts.find((a) => a.isSelected);\n  const allTokensLoaded = loaded && fairsIsLoaded(publicKeys);\n  let sortedPublicKeys = publicKeys;\n  if (allTokensLoaded && sortAccounts !== SortAccounts.None) {\n    sortedPublicKeys = [...publicKeys];\n    sortedPublicKeys.sort((a, b) => {\n      const aVal = usdValues[a.toString()];\n      const bVal = usdValues[b.toString()];\n\n      a = aVal === undefined || aVal === null ? -1 : aVal;\n      b = bVal === undefined || bVal === null ? -1 : bVal;\n      if (sortAccounts === SortAccounts.Descending) {\n        if (a < b) {\n          return -1;\n        } else if (a > b) {\n          return 1;\n        } else {\n          return 0;\n        }\n      } else {\n        if (b < a) {\n          return -1;\n        } else if (b > a) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    });\n  }\n\n  const styles = {\n    tokens : {\n      borderRadius: '20px'\n    },\n    deposit: {\n      color: '#B5BBC9',\n      border: '1px dashed #B5BBC9',\n      width: '100%'\n    }\n  }\n\n  const totalUsdValue = publicKeys\n    .filter((pk) => usdValues[pk.toString()])\n    .map((pk) => usdValues[pk.toString()])\n    .reduce((a, b) => a + b, 0.0);\n\n  // Memoized callback and component for the `BalanceListItems`.\n  //\n  // The `BalancesList` fetches data, e.g., fairs for tokens using React hooks\n  // in each of the child `BalanceListItem` components. However, we want the\n  // parent component, to aggregate all of this data together, for example,\n  // to show the cumulative USD amount in the wallet.\n  //\n  // To achieve this, we need to pass a callback from the parent to the chlid,\n  // so that the parent can collect the results of all the async network requests.\n  // However, this can cause a render loop, since invoking the callback can cause\n  // the parent to rerender, which causese the child to rerender, which causes\n  // the callback to be invoked.\n  //\n  // To solve this, we memoize all the `BalanceListItem` children components.\n  const setUsdValuesCallback = useCallback(\n    (publicKey, usdValue) => {\n      if (usdValues[publicKey.toString()] !== usdValue) {\n        usdValues[publicKey.toString()] = usdValue;\n        if (fairsIsLoaded(publicKeys)) {\n          setForceUpdate((forceUpdate) => !forceUpdate);\n        }\n      }\n    },\n    [publicKeys],\n  );\n  const balanceListItemsMemo = useMemo(() => {\n    return sortedPublicKeys.map((pk) => {\n      return React.memo((props) => {\n        return (\n          <BalanceListItem\n            key={pk.toString()}\n            publicKey={pk}\n            setUsdValue={setUsdValuesCallback}\n          />\n        );\n      });\n    });\n  }, [sortedPublicKeys, setUsdValuesCallback]);\n\n  const iconSize = isExtensionWidth ? 'small' : 'medium';\n\n  return (\n    <>\n    <Paper style={{ display: allTokensLoaded ? \"block\" : \"none\" }}>\n      {/*\n      <Menu\n        selectedAccount={selectedAccount}\n      />\n      */}\n      <AccountBalance\n        allTokensLoaded={allTokensLoaded}\n        totalUsdValue={totalUsdValue}\n        selectedAccount={selectedAccount}\n      />\n      <Box sx={{bgcolor: 'background.tokens', borderRadius: '20px 20px 0 0'}} px={2} py={2}>\n        <Box display='flex' justifyContent='center'>\n          <Box mx={2}>\n          {region.result && !region.result.isRestricted && <SwapButton size={iconSize} />}\n          </Box>\n          <Box mx={2} align=\"center\">\n            <Tooltip title=\"Sort Tokens\" arrow>\n              <Button \n                style={actionButtons.button} \n                variant=\"contained\" \n                color=\"primary\"                           \n                onClick={() => {\n                  switch (sortAccounts) {\n                    case SortAccounts.None:\n                      setSortAccounts(SortAccounts.Ascending);\n                      return;\n                    case SortAccounts.Ascending:\n                      setSortAccounts(SortAccounts.Descending);\n                      return;\n                    case SortAccounts.Descending:\n                      setSortAccounts(SortAccounts.None);\n                      return;\n                    default:\n                      console.error('invalid sort type', sortAccounts);\n                  }\n                }}\n              >\n                <SortIcon />\n              </Button>            \n            </Tooltip>\n            <Typography style={actionButtons.buttonText}>Sort</Typography>       \n          </Box>\n          <Box mx={2} align=\"center\">\n            <Tooltip title=\"Refresh\" arrow>\n            <Button \n                style={actionButtons.button} \n                variant=\"contained\" \n                color=\"primary\"                     \n                onClick={() => {\n                  refreshWalletPublicKeys(wallet);\n                  publicKeys.map((publicKey) =>\n                    refreshAccountInfo(wallet.connection, publicKey, true),\n                  );\n                }}                \n              >\n                <RefreshIcon />\n              </Button>\n            </Tooltip>  \n            <Typography style={actionButtons.buttonText}>Refresh</Typography>       \n          </Box>\n        </Box>\n        <Box m={2}>\n          <Typography variant='h4'>Tokens</Typography>\n        </Box>\n        {balanceListItemsMemo.map((Memoized) => (\n          <Memoized />\n        ))}\n        {loaded ? null : <LoadingIndicator />}\n        <Box m={2} align='center'>\n          <Button size='large' variant=\"outlined\" style={styles.deposit} onClick={() => setShowFtxPayDialog(true)}>\n              + Deposit\n          </Button>       \n        </Box>\n      </Box>\n      <AddTokenDialog\n        open={showAddTokenDialog}\n        onClose={() => setShowAddTokenDialog(false)}\n      />\n      <FtxPayDialog\n        open={showFtxPayDialog}\n        publicKeys={publicKeys}\n        onClose={() => setShowFtxPayDialog(false)}\n      />\n      <EditAccountNameDialog\n        open={showEditAccountNameDialog}\n        onClose={() => setShowEditAccountNameDialog(false)}\n        oldName={selectedAccount ? selectedAccount.name : ''}\n        onEdit={(name) => {\n          setAccountName(selectedAccount.selector, name);\n          setShowEditAccountNameDialog(false);\n        }}\n      />\n      <MergeAccountsDialog\n        open={showMergeAccounts}\n        onClose={() => setShowMergeAccounts(false)}\n      />\n    </Paper>\n    <Paper style={{ display: allTokensLoaded ? \" none\" : \"block\" }}>     \n      <Box align=\"center\" p={10}>\n        <CircularProgress disableShrink/>\n      </Box>\n    </Paper>\n    \n    </>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  address: {\n    textOverflow: 'ellipsis',\n    overflowX: 'hidden',\n  },\n  itemDetails: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  viewDetails: {\n    '&:hover': {\n      cursor: 'pointer',\n    },\n  },\n}));\n\nexport function BalanceListItem({ publicKey, expandable, setUsdValue }) {\n  const wallet = useWallet();\n  const balanceInfo = useBalanceInfo(publicKey);\n  const classes = useStyles();\n  const connection = useConnection();\n  const [open, setOpen] = useState(false);\n  const isExtensionWidth = useIsExtensionWidth();\n  const [, setForceUpdate] = useState(false);\n  // Valid states:\n  //   * undefined => loading.\n  //   * null => not found.\n  //   * else => price is loaded.\n  const [price, setPrice] = useState(undefined);\n  useEffect(() => {\n    if (balanceInfo) {\n      if (balanceInfo.tokenSymbol) {\n        const coin = balanceInfo.tokenSymbol.toUpperCase();\n        // Don't fetch USD stable coins. Mark to 1 USD.\n        if (coin === 'USDT' || coin === 'USDC') {\n          setPrice(1);\n        }\n        // A Serum market exists. Fetch the price.\n        else if (serumMarkets[coin]) {\n          let m = serumMarkets[coin];\n          priceStore\n            .getPrice(connection, m.name)\n            .then((price) => {\n              setPrice(price);\n            })\n            .catch((err) => {\n              console.error(err);\n              setPrice(null);\n            });\n        }\n        // No Serum market exists.\n        else {\n          setPrice(null);\n        }\n      }\n      // No token symbol so don't fetch market data.\n      else {\n        setPrice(null);\n      }\n    }\n  }, [price, balanceInfo, connection]);\n\n  expandable = expandable === undefined ? true : expandable;\n\n  if (!balanceInfo) {\n    return <LoadingIndicator delay={0} />;\n  }\n\n  let {\n    amount,\n    decimals,\n    mint,\n    tokenName,\n    tokenSymbol,\n    tokenLogoUri,\n  } = balanceInfo;\n  tokenName = tokenName ?? abbreviateAddress(mint);\n  let displayName;\n  if (isExtensionWidth) {\n    displayName = tokenSymbol ?? tokenName;\n  } else {\n    displayName = tokenName + (tokenSymbol ? ` (${tokenSymbol})` : '');\n  }\n\n  // Fetch and cache the associated token address.\n  if (wallet && wallet.publicKey && mint) {\n    if (\n      associatedTokensCache[wallet.publicKey.toString()] === undefined ||\n      associatedTokensCache[wallet.publicKey.toString()][mint.toString()] ===\n        undefined\n    ) {\n      findAssociatedTokenAddress(wallet.publicKey, mint).then((assocTok) => {\n        let walletAccounts = Object.assign(\n          {},\n          associatedTokensCache[wallet.publicKey.toString()],\n        );\n        walletAccounts[mint.toString()] = assocTok;\n        associatedTokensCache[wallet.publicKey.toString()] = walletAccounts;\n        if (assocTok.equals(publicKey)) {\n          // Force a rerender now that we've cached the value.\n          setForceUpdate((forceUpdate) => !forceUpdate);\n        }\n      });\n    }\n  }\n\n  // undefined => not loaded.\n  let isAssociatedToken = mint ? undefined : false;\n  if (\n    wallet &&\n    wallet.publicKey &&\n    mint &&\n    associatedTokensCache[wallet.publicKey.toString()]\n  ) {\n    let acc =\n      associatedTokensCache[wallet.publicKey.toString()][mint.toString()];\n    if (acc) {\n      if (acc.equals(publicKey)) {\n        isAssociatedToken = true;\n      } else {\n        isAssociatedToken = false;\n      }\n    }\n  }\n\n  const subtitle =\n    isExtensionWidth || !publicKey.equals(balanceInfo.owner) ? undefined : (\n      <div style={{ display: 'flex', height: '20px', overflow: 'hidden' }}>\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'column',\n          }}\n        >\n          {publicKey.toBase58()}\n        </div>\n      </div>\n    );\n\n  const usdValue =\n    price === undefined // Not yet loaded.\n      ? undefined\n      : price === null // Loaded and empty.\n      ? null\n      : ((amount / Math.pow(10, decimals)) * price).toFixed(2); // Loaded.\n  if (setUsdValue && usdValue !== undefined) {\n    setUsdValue(publicKey, usdValue === null ? null : parseFloat(usdValue));\n  }\n\n  return (\n    <>\n      <Box px={2} py={1} sx={{bgcolor: 'background.token', borderRadius: '30px'}}>        \n        <Box sx={{display:'flex', flexDirection: 'row', justifyContent:'space-between'}}>\n          <Box sx={{width: '15%', display: 'flex', flexDirection: 'row', alignItems:'center'}} >\n            <TokenIcon\n              mint={mint}\n              tokenName={tokenName}\n              url={tokenLogoUri}\n              size={36}\n            />\n          </Box >\n          <Box sx={{display:'flex', flexDirection: 'column',  justifyContent:'flex-start', width: '60%'}}>\n            <Typography variant='h4'>{displayName}</Typography>\n            <Typography variant='caption'>{balanceFormat.format(amount / Math.pow(10, decimals))}{' '}</Typography>                    \n          </Box>  \n          <Box sx={{width: '25%'}}>\n            {price && (\n                <Typography variant='h4' align='right'>\n                  {numberFormat.format(usdValue)}\n                </Typography>\n              )}\n          </Box>     \n        </Box>\n        {/*}\n        <BalanceListItemDetails\n            isAssociatedToken={isAssociatedToken}\n            publicKey={publicKey}\n            serumMarkets={serumMarkets}\n            balanceInfo={balanceInfo}\n          />\n            */}\n      </Box>\n          \n    </>\n  );\n}\n\nfunction BalanceListItemDetails({\n  publicKey,\n  serumMarkets,\n  balanceInfo,\n  isAssociatedToken,\n}) {\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  const classes = useStyles();\n  const [sendDialogOpen, setSendDialogOpen] = useState(false);\n  const [depositDialogOpen, setDepositDialogOpen] = useState(false);\n  const [tokenInfoDialogOpen, setTokenInfoDialogOpen] = useState(false);\n  const [exportAccDialogOpen, setExportAccDialogOpen] = useState(false);\n  const [\n    closeTokenAccountDialogOpen,\n    setCloseTokenAccountDialogOpen,\n  ] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const wallet = useWallet();\n  const isProdNetwork = useIsProdNetwork();\n  const [swapInfo] = useAsyncData(async () => {\n    if (!showSwapAddress || !isProdNetwork) {\n      return null;\n    }\n    return await swapApiRequest(\n      'POST',\n      'swap_to',\n      {\n        blockchain: 'sol',\n        coin: balanceInfo.mint?.toBase58(),\n        address: publicKey.toBase58(),\n      },\n      { ignoreUserErrors: true },\n    );\n  }, [\n    'swapInfo',\n    isProdNetwork,\n    balanceInfo.mint?.toBase58(),\n    publicKey.toBase58(),\n  ]);\n  const isExtensionWidth = useIsExtensionWidth();\n\n  if (!balanceInfo) {\n    return <LoadingIndicator delay={0} />;\n  }\n\n  let { mint, tokenName, tokenSymbol, owner, amount } = balanceInfo;\n\n  // Only show the export UI for the native SOL coin.\n  const exportNeedsDisplay =\n    mint === null && tokenName === 'SOL' && tokenSymbol === 'SOL';\n\n  const market = tokenSymbol\n    ? serumMarkets[tokenSymbol.toUpperCase()]\n      ? serumMarkets[tokenSymbol.toUpperCase()].publicKey\n      : undefined\n    : undefined;\n  const isSolAddress = publicKey.equals(owner);\n  const additionalInfo = isExtensionWidth ? undefined : (\n    <>\n      <Typography variant=\"body2\">\n        Token Name: {tokenName ?? 'Unknown'}\n      </Typography>\n      <Typography variant=\"body2\">\n        Token Symbol: {tokenSymbol ?? 'Unknown'}\n      </Typography>\n      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n        <div>\n          {!isSolAddress && isAssociatedToken === false && (\n            <div style={{ display: 'flex' }}>\n              This is an auxiliary token account.\n            </div>\n          )}\n          <Typography variant=\"body2\">\n            <Link\n              href={\n                `https://solscan.io/account/${publicKey.toBase58()}` + urlSuffix\n              }\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              View on Solscan\n            </Link>\n          </Typography>\n          {market && (\n            <Typography variant=\"body2\">\n              <Link\n                href={`https://dex.projectserum.com/#/market/${market}`}\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                View on Serum\n              </Link>\n            </Typography>\n          )}\n          {swapInfo && swapInfo.coin.erc20Contract && (\n            <Typography variant=\"body2\">\n              <Link\n                href={\n                  `https://etherscan.io/token/${swapInfo.coin.erc20Contract}` +\n                  urlSuffix\n                }\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                View on Ethereum\n              </Link>\n            </Typography>\n          )}\n          {!isSolAddress && (\n            <Typography variant=\"body2\">\n              <Link\n                className={classes.viewDetails}\n                onClick={() => setShowDetails(!showDetails)}\n              >\n                View Details\n              </Link>\n            </Typography>\n          )}\n          {showDetails &&\n            (mint ? (\n              <Typography variant=\"body2\" className={classes.address}>\n                Mint Address: {mint.toBase58()}\n              </Typography>\n            ) : null)}\n          {!isSolAddress && showDetails && (\n            <Typography variant=\"body2\" className={classes.address}>\n              {isAssociatedToken ? 'Associated' : ''} Token Metadata:{' '}\n              {publicKey.toBase58()}\n            </Typography>\n          )}\n        </div>\n        {exportNeedsDisplay && wallet.allowsExport && (\n          <div>\n            <Typography variant=\"body2\">\n              <Link href={'#'} onClick={(e) => setExportAccDialogOpen(true)}>\n                Export\n              </Link>\n            </Typography>\n          </div>\n        )}\n      </div>\n    </>\n  );\n\n  return (\n    <>\n      {wallet.allowsExport && (\n        <ExportAccountDialog\n          onClose={() => setExportAccDialogOpen(false)}\n          open={exportAccDialogOpen}\n        />\n      )}\n      <div className={classes.itemDetails}>\n        <div className={classes.buttonContainer}>\n          {!publicKey.equals(owner) && showTokenInfoDialog ? (\n            <Button\n              variant=\"outlined\"\n              color=\"default\"\n              startIcon={<InfoIcon />}\n              onClick={() => setTokenInfoDialogOpen(true)}\n            >\n              Token Info\n            </Button>\n          ) : null}\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<ReceiveIcon />}\n            onClick={() => setDepositDialogOpen(true)}\n          >\n            Receive\n          </Button>\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<SendIcon />}\n            onClick={() => setSendDialogOpen(true)}\n          >\n            Send\n          </Button>\n          {localStorage.getItem('warning-close-account') &&\n          mint &&\n          amount === 0 ? (\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              size=\"small\"\n              startIcon={<DeleteIcon />}\n              onClick={() => setCloseTokenAccountDialogOpen(true)}\n            >\n              Delete\n            </Button>\n          ) : null}\n        </div>\n        {additionalInfo}\n      </div>\n      <SendDialog\n        open={sendDialogOpen}\n        onClose={() => setSendDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n      <DepositDialog\n        open={depositDialogOpen}\n        onClose={() => setDepositDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n        swapInfo={swapInfo}\n        isAssociatedToken={isAssociatedToken}\n      />\n      <TokenInfoDialog\n        open={tokenInfoDialogOpen}\n        onClose={() => setTokenInfoDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n      <CloseTokenAccountDialog\n        open={closeTokenAccountDialogOpen}\n        onClose={() => setCloseTokenAccountDialogOpen(false)}\n        balanceInfo={balanceInfo}\n        publicKey={publicKey}\n      />\n    </>\n  );\n}\n\n\nfunction Menu({\n  selectedAccount\n}) {\n  const [sortAccounts, setSortAccounts] = useState(SortAccounts.None);\n  const [showDomains, setShowDomains] = useState(false);\n  const [showEditAccountNameDialog, setShowEditAccountNameDialog] = useState(\n    false,\n  );\n  const [showFtxPayDialog, setShowFtxPayDialog] = useState(false);\n  const [publicKeys, loaded] = useWalletPublicKeys();\n  const wallet = useWallet();\n  const region = useRegion();\n  const isExtensionWidth = useIsExtensionWidth();\n  const iconSize = isExtensionWidth ? 'small' : 'medium';\n  return (\n        <Box align=\"center\">        \n          {selectedAccount &&\n            selectedAccount.name !== 'Main account' &&\n            selectedAccount.name !== 'Hardware wallet' && (\n              <Tooltip title=\"Edit Account Name\" arrow>\n                <IconButton\n                  size={iconSize}\n                  onClick={() => setShowEditAccountNameDialog(true)}\n                >\n                  <EditIcon />\n                </IconButton>\n              </Tooltip>\n            )}\n          <Tooltip title=\"Deposit via FTX Pay\" arrow>\n            <IconButton\n              size={iconSize}\n              onClick={() => setShowFtxPayDialog(true)}\n            >\n              <img\n                title={'FTX Pay'}\n                alt={'FTX Pay'}\n                style={{\n                  width: 20,\n                  height: 20,\n                }}\n                src={ftxPayIcon}\n              />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"See your domains\" arrow>\n            <IconButton size={iconSize} onClick={() => setShowDomains(true)}>\n              <DnsIcon />\n            </IconButton>\n          </Tooltip>\n          <DomainsList open={showDomains} setOpen={setShowDomains} />\n          {region.result && !region.result.isRestricted && <SwapButton size={iconSize} />}\n          {/*\n          <Tooltip title=\"Migrate Tokens\" arrow>\n            <IconButton\n              size={iconSize}\n              onClick={() => setShowMergeAccounts(true)}\n            >\n              <MergeType />\n            </IconButton>\n          </Tooltip>\n          */}\n          {/*\n          <Tooltip title=\"Add Token\" arrow>\n            <IconButton\n              size={iconSize}\n              onClick={() => setShowAddTokenDialog(true)}\n            >\n              <AddIcon />\n            </IconButton>\n          </Tooltip>\n          */}\n          <Tooltip title=\"Sort Tokens\" arrow>\n            <IconButton\n              size={iconSize}\n              onClick={() => {\n                switch (sortAccounts) {\n                  case SortAccounts.None:\n                    setSortAccounts(SortAccounts.Ascending);\n                    return;\n                  case SortAccounts.Ascending:\n                    setSortAccounts(SortAccounts.Descending);\n                    return;\n                  case SortAccounts.Descending:\n                    setSortAccounts(SortAccounts.None);\n                    return;\n                  default:\n                    console.error('invalid sort type', sortAccounts);\n                }\n              }}\n            >\n              <SortIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Refresh\" arrow>\n            <IconButton\n              size={iconSize}\n              onClick={() => {\n                refreshWalletPublicKeys(wallet);\n                publicKeys.map((publicKey) =>\n                  refreshAccountInfo(wallet.connection, publicKey, true),\n                );\n              }}\n              style={{ marginRight: -12 }}\n            >\n              <RefreshIcon />\n            </IconButton>\n          </Tooltip>        \n      </Box>\n  )\n}\n\nfunction AccountBalance({\n  allTokensLoaded,\n  totalUsdValue,\n  selectedAccount\n}) {\n  const [isCopied, setIsCopied] = useState(false);\n  const [showFtxPayDialog, setShowFtxPayDialog] = useState(false);\n\n  const styles = {\n    balance: {\n      fontSize: '28px',\n      fontWeight: 'bold',\n      lineHeight: '40px',            \n    }\n  }\n\n  return (\n    <Box align=\"center\" py={5}>            \n      <Box mb={2}>\n        <Typography variant=\"h3\">Portfolio</Typography>      \n      </Box>\n      <Box mb={2}>\n        {allTokensLoaded\n          ? <Typography variant=\"h2\" style={styles.balance}>{numberFormat.format(totalUsdValue.toFixed(2))}</Typography>\n          :<CircularProgress disableShrink />\n        }\n      </Box>\n      <CopyToClipboard\n        text={selectedAccount && selectedAccount.address.toBase58()}\n        onCopy={() => {\n          setIsCopied(true);\n          setTimeout(() => {\n            setIsCopied(false);\n          }, 1000);\n        }}\n      >\n        <Tooltip\n          title={\n            <Typography variant=\"paragraph\"> \n              {isCopied ? 'Copied' : 'Copy to clipboard'}\n            </Typography>\n          }                \n        >\n          <Typography variant=\"caption\" hover={true} >\n            {selectedAccount && selectedAccount.name}                  \n          </Typography>                \n        </Tooltip>\n      </CopyToClipboard>\n      <Box sx={{\n        display: 'flex',\n        justifyContent: 'center',\n        p: 1,\n        m: 1,        \n        borderRadius: 1,\n      }}>        \n      </Box>\n    </Box>\n  )\n}\n","import React, { useState } from 'react';\nimport {\n  Typography,\n  Paper,\n  ListItemText,\n  ListItem,\n  List,\n  Button,\n  Collapse,\n  ListItemIcon,\n  Toolbar,\n  AppBar,\n  InputLabel,\n  TextField,\n  FormControlLabel,\n  Checkbox,\n} from '@material-ui/core';\nimport LoadingIndicator from './LoadingIndicator';\nimport SendIcon from '@material-ui/icons/Send';\nimport { useUserDomains } from '../utils/name-service';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { PublicKey, Transaction } from '@solana/web3.js';\nimport DnsIcon from '@material-ui/icons/Dns';\nimport Modal from '@material-ui/core/Modal';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport GavelIcon from '@material-ui/icons/Gavel';\nimport { signAndSendTransaction } from '../utils/tokens';\nimport { useSnackbar } from 'notistack';\nimport { SOL_TLD_AUTHORITY } from '../utils/name-service';\nimport { transferNameOwnership } from '@bonfida/spl-name-service';\nimport { useConnection } from '../utils/connection';\nimport { useWallet } from '../utils/wallet';\nimport { refreshCache } from '../utils/fetch-loop';\nimport tuple from 'immutable-tuple';\n\nconst useStyles = makeStyles((theme) => ({\n  address: {\n    textOverflow: 'ellipsis',\n    overflowX: 'hidden',\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  itemDetails: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  text: {\n    color: 'white',\n    fontSize: 24,\n    marginTop: '2%',\n    marginBottom: '2%',\n    opacity: 0.8,\n  },\n  input: {\n    color: 'white',\n    fontWeight: 600,\n    width: 500,\n  },\n  transferContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 10,\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  paper: {\n    width: '50%',\n    height: '80%',\n    overflowY: 'scroll',\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n}));\n\nconst TransferDialog = ({\n  domainName,\n  open,\n  setOpen,\n}: {\n  domainName: string;\n  open: boolean;\n  setOpen: (args: boolean) => void;\n}) => {\n  const classes = useStyles();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [checked, setChecked] = useState(false);\n  const [newOwner, setNewOwner] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const onChange = (e) => {\n    setNewOwner(e.target.value.trim());\n  };\n  const canSumbit = newOwner && checked;\n  const onClick = async () => {\n    if (!newOwner) {\n      return enqueueSnackbar('Invalid input', { variant: 'error' });\n    }\n    let newOwnerPubkey: PublicKey;\n    try {\n      newOwnerPubkey = new PublicKey(newOwner);\n    } catch {\n      return enqueueSnackbar('Invalid input', { variant: 'error' });\n    }\n    try {\n      setLoading(true);\n      const instructions = await transferNameOwnership(\n        connection,\n        domainName,\n        newOwnerPubkey,\n        undefined,\n        SOL_TLD_AUTHORITY,\n      );\n      await signAndSendTransaction(\n        connection,\n        new Transaction().add(instructions),\n        wallet,\n        [],\n      );\n      enqueueSnackbar('Domain name transfered', { variant: 'success' });\n      setOpen(false);\n    } catch (err) {\n      console.warn(`Error transferring domain name ${err}`);\n      return enqueueSnackbar('Error transferring domain name', {\n        variant: 'error',\n      });\n    } finally {\n      refreshCache(tuple('useUserDomain', wallet?.publicKey?.toBase58()));\n      setLoading(false);\n    }\n  };\n  return (\n    <Modal\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n      open={open}\n      onClose={() => setOpen(false)}\n    >\n      <Paper>\n        <AppBar position=\"sticky\" elevation={1}>\n          <Toolbar>\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }} component=\"h2\">\n              Ownership transfer\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <div className={classes.transferContainer}>\n          <div>\n            <InputLabel className={classes.text} shrink>\n              New Owner\n            </InputLabel>\n            <TextField\n              placeholder=\"New owner\"\n              InputProps={{\n                className: classes.input,\n              }}\n              value={newOwner}\n              onChange={onChange}\n            />\n          </div>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={checked}\n                onChange={(e) => setChecked(e.target.checked)}\n              />\n            }\n            label={\n              <Typography variant=\"body2\">\n                I understand that transferring ownership is irreversible\n              </Typography>\n            }\n          />\n          <Button\n            onClick={onClick}\n            disabled={!canSumbit || loading}\n            variant=\"outlined\"\n            color=\"primary\"\n            style={{ padding: 10 }}\n          >\n            {loading ? <LoadingIndicator height=\"10px\" /> : 'Transfer'}\n          </Button>\n        </div>\n      </Paper>\n    </Modal>\n  );\n};\n\nconst DomainListItemDetails = ({ domainName }: { domainName: string }) => {\n  const classes = useStyles();\n  const [transferVisible, setTransferVisible] = useState(false);\n  return (\n    <>\n      <div className={classes.buttonContainer}>\n        <Button\n          onClick={() => setTransferVisible(true)}\n          startIcon={<SendIcon />}\n          variant=\"outlined\"\n          color=\"primary\"\n        >\n          Transfer\n        </Button>\n        <TransferDialog\n          domainName={domainName}\n          open={transferVisible}\n          setOpen={setTransferVisible}\n        />\n        <Button\n          onClick={() =>\n            window.open(\n              `https://naming.bonfida.org/#/domain-registration/${domainName}`,\n              '_blank',\n            )\n          }\n          startIcon={<GavelIcon />}\n          variant=\"outlined\"\n          color=\"secondary\"\n        >\n          Sell\n        </Button>\n      </div>\n    </>\n  );\n};\n\nconst DomainListItem = ({\n  domainName,\n  domainKey,\n}: {\n  domainName: string;\n  domainKey: PublicKey;\n}) => {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  return (\n    <>\n      <ListItem onClick={() => setOpen((prev) => !prev)}>\n        <ListItemIcon>\n          <DnsIcon />\n        </ListItemIcon>\n        <ListItemText\n          primary={`${domainName}.sol`}\n          secondary={domainKey.toBase58()}\n          secondaryTypographyProps={{ className: classes.address }}\n        />\n        {open ? <ExpandLess /> : <ExpandMore />}\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <DomainListItemDetails domainName={domainName} />\n      </Collapse>\n    </>\n  );\n};\n\nconst DomainsList = () => {\n  const [userDomains, userDomainsLoaded] = useUserDomains();\n  if (!userDomainsLoaded) {\n    return <LoadingIndicator />;\n  }\n  if (userDomainsLoaded && userDomains?.length === 0) {\n    return (\n      <Typography variant=\"body1\" align=\"center\">\n        You don't own any domain\n      </Typography>\n    );\n  }\n  return (\n    <>\n      <List>\n        {userDomains?.map((d) => {\n          return (\n            <DomainListItem\n              key={d.nameKey.toBase58()}\n              domainName={d.name}\n              domainKey={d.nameKey}\n            />\n          );\n        })}\n      </List>\n    </>\n  );\n};\n\nconst DomainDialog = ({\n  open,\n  setOpen,\n}: {\n  open: boolean;\n  setOpen: (arg: boolean) => void;\n}) => {\n  const classes = useStyles();\n  return (\n    <Modal open={open} onClose={() => setOpen(false)} className={classes.modal}>\n      <Paper className={classes.paper}>\n        <AppBar position=\"sticky\" color=\"default\" elevation={1}>\n          <Toolbar>\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }} component=\"h2\">\n              Your domains\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <DomainsList />\n      </Paper>\n    </Modal>\n  );\n};\n\nexport default DomainDialog;\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nexport default function DialogForm({\n  open,\n  onClose,\n  onSubmit,\n  children,\n  ...rest\n}) {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'));\n\n  return (\n    <Dialog\n      open={open}\n      PaperProps={{\n        component: 'form',\n        onSubmit: (e) => {\n          e.preventDefault();\n          if (onSubmit) {\n            onSubmit();\n          }\n        },\n      }}\n      onClose={onClose}\n      fullScreen={fullScreen}\n      {...rest}\n    >\n      {children}\n    </Dialog>\n  );\n}\n","import assert from 'assert';\nimport { useEffect, useReducer } from 'react';\nimport tuple from 'immutable-tuple';\n\nconst pageLoadTime = new Date();\n\nconst globalCache: Map<any, any> = new Map();\nconst errorCache: Map<any, any> = new Map();\n\nclass FetchLoops {\n  loops = new Map();\n\n  addListener(listener) {\n    if (!this.loops.has(listener.cacheKey)) {\n      this.loops.set(\n        listener.cacheKey,\n        new FetchLoopInternal(listener.cacheKey, listener.fn),\n      );\n    }\n    this.loops.get(listener.cacheKey).addListener(listener);\n  }\n\n  removeListener(listener) {\n    let loop = this.loops.get(listener.cacheKey);\n    loop.removeListener(listener);\n    if (loop.stopped) {\n      this.loops.delete(listener.cacheKey);\n    }\n  }\n\n  refresh(cacheKey) {\n    if (this.loops.has(cacheKey)) {\n      this.loops.get(cacheKey).refresh();\n    }\n  }\n\n  refreshAll() {\n    return Promise.all([...this.loops.values()].map((loop) => loop.refresh()));\n  }\n}\nconst globalLoops = new FetchLoops();\n\nclass FetchLoopListener<T = any> {\n  cacheKey: any;\n  fn: () => Promise<T>;\n  refreshInterval: number;\n  callback: () => void;\n\n  constructor(\n    cacheKey: any,\n    fn: () => Promise<T>,\n    refreshInterval: number,\n    callback: () => void,\n  ) {\n    this.cacheKey = cacheKey;\n    this.fn = fn;\n    this.refreshInterval = refreshInterval;\n    this.callback = callback;\n  }\n}\n\nclass FetchLoopInternal<T = any> {\n  cacheKey: any;\n  fn: () => Promise<T>;\n  timeoutId: null | any;\n  listeners: Set<FetchLoopListener<T>>;\n  errors: number;\n\n  constructor(cacheKey: any, fn: () => Promise<T>) {\n    this.cacheKey = cacheKey;\n    this.fn = fn;\n    this.timeoutId = null;\n    this.listeners = new Set();\n    this.errors = 0;\n  }\n\n  get refreshInterval(): number {\n    return Math.min(\n      ...[...this.listeners].map((listener) => listener.refreshInterval),\n    );\n  }\n\n  get stopped(): boolean {\n    return this.listeners.size === 0;\n  }\n\n  addListener(listener: FetchLoopListener<T>): void {\n    const previousRefreshInterval = this.refreshInterval;\n    this.listeners.add(listener);\n    if (this.refreshInterval < previousRefreshInterval) {\n      this.refresh();\n    }\n  }\n\n  removeListener(listener: FetchLoopListener<T>): void {\n    assert(this.listeners.delete(listener));\n    if (this.stopped) {\n      if (this.timeoutId) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = null;\n      }\n    }\n  }\n\n  notifyListeners(): void {\n    this.listeners.forEach((listener) => listener.callback());\n  }\n\n  refresh = async () => {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n    if (this.stopped) {\n      return;\n    }\n\n    try {\n      const data = await this.fn();\n      globalCache.set(this.cacheKey, data);\n      errorCache.delete(this.cacheKey);\n      this.errors = 0;\n      return data;\n    } catch (error) {\n      ++this.errors;\n      globalCache.delete(this.cacheKey);\n      errorCache.set(this.cacheKey, error);\n      console.warn(error);\n    } finally {\n      this.notifyListeners();\n      if (!this.timeoutId && !this.stopped) {\n        let waitTime = this.refreshInterval;\n\n        // Back off on errors.\n        if (this.errors > 0) {\n          waitTime = Math.min(1000 * 2 ** (this.errors - 1), 60000);\n        }\n\n        // Don't do any refreshing for the first five seconds, to make way for other things to load.\n        const timeSincePageLoad = +new Date() - +pageLoadTime;\n        if (timeSincePageLoad < 5000) {\n          waitTime += 5000 - timeSincePageLoad / 2;\n        }\n\n        // Refresh background pages slowly.\n        if (document.visibilityState === 'hidden') {\n          waitTime = 60000;\n        } else if (!document.hasFocus()) {\n          waitTime *= 1.5;\n        }\n\n        // Add jitter so we don't send all requests at the same time.\n        waitTime *= 0.8 + 0.4 * Math.random();\n\n        this.timeoutId = setTimeout(this.refresh, waitTime);\n      }\n    }\n  };\n}\n\n// returns [data, loaded, error]\n// loaded is false when error is present for backwards compatibility\nexport function useAsyncData<T = any>(\n  asyncFn: () => Promise<T>,\n  cacheKey: any,\n  { refreshInterval = 60000 } = {},\n): [null | undefined | T, boolean, any] {\n  const [, rerender] = useReducer((i) => i + 1, 0);\n  cacheKey = formatCacheKey(cacheKey);\n\n  useEffect(() => {\n    if (!cacheKey) {\n      return;\n    }\n    const listener = new FetchLoopListener<T>(\n      cacheKey,\n      asyncFn,\n      refreshInterval,\n      rerender,\n    );\n    globalLoops.addListener(listener);\n    return () => globalLoops.removeListener(listener);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cacheKey, refreshInterval]);\n\n  if (!cacheKey) {\n    return [null, false, undefined];\n  }\n\n  const loaded = globalCache.has(cacheKey);\n  const error = errorCache.has(cacheKey) ? errorCache.get(cacheKey) : undefined;\n  const data = loaded ? globalCache.get(cacheKey) : undefined;\n  return [data, loaded, error];\n}\n\nexport function refreshCache(cacheKey, clearCache = false) {\n  cacheKey = formatCacheKey(cacheKey);\n  if (clearCache) {\n    globalCache.delete(cacheKey);\n  }\n  const loop = globalLoops.loops.get(cacheKey);\n  if (loop) {\n    loop.refresh();\n    if (clearCache) {\n      loop.notifyListeners();\n    }\n  }\n}\n\nexport function setCache(cacheKey, value, { initializeOnly = false } = {}) {\n  cacheKey = formatCacheKey(cacheKey);\n  if (initializeOnly && globalCache.has(cacheKey)) {\n    return;\n  }\n  globalCache.set(cacheKey, value);\n  const loop = globalLoops.loops.get(cacheKey);\n  if (loop) {\n    loop.notifyListeners();\n  }\n}\n\nfunction formatCacheKey(cacheKey) {\n  if (Array.isArray(cacheKey)) {\n    return tuple(...cacheKey);\n  }\n  return cacheKey;\n}\n","import { LocalStorageWalletProvider } from './localStorage';\nimport { LedgerWalletProvider } from './ledger';\n\nexport class WalletProviderFactory {\n  static getProvider(type, args) {\n    if (type === 'local') {\n      return new LocalStorageWalletProvider(args);\n    }\n\n    if (type === 'ledger') {\n      return new LedgerWalletProvider(args);\n    }\n  }\n}\n","import { pbkdf2 } from 'crypto';\nimport { randomBytes, secretbox } from 'tweetnacl';\nimport * as bip32 from 'bip32';\nimport bs58 from 'bs58';\nimport { EventEmitter } from 'events';\nimport { isExtension } from './utils';\nimport { useEffect, useState } from 'react';\n\nexport function normalizeMnemonic(mnemonic) {\n  return mnemonic.trim().split(/\\s+/g).join(\" \");\n}\n\nexport async function generateMnemonicAndSeed() {\n  const bip39 = await import('bip39');\n  const mnemonic = bip39.generateMnemonic(256);\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return { mnemonic, seed: Buffer.from(seed).toString('hex') };\n}\n\nexport async function mnemonicToSeed(mnemonic) {\n  const bip39 = await import('bip39');\n  if (!bip39.validateMnemonic(mnemonic)) {\n    throw new Error('Invalid seed words');\n  }\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return Buffer.from(seed).toString('hex');\n}\n\nasync function getExtensionUnlockedMnemonic() {\n  if (!isExtension) {\n    return null;\n  }\n\n  return new Promise((resolve) => {\n    chrome.runtime.sendMessage({\n      channel: 'sollet_extension_mnemonic_channel',\n      method: 'get',\n    }, resolve);\n  })\n}\n\nconst EMPTY_MNEMONIC = {\n  mnemonic: null,\n  seed: null,\n  importsEncryptionKey: null,\n  derivationPath: null,\n};\n\nlet unlockedMnemonicAndSeed = (async () => {\n  const unlockedExpiration = localStorage.getItem('unlockedExpiration');\n  // Left here to clean up stored mnemonics from previous method\n  if (unlockedExpiration && Number(unlockedExpiration) < Date.now()) {\n    localStorage.removeItem('unlocked');\n    localStorage.removeItem('unlockedExpiration');\n  }\n  const stored = JSON.parse(\n    (await getExtensionUnlockedMnemonic()) ||\n    sessionStorage.getItem('unlocked') ||\n      localStorage.getItem('unlocked') ||\n      'null',\n  );\n  if (stored === null) {\n    return EMPTY_MNEMONIC;\n  }\n  return {\n    importsEncryptionKey: deriveImportsEncryptionKey(stored.seed),\n    ...stored,\n  };\n})();\n\nexport const walletSeedChanged = new EventEmitter();\n\nexport function getUnlockedMnemonicAndSeed() {\n  return unlockedMnemonicAndSeed;\n}\n\n// returns [mnemonic, loading]\nexport function useUnlockedMnemonicAndSeed() {\n  const [currentUnlockedMnemonic, setCurrentUnlockedMnemonic] = useState(null);\n  \n  useEffect(() => {\n    walletSeedChanged.addListener('change', setCurrentUnlockedMnemonic);\n    unlockedMnemonicAndSeed.then(setCurrentUnlockedMnemonic);\n    return () => {\n      walletSeedChanged.removeListener('change', setCurrentUnlockedMnemonic);\n    }\n  }, []);\n\n  return !currentUnlockedMnemonic\n    ? [EMPTY_MNEMONIC, true]\n    : [currentUnlockedMnemonic, false];\n}\n\nexport function useHasLockedMnemonicAndSeed() {\n  const [unlockedMnemonic, loading] = useUnlockedMnemonicAndSeed();\n\n  return [!unlockedMnemonic.seed && !!localStorage.getItem('locked'), loading];\n}\n\nfunction setUnlockedMnemonicAndSeed(\n  mnemonic,\n  seed,\n  importsEncryptionKey,\n  derivationPath,\n) {\n  const data = {\n    mnemonic,\n    seed,\n    importsEncryptionKey,\n    derivationPath,\n  };\n  unlockedMnemonicAndSeed = Promise.resolve(data);\n  walletSeedChanged.emit('change', data);\n}\n\nexport async function storeMnemonicAndSeed(\n  mnemonic,\n  seed,\n  password,\n  derivationPath,\n) {\n  const plaintext = JSON.stringify({ mnemonic, seed, derivationPath });\n  if (password) {\n    const salt = randomBytes(16);\n    const kdf = 'pbkdf2';\n    const iterations = 100000;\n    const digest = 'sha256';\n    const key = await deriveEncryptionKey(password, salt, iterations, digest);\n    const nonce = randomBytes(secretbox.nonceLength);\n    const encrypted = secretbox(Buffer.from(plaintext), nonce, key);\n    localStorage.setItem(\n      'locked',\n      JSON.stringify({\n        encrypted: bs58.encode(encrypted),\n        nonce: bs58.encode(nonce),\n        kdf,\n        salt: bs58.encode(salt),\n        iterations,\n        digest,\n      }),\n    );\n    localStorage.removeItem('unlocked');\n  } else {\n    localStorage.setItem('unlocked', plaintext);\n    localStorage.removeItem('locked');\n  }\n  sessionStorage.removeItem('unlocked');\n  if (isExtension) {\n    chrome.runtime.sendMessage({\n      channel: 'sollet_extension_mnemonic_channel',\n      method: 'set',\n      data: '',\n    });\n  }\n  const importsEncryptionKey = deriveImportsEncryptionKey(seed);\n  setUnlockedMnemonicAndSeed(\n    mnemonic,\n    seed,\n    importsEncryptionKey,\n    derivationPath,\n  );\n}\n\nexport async function loadMnemonicAndSeed(password, stayLoggedIn) {\n  const {\n    encrypted: encodedEncrypted,\n    nonce: encodedNonce,\n    salt: encodedSalt,\n    iterations,\n    digest,\n  } = JSON.parse(localStorage.getItem('locked'));\n  const encrypted = bs58.decode(encodedEncrypted);\n  const nonce = bs58.decode(encodedNonce);\n  const salt = bs58.decode(encodedSalt);\n  const key = await deriveEncryptionKey(password, salt, iterations, digest);\n  const plaintext = secretbox.open(encrypted, nonce, key);\n  if (!plaintext) {\n    throw new Error('Incorrect password');\n  }\n  const decodedPlaintext = Buffer.from(plaintext).toString();\n  const { mnemonic, seed, derivationPath } = JSON.parse(decodedPlaintext);\n  if (stayLoggedIn) {\n    if (isExtension) {\n      chrome.runtime.sendMessage({\n        channel: 'sollet_extension_mnemonic_channel',\n        method: 'set',\n        data: decodedPlaintext,\n      });\n    } else {\n      sessionStorage.setItem('unlocked', decodedPlaintext);\n    }\n  }\n  const importsEncryptionKey = deriveImportsEncryptionKey(seed);\n  setUnlockedMnemonicAndSeed(\n    mnemonic,\n    seed,\n    importsEncryptionKey,\n    derivationPath,\n  );\n  return { mnemonic, seed, derivationPath };\n}\n\nasync function deriveEncryptionKey(password, salt, iterations, digest) {\n  return new Promise((resolve, reject) =>\n    pbkdf2(\n      password,\n      salt,\n      iterations,\n      secretbox.keyLength,\n      digest,\n      (err, key) => (err ? reject(err) : resolve(key)),\n    ),\n  );\n}\n\nexport function lockWallet() {\n  setUnlockedMnemonicAndSeed(null, null, null, null);\n}\n\n// Returns the 32 byte key used to encrypt imported private keys.\nfunction deriveImportsEncryptionKey(seed) {\n  // SLIP16 derivation path.\n  return bip32.fromSeed(Buffer.from(seed, 'hex')).derivePath(\"m/10016'/0\")\n    .privateKey;\n}\n\nexport function forgetWallet() {\n  localStorage.clear();\n  sessionStorage.removeItem('unlocked');\n  if (isExtension) {\n    chrome.runtime.sendMessage({\n      channel: 'sollet_extension_mnemonic_channel',\n      method: 'set',\n      data: '',\n    });\n  }\n  unlockedMnemonicAndSeed = {\n    mnemonic: null,\n    seed: null,\n    importsEncryptionKey: null,\n  };\n  walletSeedChanged.emit('change', unlockedMnemonicAndSeed);\n  if (isExtension) {\n    // Must use wrapper function for window.location.reload\n    chrome.storage.local.clear(() => window.location.reload());\n  } else {\n    window.location.reload();\n  }\n}\n","/*\n * ed2curve: convert Ed25519 signing key pair into Curve25519\n * key pair suitable for Diffie-Hellman key exchange.\n *\n * Written by Dmitry Chestnykh in 2014. Public domain.\n */\n/* jshint newcap: false */\n(function (root, f) {\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  if (typeof module !== 'undefined' && module.exports)\n    module.exports = f(require('tweetnacl'));\n  else root.ed2curve = f(root.nacl);\n})(this, function (nacl) {\n  if (!nacl) throw new Error('tweetnacl not loaded');\n\n  // -- Operations copied from TweetNaCl.js. --\n\n  var gf = function (init) {\n    var i,\n      r = new Float64Array(16);\n    if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n    return r;\n  };\n\n  var gf0 = gf(),\n    gf1 = gf([1]),\n    D = gf([\n      0x78a3,\n      0x1359,\n      0x4dca,\n      0x75eb,\n      0xd8ab,\n      0x4141,\n      0x0a4d,\n      0x0070,\n      0xe898,\n      0x7779,\n      0x4079,\n      0x8cc7,\n      0xfe73,\n      0x2b6f,\n      0x6cee,\n      0x5203,\n    ]),\n    I = gf([\n      0xa0b0,\n      0x4a0e,\n      0x1b27,\n      0xc4ee,\n      0xe478,\n      0xad2f,\n      0x1806,\n      0x2f43,\n      0xd7a7,\n      0x3dfb,\n      0x0099,\n      0x2b4d,\n      0xdf0b,\n      0x4fc1,\n      0x2480,\n      0x2b83,\n    ]);\n\n  function car25519(o) {\n    var c;\n    var i;\n    for (i = 0; i < 16; i++) {\n      o[i] += 65536;\n      c = Math.floor(o[i] / 65536);\n      o[(i + 1) * (i < 15 ? 1 : 0)] +=\n        c - 1 + 37 * (c - 1) * (i === 15 ? 1 : 0);\n      o[i] -= c * 65536;\n    }\n  }\n\n  function sel25519(p, q, b) {\n    var t,\n      c = ~(b - 1);\n    for (var i = 0; i < 16; i++) {\n      t = c & (p[i] ^ q[i]);\n      p[i] ^= t;\n      q[i] ^= t;\n    }\n  }\n\n  function unpack25519(o, n) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = n[2 * i] + (n[2 * i + 1] << 8);\n    o[15] &= 0x7fff;\n  }\n\n  // addition\n  function A(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] + b[i]) | 0;\n  }\n\n  // subtraction\n  function Z(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] - b[i]) | 0;\n  }\n\n  // multiplication\n  function M(o, a, b) {\n    var i,\n      j,\n      t = new Float64Array(31);\n    for (i = 0; i < 31; i++) t[i] = 0;\n    for (i = 0; i < 16; i++) {\n      for (j = 0; j < 16; j++) {\n        t[i + j] += a[i] * b[j];\n      }\n    }\n    for (i = 0; i < 15; i++) {\n      t[i] += 38 * t[i + 16];\n    }\n    for (i = 0; i < 16; i++) o[i] = t[i];\n    car25519(o);\n    car25519(o);\n  }\n\n  // squaring\n  function S(o, a) {\n    M(o, a, a);\n  }\n\n  // inversion\n  function inv25519(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 253; a >= 0; a--) {\n      S(c, c);\n      if (a !== 2 && a !== 4) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function pack25519(o, n) {\n    var i, j, b;\n    var m = gf(),\n      t = gf();\n    for (i = 0; i < 16; i++) t[i] = n[i];\n    car25519(t);\n    car25519(t);\n    car25519(t);\n    for (j = 0; j < 2; j++) {\n      m[0] = t[0] - 0xffed;\n      for (i = 1; i < 15; i++) {\n        m[i] = t[i] - 0xffff - ((m[i - 1] >> 16) & 1);\n        m[i - 1] &= 0xffff;\n      }\n      m[15] = t[15] - 0x7fff - ((m[14] >> 16) & 1);\n      b = (m[15] >> 16) & 1;\n      m[14] &= 0xffff;\n      sel25519(t, m, 1 - b);\n    }\n    for (i = 0; i < 16; i++) {\n      o[2 * i] = t[i] & 0xff;\n      o[2 * i + 1] = t[i] >> 8;\n    }\n  }\n\n  function par25519(a) {\n    var d = new Uint8Array(32);\n    pack25519(d, a);\n    return d[0] & 1;\n  }\n\n  function vn(x, xi, y, yi, n) {\n    var i,\n      d = 0;\n    for (i = 0; i < n; i++) d |= x[xi + i] ^ y[yi + i];\n    return (1 & ((d - 1) >>> 8)) - 1;\n  }\n\n  function crypto_verify_32(x, xi, y, yi) {\n    return vn(x, xi, y, yi, 32);\n  }\n\n  function neq25519(a, b) {\n    var c = new Uint8Array(32),\n      d = new Uint8Array(32);\n    pack25519(c, a);\n    pack25519(d, b);\n    return crypto_verify_32(c, 0, d, 0);\n  }\n\n  function pow2523(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if (a !== 1) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function set25519(r, a) {\n    var i;\n    for (i = 0; i < 16; i++) r[i] = a[i] | 0;\n  }\n\n  function unpackneg(r, p) {\n    var t = gf(),\n      chk = gf(),\n      num = gf(),\n      den = gf(),\n      den2 = gf(),\n      den4 = gf(),\n      den6 = gf();\n\n    set25519(r[2], gf1);\n    unpack25519(r[1], p);\n    S(num, r[1]);\n    M(den, num, D);\n    Z(num, num, r[2]);\n    A(den, r[2], den);\n\n    S(den2, den);\n    S(den4, den2);\n    M(den6, den4, den2);\n    M(t, den6, num);\n    M(t, t, den);\n\n    pow2523(t, t);\n    M(t, t, num);\n    M(t, t, den);\n    M(t, t, den);\n    M(r[0], t, den);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) M(r[0], r[0], I);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) return -1;\n\n    if (par25519(r[0]) === p[31] >> 7) Z(r[0], gf0, r[0]);\n\n    M(r[3], r[0], r[1]);\n    return 0;\n  }\n\n  // ----\n\n  // Converts Ed25519 public key to Curve25519 public key.\n  // montgomeryX = (edwardsY + 1)*inverse(1 - edwardsY) mod p\n  function convertPublicKey(pk) {\n    var z = new Uint8Array(32),\n      q = [gf(), gf(), gf(), gf()],\n      a = gf(),\n      b = gf();\n\n    if (unpackneg(q, pk)) return null; // reject invalid key\n\n    var y = q[1];\n\n    A(a, gf1, y);\n    Z(b, gf1, y);\n    inv25519(b, b);\n    M(a, a, b);\n\n    pack25519(z, a);\n    return z;\n  }\n\n  // Converts Ed25519 secret key to Curve25519 secret key.\n  function convertSecretKey(sk) {\n    var d = new Uint8Array(64),\n      o = new Uint8Array(32),\n      i;\n    nacl.lowlevel.crypto_hash(d, sk, 32);\n    d[0] &= 248;\n    d[31] &= 127;\n    d[31] |= 64;\n    for (i = 0; i < 32; i++) o[i] = d[i];\n    for (i = 0; i < 64; i++) d[i] = 0;\n    return o;\n  }\n\n  function convertKeyPair(edKeyPair) {\n    var publicKey = convertPublicKey(edKeyPair.publicKey);\n    if (!publicKey) return null;\n    return {\n      publicKey: publicKey,\n      secretKey: convertSecretKey(edKeyPair.secretKey),\n    };\n  }\n\n  return {\n    convertPublicKey: convertPublicKey,\n    convertSecretKey: convertSecretKey,\n    convertKeyPair: convertKeyPair,\n  };\n});\n","import * as BufferLayout from 'buffer-layout';\nimport {\n  PublicKey,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport const TOKEN_PROGRAM_ID = new PublicKey(\n  'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n);\n\nexport const WRAPPED_SOL_MINT = new PublicKey(\n  'So11111111111111111111111111111111111111112',\n);\n\nexport const MEMO_PROGRAM_ID = new PublicKey(\n  'Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo',\n);\n\nconst LAYOUT = BufferLayout.union(BufferLayout.u8('instruction'));\nLAYOUT.addVariant(\n  0,\n  BufferLayout.struct([\n    BufferLayout.u8('decimals'),\n    BufferLayout.blob(32, 'mintAuthority'),\n    BufferLayout.u8('freezeAuthorityOption'),\n    BufferLayout.blob(32, 'freezeAuthority'),\n  ]),\n  'initializeMint',\n);\nLAYOUT.addVariant(1, BufferLayout.struct([]), 'initializeAccount');\nLAYOUT.addVariant(\n  7,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'mintTo',\n);\nLAYOUT.addVariant(\n  8,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'burn',\n);\nLAYOUT.addVariant(9, BufferLayout.struct([]), 'closeAccount');\nLAYOUT.addVariant(\n  12,\n  BufferLayout.struct([BufferLayout.nu64('amount'), BufferLayout.u8('decimals')]),\n  'transferChecked',\n);\n\nconst instructionMaxSpan = Math.max(\n  ...Object.values(LAYOUT.registry).map((r) => r.span),\n);\n\nfunction encodeTokenInstructionData(instruction) {\n  let b = Buffer.alloc(instructionMaxSpan);\n  let span = LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function initializeMint({\n  mint,\n  decimals,\n  mintAuthority,\n  freezeAuthority,\n}) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeMint: {\n        decimals,\n        mintAuthority: mintAuthority.toBuffer(),\n        freezeAuthorityOption: !!freezeAuthority,\n        freezeAuthority: (freezeAuthority || PublicKey.default).toBuffer(),\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function initializeAccount({ account, mint, owner }) {\n  let keys = [\n    { pubkey: account, isSigner: false, isWritable: true },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: owner, isSigner: false, isWritable: false },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeAccount: {},\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function transferChecked({ source, mint, destination, amount, decimals, owner }) {\n  let keys = [\n    { pubkey: source, isSigner: false, isWritable: true },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      transferChecked: { amount, decimals },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function mintTo({ mint, destination, amount, mintAuthority }) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: mintAuthority, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      mintTo: {\n        amount,\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function closeAccount({ source, destination, owner }) {\n  const keys = [\n    { pubkey: source, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      closeAccount: {},\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function memoInstruction(memo) {\n  return new TransactionInstruction({\n    keys: [],\n    data: Buffer.from(memo, 'utf-8'),\n    programId: MEMO_PROGRAM_ID,\n  });\n}\n\nclass PublicKeyLayout extends BufferLayout.Blob {\n  constructor(property) {\n    super(32, property);\n  }\n\n  decode(b, offset) {\n    return new PublicKey(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n}\n\nfunction publicKeyLayout(property) {\n  return new PublicKeyLayout(property);\n}\n\nexport const OWNER_VALIDATION_PROGRAM_ID = new PublicKey(\n  '4MNPdKu9wFMvEeZBMt3Eipfs5ovVWTJb31pEXDJAAxX5',\n);\n\nexport const OWNER_VALIDATION_LAYOUT = BufferLayout.struct([\n  publicKeyLayout('account'),\n]);\n\nexport function encodeOwnerValidationInstruction(instruction) {\n  const b = Buffer.alloc(OWNER_VALIDATION_LAYOUT.span);\n  const span = OWNER_VALIDATION_LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function assertOwner({ account, owner }) {\n  const keys = [{ pubkey: account, isSigner: false, isWritable: false }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeOwnerValidationInstruction({ account: owner }),\n    programId: OWNER_VALIDATION_PROGRAM_ID,\n  });\n}\n","import React, { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport { useConnection, useSolanaExplorerUrlSuffix } from './connection';\nimport Button from '@material-ui/core/Button';\nimport { confirmTransaction } from './utils';\n\nexport function useSendTransaction() {\n  const connection = useConnection();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const [sending, setSending] = useState(false);\n\n  async function sendTransaction(\n    signaturePromise,\n    { onSuccess, onError } = {},\n  ) {\n    let id = enqueueSnackbar('Sending transaction...', {\n      variant: 'info',\n      persist: true,\n    });\n    setSending(true);\n    try {\n      let signature = await signaturePromise;\n      closeSnackbar(id);\n      id = enqueueSnackbar('Confirming transaction...', {\n        variant: 'info',\n        persist: true,\n        action: <ViewTransactionOnExplorerButton signature={signature} />,\n      });\n      await confirmTransaction(connection, signature);\n      closeSnackbar(id);\n      setSending(false);\n      enqueueSnackbar('Transaction confirmed', {\n        variant: 'success',\n        autoHideDuration: 15000,\n        action: <ViewTransactionOnExplorerButton signature={signature} />,\n      });\n      if (onSuccess) {\n        onSuccess(signature);\n      }\n    } catch (e) {\n      closeSnackbar(id);\n      setSending(false);\n      console.warn(e);\n      enqueueSnackbar(e.message, { variant: 'error' });\n      if (onError) {\n        onError(e);\n      }\n    }\n  }\n\n  return [sendTransaction, sending];\n}\n\nfunction ViewTransactionOnExplorerButton({ signature }) {\n  const urlSuffix = useSolanaExplorerUrlSuffix();\n  return (\n    <Button\n      color=\"inherit\"\n      component=\"a\"\n      target=\"_blank\"\n      rel=\"noopener\"\n      href={`https://solscan.io/tx/${signature}` + urlSuffix}\n    >\n      View on Solscan\n    </Button>\n  );\n}\n\nexport function useCallAsync() {\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  return async function callAsync(\n    promise,\n    {\n      progressMessage = 'Submitting...',\n      successMessage = 'Success',\n      onSuccess,\n      onError,\n    } = {},\n  ) {\n    let id = enqueueSnackbar(progressMessage, {\n      variant: 'info',\n      persist: true,\n    });\n    try {\n      let result = await promise;\n      closeSnackbar(id);\n      if (successMessage) {\n        enqueueSnackbar(successMessage, { variant: 'success' });\n      }\n      if (onSuccess) {\n        onSuccess(result);\n      }\n    } catch (e) {\n      console.warn(e);\n      closeSnackbar(id);\n      enqueueSnackbar(e.message, { variant: 'error' });\n      if (onError) {\n        onError(e);\n      }\n    }\n  };\n}\n","import { getUnlockedMnemonicAndSeed } from './../wallet-seed';\nimport * as bip32 from 'bip32';\nimport nacl from 'tweetnacl';\nimport { Account } from '@solana/web3.js';\nimport bs58 from 'bs58';\nimport { derivePath } from 'ed25519-hd-key';\n\nexport const DERIVATION_PATH = {\n  deprecated: undefined,\n  bip44: 'bip44',\n  bip44Change: 'bip44Change',\n  bip44Root: 'bip44Root', // Ledger only.\n};\n\nexport function getAccountFromSeed(\n  seed,\n  walletIndex,\n  dPath = undefined,\n  accountIndex = 0,\n) {\n  const derivedSeed = deriveSeed(seed, walletIndex, dPath, accountIndex);\n  return new Account(nacl.sign.keyPair.fromSeed(derivedSeed).secretKey);\n}\n\nfunction deriveSeed(seed, walletIndex, derivationPath, accountIndex) {\n  switch (derivationPath) {\n    case DERIVATION_PATH.deprecated:\n      const path = `m/501'/${walletIndex}'/0/${accountIndex}`;\n      return bip32.fromSeed(seed).derivePath(path).privateKey;\n    case DERIVATION_PATH.bip44:\n      const path44 = `m/44'/501'/${walletIndex}'`;\n      return derivePath(path44, seed).key;\n    case DERIVATION_PATH.bip44Change:\n      const path44Change = `m/44'/501'/${walletIndex}'/0'`;\n      return derivePath(path44Change, seed).key;\n    default:\n      throw new Error(`invalid derivation path: ${derivationPath}`);\n  }\n}\n\nexport class LocalStorageWalletProvider {\n  constructor(args) {\n    this.account = args.account;\n    this.publicKey = this.account.publicKey;\n  }\n\n  init = async () => {\n    const { seed } = await getUnlockedMnemonicAndSeed();\n    this.listAddresses = async (walletCount) => {\n      const seedBuffer = Buffer.from(seed, 'hex');\n      return [...Array(walletCount).keys()].map((walletIndex) => {\n        let address = getAccountFromSeed(seedBuffer, walletIndex).publicKey;\n        let name = localStorage.getItem(`name${walletIndex}`);\n        return { index: walletIndex, address, name };\n      });\n    };\n    return this;\n  };\n\n  signTransaction = async (transaction) => {\n    transaction.partialSign(this.account);\n    return transaction;\n  };\n\n  createSignature = (message) => {\n    return bs58.encode(nacl.sign.detached(message, this.account.secretKey));\n  };\n}\n","import * as BufferLayout from 'buffer-layout';\nimport { PublicKey } from '@solana/web3.js';\n\nexport const ACCOUNT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(32, 'mint'),\n  BufferLayout.blob(32, 'owner'),\n  BufferLayout.nu64('amount'),\n  BufferLayout.blob(93),\n]);\n\nexport const MINT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(44),\n  BufferLayout.u8('decimals'),\n  BufferLayout.blob(37),\n]);\n\nexport function parseTokenAccountData(data) {\n  let { mint, owner, amount } = ACCOUNT_LAYOUT.decode(data);\n  return {\n    mint: new PublicKey(mint),\n    owner: new PublicKey(owner),\n    amount,\n  };\n}\n\nexport function parseMintData(data) {\n  let { decimals } = MINT_LAYOUT.decode(data);\n  return { decimals };\n}\n\nexport function getOwnedAccountsFilters(publicKey) {\n  return [\n    {\n      memcmp: {\n        offset: ACCOUNT_LAYOUT.offsetOf('owner'),\n        bytes: publicKey.toBase58(),\n      },\n    },\n    {\n      dataSize: ACCOUNT_LAYOUT.span,\n    },\n  ];\n}\n","import React, { useContext, useState, useEffect } from 'react';\nimport EventEmitter from 'events';\nimport {\n  useConnectionConfig,\n  MAINNET_URL,\n  MAINNET_BACKUP_URL,\n} from '../connection';\nimport { useListener } from '../utils';\nimport { clusterForEndpoint } from '../clusters';\nimport { useCallback } from 'react';\nimport { PublicKey } from '@solana/web3.js';\nimport { TokenListProvider } from '@solana/spl-token-registry';\n\n// This list is used for deciding what to display in the popular tokens list\n// in the `AddTokenDialog`.\n//\n// Icons, names, and symbols are fetched not from here, but from the\n// @solana/spl-token-registry. To add an icon or token name to the wallet,\n// add the mints to that package. To add a token to the `AddTokenDialog`,\n// add the `mintAddress` here. The rest of the fields are not used.\nconst POPULAR_TOKENS = {\n  [MAINNET_URL]: [\n    {\n      mintAddress: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n      tokenName: 'Serum',\n      tokenSymbol: 'SRM',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png',\n    },\n    {\n      mintAddress: 'MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L',\n      tokenName: 'MegaSerum',\n      tokenSymbol: 'MSRM',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png',\n    },\n    {\n      tokenSymbol: 'BTC',\n      mintAddress: '9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E',\n      tokenName: 'Wrapped Bitcoin',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/bitcoin/info/logo.png',\n    },\n    {\n      tokenSymbol: 'ETH',\n      mintAddress: '2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk',\n      tokenName: 'Wrapped Ethereum',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',\n    },\n    {\n      tokenSymbol: 'FTT',\n      mintAddress: 'AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3',\n      tokenName: 'Wrapped FTT',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0x50D1c9771902476076eCFc8B2A83Ad6b9355a4c9/logo.png',\n    },\n    {\n      tokenSymbol: 'YFI',\n      mintAddress: '3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB',\n      tokenName: 'Wrapped YFI',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e/logo.png',\n    },\n    {\n      tokenSymbol: 'LINK',\n      mintAddress: 'CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG',\n      tokenName: 'Wrapped Chainlink',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png',\n    },\n    {\n      tokenSymbol: 'XRP',\n      mintAddress: 'Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8',\n      tokenName: 'Wrapped XRP',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ripple/info/logo.png',\n    },\n    {\n      tokenSymbol: 'USDT',\n      mintAddress: 'Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB',\n      tokenName: 'USDT',\n      icon:\n        'https://cdn.jsdelivr.net/gh/solana-labs/explorer/public/tokens/usdt.svg',\n    },\n    {\n      tokenSymbol: 'WUSDT',\n      mintAddress: 'BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4',\n      tokenName: 'Wrapped USD Tether',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png',\n    },\n    {\n      tokenSymbol: 'USDC',\n      mintAddress: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      tokenName: 'USD Coin',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png',\n    },\n    {\n      tokenSymbol: 'WUSDC',\n      mintAddress: 'BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW',\n      tokenName: 'Wrapped USDC',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png',\n      deprecated: true,\n    },\n    {\n      tokenSymbol: 'SUSHI',\n      mintAddress: 'AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy',\n      tokenName: 'Wrapped SUSHI',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B3595068778DD592e39A122f4f5a5cF09C90fE2/logo.png',\n    },\n    {\n      tokenSymbol: 'ALEPH',\n      mintAddress: 'CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K',\n      tokenName: 'Wrapped ALEPH',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/6996a371cd02f516506a8f092eeb29888501447c/blockchains/nuls/assets/NULSd6HgyZkiqLnBzTaeSQfx1TNg2cqbzq51h/logo.png',\n    },\n    {\n      tokenSymbol: 'SXP',\n      mintAddress: 'SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX',\n      tokenName: 'Wrapped SXP',\n      icon:\n        'https://github.com/trustwallet/assets/raw/b0ab88654fe64848da80d982945e4db06e197d4f/blockchains/ethereum/assets/0x8CE9137d39326AD0cD6491fb5CC0CbA0e089b6A9/logo.png',\n    },\n    {\n      tokenSymbol: 'HGET',\n      mintAddress: 'BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN',\n      tokenName: 'Wrapped HGET',\n    },\n    {\n      tokenSymbol: 'CREAM',\n      mintAddress: '5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv',\n      tokenName: 'Wrapped CREAM',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/4c82c2a409f18a4dd96a504f967a55a8fe47026d/blockchains/smartchain/assets/0xd4CB328A82bDf5f03eB737f37Fa6B370aef3e888/logo.png',\n    },\n    {\n      tokenSymbol: 'UBXT',\n      mintAddress: '873KLxCbz7s9Kc4ZzgYRtNmhfkQrhfyWGZJBmyCbC3ei',\n      tokenName: 'Wrapped UBXT',\n    },\n    {\n      tokenSymbol: 'HNT',\n      mintAddress: 'HqB7uswoVg4suaQiDP3wjxob1G5WdZ144zhdStwMCq7e',\n      tokenName: 'Wrapped HNT',\n    },\n    {\n      tokenSymbol: 'FRONT',\n      mintAddress: '9S4t2NEAiJVMvPdRYKVrfJpBafPBLtvbvyS3DecojQHw',\n      tokenName: 'Wrapped FRONT',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/6e375e4e5fb0ffe09ed001bae1ef8ca1d6c86034/blockchains/ethereum/assets/0xf8C3527CC04340b208C854E985240c02F7B7793f/logo.png',\n    },\n    {\n      tokenSymbol: 'AKRO',\n      mintAddress: '6WNVCuxCGJzNjmMZoKyhZJwvJ5tYpsLyAtagzYASqBoF',\n      tokenName: 'Wrapped AKRO',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/878dcab0fab90e6593bcb9b7d941be4915f287dc/blockchains/ethereum/assets/0xb2734a4Cec32C81FDE26B0024Ad3ceB8C9b34037/logo.png',\n    },\n    {\n      tokenSymbol: 'HXRO',\n      mintAddress: 'DJafV9qemGp7mLMEn5wrfqaFwxsbLgUsGVS16zKRk9kc',\n      tokenName: 'Wrapped HXRO',\n    },\n    {\n      tokenSymbol: 'UNI',\n      mintAddress: 'DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw',\n      tokenName: 'Wrapped UNI',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/08d734b5e6ec95227dc50efef3a9cdfea4c398a1/blockchains/ethereum/assets/0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984/logo.png',\n    },\n    {\n      tokenSymbol: 'MATH',\n      mintAddress: 'GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza',\n      tokenName: 'Wrapped MATH',\n    },\n    {\n      tokenSymbol: 'TOMO',\n      mintAddress: 'GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd',\n      tokenName: 'Wrapped TOMO',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/08d734b5e6ec95227dc50efef3a9cdfea4c398a1/blockchains/tomochain/info/logo.png',\n    },\n    {\n      tokenSymbol: 'LUA',\n      mintAddress: 'EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX',\n      tokenName: 'Wrapped LUA',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/2d2491130e6beda208ba4fc6df028a82a0106ab6/blockchains/ethereum/assets/0xB1f66997A5760428D3a87D68b90BfE0aE64121cC/logo.png',\n    },\n    {\n      tokenSymbol: 'FIDA',\n      mintAddress: 'EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp',\n      tokenName: 'Bonfida Token',\n      icon:\n        'https://raw.githubusercontent.com/dr497/awesome-serum-markets/master/icons/fida.svg',\n    },\n    {\n      tokenSymbol: 'LQID',\n      mintAddress: 'A6aY2ceogBz1VaXBxm1j2eJuNZMRqrWUAnKecrMH85zj',\n      tokenName: 'LQID',\n      icon:\n        'https://raw.githubusercontent.com/dr497/awesome-serum-markets/master/icons/lqid.svg',\n    },\n    {\n      tokenSymbol: 'SECO',\n      mintAddress: '7CnFGR9mZWyAtWxPcVuTewpyC3A3MDW4nLsu5NY6PDbd',\n      tokenName: 'Serum Ecosystem Pool Token',\n    },\n    {\n      tokenSymbol: 'HOLY',\n      mintAddress: '3GECTP7H4Tww3w8jEPJCJtXUtXxiZty31S9szs84CcwQ',\n      tokenName: 'Holy Trinity Pool',\n    },\n    {\n      tokenSymbol: 'KIN',\n      mintAddress: 'kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6',\n      tokenName: 'KIN',\n      icon:\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/kin/info/logo.png',\n    },\n    {\n      tokenSymbol: 'MAPS',\n      mintAddress: 'MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb',\n      tokenName: 'Maps.me Token',\n    },\n    {\n      tokenSymbol: 'RAY',\n      mintAddress: '4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R',\n      tokenName: 'Raydium',\n      icon:\n        'https://raw.githubusercontent.com/raydium-io/media-assets/master/logo.svg',\n    },\n    {\n      tokenSymbol: 'OXY',\n      mintAddress: 'z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M',\n      tokenName: 'Oxygen Protocol',\n      icon:\n        'https://raw.githubusercontent.com/nathanielparke/awesome-serum-markets/master/icons/oxy.svg',\n    },\n    {\n      tokenSymbol: 'COPE',\n      mintAddress: '3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE',\n      tokenName: 'COPE',\n      icon:\n        'https://cdn.jsdelivr.net/gh/solana-labs/token-list/assets/mainnet/3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE/logo.jpg',\n    },\n    {\n      tokenSymbol: 'BRZ',\n      mintAddress: 'FtgGSFADXBtroxq8VCausXRr2of47QBf5AS1NtZCu4GD',\n      tokenName: 'Brazilian Digital Token',\n      icon:\n        'https://cdn.jsdelivr.net/gh/solana-labs/explorer/public/tokens/brz.png',\n    },\n    {\n      tokenSymbol: 'STEP',\n      mintAddress: 'StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT',\n      tokenName: 'Step',\n      icon:\n        'https://cdn.jsdelivr.net/gh/solana-labs/token-list/assets/mainnet/StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT/logo.png',\n    },\n    {\n      tokenSymbol: 'SLRS',\n      mintAddress: 'SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr',\n      tokenName: 'Solrise Finance',\n      icon:\n        'https://i.ibb.co/tqbTKTT/slrs-256.png',\n    },\n    {\n      tokenSymbol: 'SAMO',\n      mintAddress: '7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU',\n      tokenName: 'Samoyed Coin',\n      icon:\n        'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU/logo.png',\n    },\n    {\n      tokenSymbol: 'stSOL',\n      mintAddress: '7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj',\n      tokenName: 'Lido Staked SOL',\n      icon:\n        'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj/logo.png',\n    },\n  ],\n};\n\nconst TokenListContext = React.createContext({});\n\nexport function useTokenInfos() {\n  const { tokenInfos } = useContext(TokenListContext);\n  return tokenInfos;\n}\n\nexport function TokenRegistryProvider(props) {\n  const { endpoint } = useConnectionConfig();\n  const [tokenInfos, setTokenInfos] = useState(null);\n  useEffect(() => {\n    if (endpoint !== MAINNET_BACKUP_URL && endpoint !== MAINNET_URL) return;\n    const tokenListProvider = new TokenListProvider();\n    tokenListProvider.resolve().then((tokenListContainer) => {\n      const cluster = clusterForEndpoint(endpoint);\n\n      const filteredTokenListContainer = tokenListContainer?.filterByClusterSlug(\n        cluster?.clusterSlug,\n      );\n      const tokenInfos =\n        tokenListContainer !== filteredTokenListContainer\n          ? filteredTokenListContainer?.getList()\n          : null; // Workaround for filter return all on unknown slug\n      setTokenInfos(tokenInfos);\n    });\n  }, [endpoint]);\n\n  return (\n    <TokenListContext.Provider value={{ tokenInfos }}>\n      {props.children}\n    </TokenListContext.Provider>\n  );\n}\n\nconst customTokenNamesByNetwork = JSON.parse(\n  localStorage.getItem('tokenNames') ?? '{}',\n);\n\nconst nameUpdated = new EventEmitter();\nnameUpdated.setMaxListeners(100);\n\nexport function useTokenInfo(mint) {\n  const { endpoint } = useConnectionConfig();\n  useListener(nameUpdated, 'update');\n  const tokenInfos = useTokenInfos();\n  return getTokenInfo(mint, endpoint, tokenInfos);\n}\n\nexport function getTokenInfo(mint, endpoint, tokenInfos) {\n  if (!mint) {\n    return { name: null, symbol: null };\n  }\n\n  let info = customTokenNamesByNetwork?.[endpoint]?.[mint.toBase58()];\n  let match = tokenInfos?.find(\n    (tokenInfo) => tokenInfo.address === mint.toBase58(),\n  );\n\n  if (match) {\n    if (!info) {\n      info = { ...match, logoUri: match.logoURI };\n    }\n    // The user has overridden a name locally.\n    else {\n      info = { ...match, ...info, logoUri: match.logoURI };\n    }\n  }\n  return { ...info };\n}\n\nexport function useUpdateTokenName() {\n  const { endpoint } = useConnectionConfig();\n  return useCallback(\n    function updateTokenName(mint, name, symbol) {\n      if (!name || !symbol) {\n        if (name) {\n          symbol = name;\n        } else if (symbol) {\n          name = symbol;\n        } else {\n          return;\n        }\n      }\n      if (!customTokenNamesByNetwork[endpoint]) {\n        customTokenNamesByNetwork[endpoint] = {};\n      }\n      customTokenNamesByNetwork[endpoint][mint.toBase58()] = { name, symbol };\n      localStorage.setItem(\n        'tokenNames',\n        JSON.stringify(customTokenNamesByNetwork),\n      );\n      nameUpdated.emit('update');\n    },\n    [endpoint],\n  );\n}\n// Returns tokenInfos for the popular tokens list.\nexport function usePopularTokens() {\n  const tokenInfos = useTokenInfos();\n  const { endpoint } = useConnectionConfig();\n  return (!POPULAR_TOKENS[endpoint]\n    ? []\n    : POPULAR_TOKENS[endpoint]\n  ).map((tok) =>\n    getTokenInfo(new PublicKey(tok.mintAddress), endpoint, tokenInfos),\n  );\n}\n"],"sourceRoot":""}